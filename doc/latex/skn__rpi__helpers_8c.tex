\hypertarget{skn__rpi__helpers_8c}{\section{src/skn\+\_\+rpi\+\_\+helpers.c File Reference}
\label{skn__rpi__helpers_8c}\index{src/skn\+\_\+rpi\+\_\+helpers.\+c@{src/skn\+\_\+rpi\+\_\+helpers.\+c}}
}
{\ttfamily \#include \char`\"{}skn\+\_\+network\+\_\+helpers.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}skn\+\_\+rpi\+\_\+helpers.\+h\char`\"{}}\\*
Include dependency graph for skn\+\_\+rpi\+\_\+helpers.\+c\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{skn__rpi__helpers_8c__incl}
\end{center}
\end{figure}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
static void \hyperlink{skn__rpi__helpers_8c_aca7dfbde9be606bb7d177fb686b103f9}{skn\+\_\+display\+\_\+print\+\_\+usage} ()
\item 
static \hyperlink{skn__common__headers_8h_a9e176eedaf378010a6a48e6a242fc6a0}{P\+Display\+Manager} \hyperlink{skn__rpi__helpers_8c_a3b806c833fce33e93ad36909a2561353}{skn\+\_\+display\+\_\+manager\+\_\+create} (char $\ast$welcome)
\item 
static void \hyperlink{skn__rpi__helpers_8c_a7c4eede6a3dd9f0a33125bd573fd44eb}{skn\+\_\+display\+\_\+manager\+\_\+destroy} (\hyperlink{skn__common__headers_8h_a9e176eedaf378010a6a48e6a242fc6a0}{P\+Display\+Manager} pdm)
\item 
static void $\ast$ \hyperlink{skn__rpi__helpers_8c_ad17a8b378ba944f87beef66dbf0f47b0}{skn\+\_\+display\+\_\+manager\+\_\+message\+\_\+consumer\+\_\+thread} (void $\ast$ptr)
\item 
static \hyperlink{skn__common__headers_8h_a3d00a0f207e96ee5369c709b45d6a2e6}{P\+L\+C\+D\+Device} \hyperlink{skn__rpi__helpers_8c_a6e967d6169dd92b30845335ab426c59b}{skn\+\_\+device\+\_\+manager\+\_\+init\+\_\+i2c} (\hyperlink{skn__common__headers_8h_a9e176eedaf378010a6a48e6a242fc6a0}{P\+Display\+Manager} pdm)
\item 
\hyperlink{skn__common__headers_8h_a3d00a0f207e96ee5369c709b45d6a2e6}{P\+L\+C\+D\+Device} \hyperlink{skn__rpi__helpers_8c_aa70aa8be6de3ef378d2d92839dae79c0}{skn\+\_\+device\+\_\+manager\+\_\+\+Serial\+Port} (\hyperlink{skn__common__headers_8h_a9e176eedaf378010a6a48e6a242fc6a0}{P\+Display\+Manager} pdm)
\item 
\hyperlink{skn__common__headers_8h_a3d00a0f207e96ee5369c709b45d6a2e6}{P\+L\+C\+D\+Device} \hyperlink{skn__rpi__helpers_8c_aeeb817184dce0d96e05d4cdd6940db70}{skn\+\_\+device\+\_\+manager\+\_\+\+M\+C\+P23017} (\hyperlink{skn__common__headers_8h_a9e176eedaf378010a6a48e6a242fc6a0}{P\+Display\+Manager} pdm)
\item 
\hyperlink{skn__common__headers_8h_a3d00a0f207e96ee5369c709b45d6a2e6}{P\+L\+C\+D\+Device} \hyperlink{skn__rpi__helpers_8c_a343fa5773d09ffd114adc3425f3c6bde}{skn\+\_\+device\+\_\+manager\+\_\+\+M\+C\+P23008} (\hyperlink{skn__common__headers_8h_a9e176eedaf378010a6a48e6a242fc6a0}{P\+Display\+Manager} pdm)
\item 
\hyperlink{skn__common__headers_8h_a3d00a0f207e96ee5369c709b45d6a2e6}{P\+L\+C\+D\+Device} \hyperlink{skn__rpi__helpers_8c_a9a6dccab4be976ca76eb960076dca0a0}{skn\+\_\+device\+\_\+manager\+\_\+\+P\+C\+F8574} (\hyperlink{skn__common__headers_8h_a9e176eedaf378010a6a48e6a242fc6a0}{P\+Display\+Manager} pdm)
\item 
void \hyperlink{skn__rpi__helpers_8c_a18bf9699f8b6ad05aff925d9deb31be1}{skn\+\_\+device\+\_\+manager\+\_\+backlight} (int af\+\_\+backlight, int state)
\item 
int \hyperlink{skn__rpi__helpers_8c_a58c9a50b0307d45138f4a6f2e6ba7a76}{skn\+\_\+device\+\_\+manager\+\_\+\+L\+C\+D\+\_\+setup} (\hyperlink{skn__common__headers_8h_a9e176eedaf378010a6a48e6a242fc6a0}{P\+Display\+Manager} pdm, char $\ast$device\+\_\+name)
\item 
int \hyperlink{skn__rpi__helpers_8c_aad63cb41e99a588cea9609a100cc9333}{skn\+\_\+device\+\_\+manager\+\_\+\+L\+C\+D\+\_\+shutdown} (\hyperlink{skn__common__headers_8h_a9e176eedaf378010a6a48e6a242fc6a0}{P\+Display\+Manager} pdm)
\item 
long \hyperlink{skn__rpi__helpers_8c_aac32062aeca841944e9d1016c8db5e6a}{get\+Cpu\+Temps} (\hyperlink{skn__common__headers_8h_aa93d24a6c28f94dd78dabd7a586821cd}{P\+Cpu\+Temps} temps)
\item 
int \hyperlink{skn__rpi__helpers_8c_a0410c7c96c2188c945cea294ae074ff9}{generate\+\_\+rpi\+\_\+model\+\_\+info} (char $\ast$msg)
\item 
int \hyperlink{skn__rpi__helpers_8c_aec6fcc1d0ae2035966ea7b3f624050cd}{generate\+\_\+cpu\+\_\+temps\+\_\+info} (char $\ast$msg)
\item 
char $\ast$ \hyperlink{skn__rpi__helpers_8c_af2cd8436ec8dca06473441659fb03f75}{skn\+\_\+scroller\+\_\+pad\+\_\+right} (char $\ast$buffer)
\item 
char $\ast$ \hyperlink{skn__rpi__helpers_8c_ae945b3a41d43db4d0c52f522d663d415}{skn\+\_\+scroller\+\_\+wrap\+\_\+blanks} (char $\ast$buffer)
\item 
int \hyperlink{skn__rpi__helpers_8c_a4f78720f41ceb03e6b6111a358c7aea1}{skn\+\_\+scroller\+\_\+scroll\+\_\+lines} (\hyperlink{skn__common__headers_8h_a754e9456a497a668b8d959ed2cbe9ec3}{P\+Display\+Line} pdl, int lcd\+\_\+handle, int line)
\item 
\hyperlink{skn__common__headers_8h_a754e9456a497a668b8d959ed2cbe9ec3}{P\+Display\+Line} \hyperlink{skn__rpi__helpers_8c_a73890d642bf9cbb1de78675d587d79a3}{skn\+\_\+display\+\_\+manager\+\_\+add\+\_\+line} (\hyperlink{skn__common__headers_8h_a9e176eedaf378010a6a48e6a242fc6a0}{P\+Display\+Manager} pdmx, char $\ast$client\+\_\+request\+\_\+message)
\item 
\hyperlink{skn__common__headers_8h_a9e176eedaf378010a6a48e6a242fc6a0}{P\+Display\+Manager} \hyperlink{skn__rpi__helpers_8c_abc8758d786bdcff4bb0ec7ab05adfca1}{skn\+\_\+get\+\_\+display\+\_\+manager\+\_\+ref} ()
\item 
int \hyperlink{skn__rpi__helpers_8c_a0e93b40f29ab2df743c934be34500c15}{skn\+\_\+display\+\_\+manager\+\_\+do\+\_\+work} (char $\ast$client\+\_\+request\+\_\+message)
\item 
int \hyperlink{skn__rpi__helpers_8c_aee27f71a8f457def69c26d516ae821ab}{skn\+\_\+display\+\_\+manager\+\_\+message\+\_\+consumer\+\_\+startup} (\hyperlink{skn__common__headers_8h_a9e176eedaf378010a6a48e6a242fc6a0}{P\+Display\+Manager} pdm)
\item 
void \hyperlink{skn__rpi__helpers_8c_a34ce4afdf4f5f20fc109e749fb87c573}{skn\+\_\+display\+\_\+manager\+\_\+message\+\_\+consumer\+\_\+shutdown} (\hyperlink{skn__common__headers_8h_a9e176eedaf378010a6a48e6a242fc6a0}{P\+Display\+Manager} pdm)
\item 
int \hyperlink{skn__rpi__helpers_8c_aed93e422e5b2cd74ea04177db841fa37}{skn\+\_\+handle\+\_\+display\+\_\+command\+\_\+line} (int argc, char $\ast$$\ast$argv)
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{skn__rpi__helpers_8c_a3599398fb56285a3069b55791e6bb953}{gd\+\_\+i\+\_\+rows} = 4
\item 
int \hyperlink{skn__rpi__helpers_8c_ac934aabd8dd134e724c62e1264afa549}{gd\+\_\+i\+\_\+cols} = 20
\item 
char $\ast$ \hyperlink{skn__rpi__helpers_8c_aa8460852bd6c3559cc5ad4bd58806ba2}{gd\+\_\+pch\+\_\+serial\+\_\+port}
\item 
char $\ast$ \hyperlink{skn__rpi__helpers_8c_a236d69bc821c60a396d02099e92d22bb}{gd\+\_\+pch\+\_\+device\+\_\+name} = \char`\"{}pcf\char`\"{}
\item 
\hyperlink{skn__common__headers_8h_a9e176eedaf378010a6a48e6a242fc6a0}{P\+Display\+Manager} \hyperlink{skn__rpi__helpers_8c_ab1d9c73f13a8c60f54b1df15a34a8e64}{gp\+\_\+structure\+\_\+pdm} = N\+U\+L\+L
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\hypertarget{skn__rpi__helpers_8c_aec6fcc1d0ae2035966ea7b3f624050cd}{\index{skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}!generate\+\_\+cpu\+\_\+temps\+\_\+info@{generate\+\_\+cpu\+\_\+temps\+\_\+info}}
\index{generate\+\_\+cpu\+\_\+temps\+\_\+info@{generate\+\_\+cpu\+\_\+temps\+\_\+info}!skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}}
\subsubsection[{generate\+\_\+cpu\+\_\+temps\+\_\+info}]{\setlength{\rightskip}{0pt plus 5cm}int generate\+\_\+cpu\+\_\+temps\+\_\+info (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{msg}
\end{DoxyParamCaption}
)}}\label{skn__rpi__helpers_8c_aec6fcc1d0ae2035966ea7b3f624050cd}
D\+O N\+O\+T U\+S\+E T\+H\+I\+S I\+N M\+O\+D\+U\+L\+E\+S T\+H\+A\+T H\+A\+N\+D\+L\+E A I2\+C Based L\+C\+D R\+Pi cannot handle I2\+C and Get\+Cpu\+Temp() without locking the process in an uniterrupted sleep; forcing a power cycle. 

Definition at line 348 of file skn\+\_\+rpi\+\_\+helpers.\+c.



References \+\_\+temps\+::c, \+\_\+temps\+::f, get\+Cpu\+Temps(), and S\+Z\+\_\+\+I\+N\+F\+O\+\_\+\+B\+U\+F\+F.


\begin{DoxyCode}
348                                        \{
349     \textcolor{keyword}{static} \hyperlink{struct__temps}{CpuTemps} cpuTemp;
350     \textcolor{keywordtype}{int} mLen = 0;
351 
352     memset(&cpuTemp, 0, \textcolor{keyword}{sizeof}(\hyperlink{struct__temps}{CpuTemps}));
353     \textcolor{keywordflow}{if} ( \hyperlink{skn__rpi__helpers_8c_aac32062aeca841944e9d1016c8db5e6a}{getCpuTemps}(&cpuTemp) != -1 ) \{
354         mLen = snprintf(msg, \hyperlink{cmd_d_c_8c_a442d5e93bd9c9d8eb4532aba62b5f86c}{SZ\_INFO\_BUFF}-1, \textcolor{stringliteral}{"CPU: %s %s"}, cpuTemp.\hyperlink{struct__temps_add683444c2985b00bd51bc69e9026a69}{c}, cpuTemp.
      \hyperlink{struct__temps_a9de7d7f00c6df40b61735f25e3247b40}{f});
355     \} \textcolor{keywordflow}{else} \{
356         mLen = snprintf(msg, \hyperlink{cmd_d_c_8c_a442d5e93bd9c9d8eb4532aba62b5f86c}{SZ\_INFO\_BUFF}-1, \textcolor{stringliteral}{"Temp: N/A"});
357     \}
358 
359     \textcolor{keywordflow}{return} mLen;
360 \}
\end{DoxyCode}


Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=325pt]{skn__rpi__helpers_8c_aec6fcc1d0ae2035966ea7b3f624050cd_cgraph}
\end{center}
\end{figure}


\hypertarget{skn__rpi__helpers_8c_a0410c7c96c2188c945cea294ae074ff9}{\index{skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}!generate\+\_\+rpi\+\_\+model\+\_\+info@{generate\+\_\+rpi\+\_\+model\+\_\+info}}
\index{generate\+\_\+rpi\+\_\+model\+\_\+info@{generate\+\_\+rpi\+\_\+model\+\_\+info}!skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}}
\subsubsection[{generate\+\_\+rpi\+\_\+model\+\_\+info}]{\setlength{\rightskip}{0pt plus 5cm}int generate\+\_\+rpi\+\_\+model\+\_\+info (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{msg}
\end{DoxyParamCaption}
)}}\label{skn__rpi__helpers_8c_a0410c7c96c2188c945cea294ae074ff9}


Definition at line 328 of file skn\+\_\+rpi\+\_\+helpers.\+c.



References gd\+\_\+ch\+\_\+intf\+Name, gd\+\_\+ch\+\_\+ip\+Address, skn\+\_\+get\+\_\+number\+\_\+of\+\_\+cpu\+\_\+cores(), and S\+Z\+\_\+\+I\+N\+F\+O\+\_\+\+B\+U\+F\+F.



Referenced by skn\+\_\+display\+\_\+manager\+\_\+do\+\_\+work().


\begin{DoxyCode}
328                                        \{
329     \textcolor{keywordtype}{int} model = 0, rev = 0, mem = 0, maker = 0, overVolted = 0, mLen = 0;
330     \textcolor{keywordtype}{char} * message = \textcolor{stringliteral}{"Device has an unknown model type.\(\backslash\)n"};
331 
332     piBoardId(&model, &rev, &mem, &maker, &overVolted);
333     \textcolor{keywordflow}{if} (model == PI\_MODEL\_UNKNOWN) \{
334         mLen = snprintf(msg, \hyperlink{cmd_d_c_8c_a442d5e93bd9c9d8eb4532aba62b5f86c}{SZ\_INFO\_BUFF} -1, \textcolor{stringliteral}{"%s"}, message);
335     \} \textcolor{keywordflow}{else} \{
336         mLen = snprintf(msg, \hyperlink{cmd_d_c_8c_a442d5e93bd9c9d8eb4532aba62b5f86c}{SZ\_INFO\_BUFF} -1, \textcolor{stringliteral}{"Device: %s, Cpus: %ld, Rev: %s, Mem: %dMB,
       Maker: %s %s, %s:%s"}, piModelNames[model],
337                         \hyperlink{skn__network__helpers_8c_a9b607e33be05bf0479127f233a58fab7}{skn\_get\_number\_of\_cpu\_cores}(), piRevisionNames[rev], mem
      , piMakerNames[maker], overVolted ? \textcolor{stringliteral}{"[OV]"} : \textcolor{stringliteral}{""}, \hyperlink{skn__network__helpers_8c_ac317f6dfab7bc91b9e2d717a7a1b8fcb}{gd\_ch\_intfName},
338                         \hyperlink{skn__network__helpers_8c_aee48900a4a99c0480e3f1dfb6c4f38c7}{gd\_ch\_ipAddress});
339     \}
340     \textcolor{keywordflow}{return} mLen;
341 \}
\end{DoxyCode}


Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{skn__rpi__helpers_8c_a0410c7c96c2188c945cea294ae074ff9_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{skn__rpi__helpers_8c_a0410c7c96c2188c945cea294ae074ff9_icgraph}
\end{center}
\end{figure}


\hypertarget{skn__rpi__helpers_8c_aac32062aeca841944e9d1016c8db5e6a}{\index{skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}!get\+Cpu\+Temps@{get\+Cpu\+Temps}}
\index{get\+Cpu\+Temps@{get\+Cpu\+Temps}!skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}}
\subsubsection[{get\+Cpu\+Temps}]{\setlength{\rightskip}{0pt plus 5cm}long get\+Cpu\+Temps (
\begin{DoxyParamCaption}
\item[{{\bf P\+Cpu\+Temps}}]{temps}
\end{DoxyParamCaption}
)}}\label{skn__rpi__helpers_8c_aac32062aeca841944e9d1016c8db5e6a}
D\+O N\+O\+T U\+S\+E T\+H\+I\+S I\+N M\+O\+D\+U\+L\+E\+S T\+H\+A\+T H\+A\+N\+D\+L\+E A I2\+C Based L\+C\+D R\+Pi cannot handle I2\+C and Get\+Cpu\+Temp() without locking the process in an uniterrupted sleep; forcing a power cycle.

Redhat/\+Centos\+: /sys/class/hwmon/hwmon0/device/temp1\+\_\+input Ubuntu/\+Debian\+: /sys/class/thermal/thermal\+\_\+zone0/temp 

Definition at line 293 of file skn\+\_\+rpi\+\_\+helpers.\+c.



References \+\_\+temps\+::c, \+\_\+temps\+::cb\+Name, \+\_\+temps\+::f, \+\_\+temps\+::raw, and S\+D\+\_\+\+W\+A\+R\+N\+I\+N\+G.



Referenced by generate\+\_\+cpu\+\_\+temps\+\_\+info().


\begin{DoxyCode}
293                                   \{
294     \textcolor{keywordtype}{long} lRaw = 0;
295     \textcolor{keywordtype}{int} rc = 0;
296 
297     FILE *sysFs = fopen(\textcolor{stringliteral}{"/sys/class/thermal/thermal\_zone0/temp"}, \textcolor{stringliteral}{"r"});
298     \textcolor{keywordflow}{if} (sysFs == NULL) \{
299         skn\_logger(\hyperlink{skn__common__headers_8h_a1b84e50e89a48558f56175017017c375}{SD\_WARNING}, \textcolor{stringliteral}{"Warning: Failed to open Debian CPU temperature: %d:%s\(\backslash\)n"}, errno, 
      strerror(errno));
300         sysFs = fopen(\textcolor{stringliteral}{"/sys/class/hwmon/hwmon0/device/temp1\_input"}, \textcolor{stringliteral}{"r"});
301         \textcolor{keywordflow}{if} (sysFs == NULL) \{
302             skn\_logger(\hyperlink{skn__common__headers_8h_a1b84e50e89a48558f56175017017c375}{SD\_WARNING}, \textcolor{stringliteral}{"Warning: Failed to open Centos CPU temperature: %d:%s\(\backslash\)n"}, 
      errno, strerror(errno));
303             \textcolor{keywordflow}{return} -1;
304         \}
305     \}
306 
307     rc = fscanf(sysFs, \textcolor{stringliteral}{"%ld"}, &lRaw);
308     fclose(sysFs);
309 
310     \textcolor{keywordflow}{if} (rc != 1 || lRaw < 0) \{
311         skn\_logger(\hyperlink{skn__common__headers_8h_a1b84e50e89a48558f56175017017c375}{SD\_WARNING}, \textcolor{stringliteral}{"Warning: Failed to READ CPU temperature: %d:%s\(\backslash\)n"}, strerror(errno
      ));
312         \textcolor{keywordflow}{return} -1;
313     \}
314 
315     \textcolor{keywordflow}{if} (temps != NULL) \{ \textcolor{comment}{// populate struct}
316         snprintf(temps->\hyperlink{struct__temps_add683444c2985b00bd51bc69e9026a69}{c}, \textcolor{keyword}{sizeof}(temps->\hyperlink{struct__temps_add683444c2985b00bd51bc69e9026a69}{c}), \textcolor{stringliteral}{"%3.1fC"}, (\textcolor{keywordtype}{double} )(lRaw / 1000.0));
317         snprintf(temps->\hyperlink{struct__temps_a9de7d7f00c6df40b61735f25e3247b40}{f}, \textcolor{keyword}{sizeof}(temps->\hyperlink{struct__temps_a9de7d7f00c6df40b61735f25e3247b40}{f}), \textcolor{stringliteral}{"%3.1fF"}, (\textcolor{keywordtype}{double} )(lRaw / 1000.0 * 9 / 5 + 32));
318         temps->\hyperlink{struct__temps_a62d3522782b91f7fbb444bceb91c1876}{raw} = lRaw;
319         strncpy(temps->\hyperlink{struct__temps_a74414216b43459f4ebcada36b9b165f5}{cbName}, \textcolor{stringliteral}{"CpuTemps"}, \textcolor{keyword}{sizeof}(temps->\hyperlink{struct__temps_a74414216b43459f4ebcada36b9b165f5}{cbName}) - 1);
320     \}
321 
322     \textcolor{keywordflow}{return} lRaw;
323 \}
\end{DoxyCode}


Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=325pt]{skn__rpi__helpers_8c_aac32062aeca841944e9d1016c8db5e6a_icgraph}
\end{center}
\end{figure}


\hypertarget{skn__rpi__helpers_8c_a18bf9699f8b6ad05aff925d9deb31be1}{\index{skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}!skn\+\_\+device\+\_\+manager\+\_\+backlight@{skn\+\_\+device\+\_\+manager\+\_\+backlight}}
\index{skn\+\_\+device\+\_\+manager\+\_\+backlight@{skn\+\_\+device\+\_\+manager\+\_\+backlight}!skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}}
\subsubsection[{skn\+\_\+device\+\_\+manager\+\_\+backlight}]{\setlength{\rightskip}{0pt plus 5cm}void skn\+\_\+device\+\_\+manager\+\_\+backlight (
\begin{DoxyParamCaption}
\item[{int}]{af\+\_\+backlight, }
\item[{int}]{state}
\end{DoxyParamCaption}
)}}\label{skn__rpi__helpers_8c_a18bf9699f8b6ad05aff925d9deb31be1}


Definition at line 184 of file skn\+\_\+rpi\+\_\+helpers.\+c.



Referenced by skn\+\_\+device\+\_\+manager\+\_\+init\+\_\+i2c(), and skn\+\_\+device\+\_\+manager\+\_\+\+L\+C\+D\+\_\+shutdown().


\begin{DoxyCode}
184                                                                \{
185     digitalWrite(af\_backlight, state);
186 \}
\end{DoxyCode}


Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{skn__rpi__helpers_8c_a18bf9699f8b6ad05aff925d9deb31be1_icgraph}
\end{center}
\end{figure}


\hypertarget{skn__rpi__helpers_8c_a6e967d6169dd92b30845335ab426c59b}{\index{skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}!skn\+\_\+device\+\_\+manager\+\_\+init\+\_\+i2c@{skn\+\_\+device\+\_\+manager\+\_\+init\+\_\+i2c}}
\index{skn\+\_\+device\+\_\+manager\+\_\+init\+\_\+i2c@{skn\+\_\+device\+\_\+manager\+\_\+init\+\_\+i2c}!skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}}
\subsubsection[{skn\+\_\+device\+\_\+manager\+\_\+init\+\_\+i2c}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf P\+L\+C\+D\+Device} skn\+\_\+device\+\_\+manager\+\_\+init\+\_\+i2c (
\begin{DoxyParamCaption}
\item[{{\bf P\+Display\+Manager}}]{pdm}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{skn__rpi__helpers_8c_a6e967d6169dd92b30845335ab426c59b}


Definition at line 188 of file skn\+\_\+rpi\+\_\+helpers.\+c.



References \+\_\+\+I\+I\+C\+L\+C\+D\+::af\+\_\+backlight, \+\_\+\+I\+I\+C\+L\+C\+D\+::af\+\_\+base, \+\_\+\+I\+I\+C\+L\+C\+D\+::af\+\_\+blue, \+\_\+\+I\+I\+C\+L\+C\+D\+::af\+\_\+db0, \+\_\+\+I\+I\+C\+L\+C\+D\+::af\+\_\+db1, \+\_\+\+I\+I\+C\+L\+C\+D\+::af\+\_\+db2, \+\_\+\+I\+I\+C\+L\+C\+D\+::af\+\_\+db3, \+\_\+\+I\+I\+C\+L\+C\+D\+::af\+\_\+db4, \+\_\+\+I\+I\+C\+L\+C\+D\+::af\+\_\+db5, \+\_\+\+I\+I\+C\+L\+C\+D\+::af\+\_\+db6, \+\_\+\+I\+I\+C\+L\+C\+D\+::af\+\_\+db7, \+\_\+\+I\+I\+C\+L\+C\+D\+::af\+\_\+e, \+\_\+\+I\+I\+C\+L\+C\+D\+::af\+\_\+green, \+\_\+\+I\+I\+C\+L\+C\+D\+::af\+\_\+red, \+\_\+\+I\+I\+C\+L\+C\+D\+::af\+\_\+rs, \+\_\+\+I\+I\+C\+L\+C\+D\+::af\+\_\+rw, \+\_\+\+D\+I\+S\+P\+L\+A\+Y\+\_\+\+M\+A\+N\+A\+G\+E\+R\+::dsp\+\_\+cols, \+\_\+\+D\+I\+S\+P\+L\+A\+Y\+\_\+\+M\+A\+N\+A\+G\+E\+R\+::dsp\+\_\+rows, gd\+\_\+pch\+\_\+device\+\_\+name, \+\_\+\+I\+I\+C\+L\+C\+D\+::i2c\+\_\+address, \+\_\+\+D\+I\+S\+P\+L\+A\+Y\+\_\+\+M\+A\+N\+A\+G\+E\+R\+::lcd, \+\_\+\+I\+I\+C\+L\+C\+D\+::lcd\+\_\+handle, \+\_\+\+D\+I\+S\+P\+L\+A\+Y\+\_\+\+M\+A\+N\+A\+G\+E\+R\+::lcd\+\_\+handle, P\+L\+A\+T\+F\+O\+R\+M\+\_\+\+E\+R\+R\+O\+R, S\+D\+\_\+\+E\+R\+R, \+\_\+\+I\+I\+C\+L\+C\+D\+::setup, and skn\+\_\+device\+\_\+manager\+\_\+backlight().



Referenced by skn\+\_\+device\+\_\+manager\+\_\+\+M\+C\+P23008(), skn\+\_\+device\+\_\+manager\+\_\+\+M\+C\+P23017(), and skn\+\_\+device\+\_\+manager\+\_\+\+P\+C\+F8574().


\begin{DoxyCode}
188                                                                    \{
189     \hyperlink{struct___i_i_c_l_c_d}{PLCDDevice} plcd = (\hyperlink{skn__common__headers_8h_a3d00a0f207e96ee5369c709b45d6a2e6}{PLCDDevice})&pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_a182e9fb6ca9f11b3e0a35628123d46f5}{lcd};
190 
191     \textcolor{comment}{// call the initializer}
192     plcd->\hyperlink{struct___i_i_c_l_c_d_a6bc8b9b3e5e69bfa25fdcd6b3c27628e}{setup}(plcd->\hyperlink{struct___i_i_c_l_c_d_ae74954b1b96523d617a68e42c2663086}{af\_base}, plcd->\hyperlink{struct___i_i_c_l_c_d_a3f3fe8757875939b987ac0c416081551}{i2c\_address});
193 
194 \textcolor{comment}{// Control signals}
195     pinMode(plcd->\hyperlink{struct___i_i_c_l_c_d_ad0162f6a3e82c34192c0d901ef0ff6be}{af\_rw}, OUTPUT);
196     digitalWrite(plcd->\hyperlink{struct___i_i_c_l_c_d_ad0162f6a3e82c34192c0d901ef0ff6be}{af\_rw}, LOW); \textcolor{comment}{// Not used with wiringPi - always in write mode}
197 
198     \textcolor{comment}{//  Backlight LEDs}
199     \textcolor{keywordflow}{if} (strcmp(\hyperlink{skn__rpi__helpers_8c_a236d69bc821c60a396d02099e92d22bb}{gd\_pch\_device\_name}, \textcolor{stringliteral}{"mc7"}) == 0) \{
200         pinMode(plcd->\hyperlink{struct___i_i_c_l_c_d_aca8ab39cfa9f683b2d03269886a0f633}{af\_red}, OUTPUT);
201         \hyperlink{skn__rpi__helpers_8c_a18bf9699f8b6ad05aff925d9deb31be1}{skn\_device\_manager\_backlight}(plcd->\hyperlink{struct___i_i_c_l_c_d_aca8ab39cfa9f683b2d03269886a0f633}{af\_red}, HIGH);
202         pinMode(plcd->\hyperlink{struct___i_i_c_l_c_d_a70176d63c9065d4186f55ae8328a82d3}{af\_green}, OUTPUT);
203         \hyperlink{skn__rpi__helpers_8c_a18bf9699f8b6ad05aff925d9deb31be1}{skn\_device\_manager\_backlight}(plcd->\hyperlink{struct___i_i_c_l_c_d_a70176d63c9065d4186f55ae8328a82d3}{af\_green}, HIGH);
204         pinMode(plcd->\hyperlink{struct___i_i_c_l_c_d_ad64bc4c5fc6a592f161e594f0b2433e1}{af\_blue}, OUTPUT);
205         \hyperlink{skn__rpi__helpers_8c_a18bf9699f8b6ad05aff925d9deb31be1}{skn\_device\_manager\_backlight}(plcd->\hyperlink{struct___i_i_c_l_c_d_ad64bc4c5fc6a592f161e594f0b2433e1}{af\_blue}, HIGH);
206     \} \textcolor{keywordflow}{else} \{
207         pinMode(plcd->\hyperlink{struct___i_i_c_l_c_d_ad160086a31276fbaf849855519b9878e}{af\_backlight}, OUTPUT);
208         \hyperlink{skn__rpi__helpers_8c_a18bf9699f8b6ad05aff925d9deb31be1}{skn\_device\_manager\_backlight}(plcd->
      \hyperlink{struct___i_i_c_l_c_d_ad160086a31276fbaf849855519b9878e}{af\_backlight}, HIGH);
209     \}
210 
211 
212 
213     \textcolor{comment}{// The other control pins are initialised with lcdInit ()}
214     plcd->\hyperlink{struct___i_i_c_l_c_d_afc74b2d9120be4a8e69e48b220d6781c}{lcd\_handle} = pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_a6ebc44b98c1483295586660829eb5a43}{lcd\_handle} = lcdInit(pdm->
      \hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_aeddcffcc90a611efde00a085352bc63b}{dsp\_rows}, pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_a8ea0b9503de7da47f210489c8fa19867}{dsp\_cols}, 4,
215                                                  plcd->\hyperlink{struct___i_i_c_l_c_d_af738bf1e020daaa5476b917c375e807a}{af\_rs}, plcd->\hyperlink{struct___i_i_c_l_c_d_a896f8305b5c0395ea7f9074904047b32}{af\_e},
216                                                  plcd->\hyperlink{struct___i_i_c_l_c_d_adbfc88b661d5da527aad6f5bcd45a85c}{af\_db4}, plcd->
      \hyperlink{struct___i_i_c_l_c_d_a41c4536106493476b52c9a9df9dd8599}{af\_db5}, plcd->\hyperlink{struct___i_i_c_l_c_d_a0f3ebbe756ecf62494733287f64821f9}{af\_db6}, plcd->\hyperlink{struct___i_i_c_l_c_d_ae55385ca612fd157fb85e7b3d5423ee4}{af\_db7},
217                                                  plcd->\hyperlink{struct___i_i_c_l_c_d_a86dfd51ffdc849569bc91bba9f9cd4a6}{af\_db0}, plcd->
      \hyperlink{struct___i_i_c_l_c_d_a114a5f81c889fe857d714a3a5033b397}{af\_db1}, plcd->\hyperlink{struct___i_i_c_l_c_d_a7b88e6903c8fb93882c396261ffe40b5}{af\_db2}, plcd->\hyperlink{struct___i_i_c_l_c_d_a26f362cb78eb2227a14706e9c992a066}{af\_db3});
218 
219     \textcolor{keywordflow}{if} (pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_a6ebc44b98c1483295586660829eb5a43}{lcd\_handle} == \hyperlink{cmd_d_c_8c_a12efd06fda89d6826f820e75148d8fd7}{PLATFORM\_ERROR}) \{
220         skn\_logger(\hyperlink{skn__common__headers_8h_a29cd8395c2db41768436986ab7a666b3}{SD\_ERR}, \textcolor{stringliteral}{"I2C Services failed to initialize. lcdInit(%d)"}, pdm->
      \hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_a6ebc44b98c1483295586660829eb5a43}{lcd\_handle});
221         \textcolor{keywordflow}{return} NULL;
222     \} \textcolor{keywordflow}{else} \{
223         lcdClear(pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_a6ebc44b98c1483295586660829eb5a43}{lcd\_handle});
224     \}
225 
226     \textcolor{keywordflow}{return} plcd;
227 \}
\end{DoxyCode}


Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=338pt]{skn__rpi__helpers_8c_a6e967d6169dd92b30845335ab426c59b_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{skn__rpi__helpers_8c_a6e967d6169dd92b30845335ab426c59b_icgraph}
\end{center}
\end{figure}


\hypertarget{skn__rpi__helpers_8c_a58c9a50b0307d45138f4a6f2e6ba7a76}{\index{skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}!skn\+\_\+device\+\_\+manager\+\_\+\+L\+C\+D\+\_\+setup@{skn\+\_\+device\+\_\+manager\+\_\+\+L\+C\+D\+\_\+setup}}
\index{skn\+\_\+device\+\_\+manager\+\_\+\+L\+C\+D\+\_\+setup@{skn\+\_\+device\+\_\+manager\+\_\+\+L\+C\+D\+\_\+setup}!skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}}
\subsubsection[{skn\+\_\+device\+\_\+manager\+\_\+\+L\+C\+D\+\_\+setup}]{\setlength{\rightskip}{0pt plus 5cm}int skn\+\_\+device\+\_\+manager\+\_\+\+L\+C\+D\+\_\+setup (
\begin{DoxyParamCaption}
\item[{{\bf P\+Display\+Manager}}]{pdm, }
\item[{char $\ast$}]{device\+\_\+name}
\end{DoxyParamCaption}
)}}\label{skn__rpi__helpers_8c_a58c9a50b0307d45138f4a6f2e6ba7a76}


Definition at line 234 of file skn\+\_\+rpi\+\_\+helpers.\+c.



References \+\_\+\+D\+I\+S\+P\+L\+A\+Y\+\_\+\+M\+A\+N\+A\+G\+E\+R\+::lcd\+\_\+handle, P\+L\+A\+T\+F\+O\+R\+M\+\_\+\+E\+R\+R\+O\+R, skn\+\_\+device\+\_\+manager\+\_\+\+M\+C\+P23008(), skn\+\_\+device\+\_\+manager\+\_\+\+M\+C\+P23017(), skn\+\_\+device\+\_\+manager\+\_\+\+P\+C\+F8574(), and skn\+\_\+device\+\_\+manager\+\_\+\+Serial\+Port().



Referenced by skn\+\_\+display\+\_\+manager\+\_\+do\+\_\+work().


\begin{DoxyCode}
234                                                                          \{
235     \hyperlink{struct___i_i_c_l_c_d}{PLCDDevice} rc = NULL;
236 
237     \textcolor{comment}{/*}
238 \textcolor{comment}{     * Initial I2C Services */}
239     wiringPiSetupSys();
240 
241     \textcolor{keywordflow}{if} (strcmp(device\_name, \textcolor{stringliteral}{"mcp"}) == 0) \{
242         rc = \hyperlink{skn__rpi__helpers_8c_a343fa5773d09ffd114adc3425f3c6bde}{skn\_device\_manager\_MCP23008}(pdm);
243     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (strcmp(device\_name, \textcolor{stringliteral}{"mc7"}) == 0) \{
244         rc = \hyperlink{skn__rpi__helpers_8c_aeeb817184dce0d96e05d4cdd6940db70}{skn\_device\_manager\_MCP23017}(pdm);
245     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (strcmp(device\_name, \textcolor{stringliteral}{"ser"}) == 0) \{
246         rc = \hyperlink{skn__rpi__helpers_8c_aa70aa8be6de3ef378d2d92839dae79c0}{skn\_device\_manager\_SerialPort}(pdm);
247     \} \textcolor{keywordflow}{else} \{ \textcolor{comment}{// PCF8574}
248         rc = \hyperlink{skn__rpi__helpers_8c_a9a6dccab4be976ca76eb960076dca0a0}{skn\_device\_manager\_PCF8574}(pdm);
249     \}
250 
251     \textcolor{keywordflow}{if} (rc == NULL) \{
252         \textcolor{keywordflow}{return} \hyperlink{cmd_d_c_8c_a12efd06fda89d6826f820e75148d8fd7}{PLATFORM\_ERROR};
253     \} \textcolor{keywordflow}{else} \{
254         \textcolor{keywordflow}{return} pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_a6ebc44b98c1483295586660829eb5a43}{lcd\_handle};
255     \}
256 \}
\end{DoxyCode}


Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{skn__rpi__helpers_8c_a58c9a50b0307d45138f4a6f2e6ba7a76_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{skn__rpi__helpers_8c_a58c9a50b0307d45138f4a6f2e6ba7a76_icgraph}
\end{center}
\end{figure}


\hypertarget{skn__rpi__helpers_8c_aad63cb41e99a588cea9609a100cc9333}{\index{skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}!skn\+\_\+device\+\_\+manager\+\_\+\+L\+C\+D\+\_\+shutdown@{skn\+\_\+device\+\_\+manager\+\_\+\+L\+C\+D\+\_\+shutdown}}
\index{skn\+\_\+device\+\_\+manager\+\_\+\+L\+C\+D\+\_\+shutdown@{skn\+\_\+device\+\_\+manager\+\_\+\+L\+C\+D\+\_\+shutdown}!skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}}
\subsubsection[{skn\+\_\+device\+\_\+manager\+\_\+\+L\+C\+D\+\_\+shutdown}]{\setlength{\rightskip}{0pt plus 5cm}int skn\+\_\+device\+\_\+manager\+\_\+\+L\+C\+D\+\_\+shutdown (
\begin{DoxyParamCaption}
\item[{{\bf P\+Display\+Manager}}]{pdm}
\end{DoxyParamCaption}
)}}\label{skn__rpi__helpers_8c_aad63cb41e99a588cea9609a100cc9333}


Definition at line 257 of file skn\+\_\+rpi\+\_\+helpers.\+c.



References \+\_\+\+I\+I\+C\+L\+C\+D\+::af\+\_\+backlight, \+\_\+\+I\+I\+C\+L\+C\+D\+::af\+\_\+blue, \+\_\+\+I\+I\+C\+L\+C\+D\+::af\+\_\+green, \+\_\+\+I\+I\+C\+L\+C\+D\+::af\+\_\+red, gd\+\_\+pch\+\_\+device\+\_\+name, \+\_\+\+D\+I\+S\+P\+L\+A\+Y\+\_\+\+M\+A\+N\+A\+G\+E\+R\+::lcd, \+\_\+\+D\+I\+S\+P\+L\+A\+Y\+\_\+\+M\+A\+N\+A\+G\+E\+R\+::lcd\+\_\+handle, and skn\+\_\+device\+\_\+manager\+\_\+backlight().



Referenced by skn\+\_\+display\+\_\+manager\+\_\+do\+\_\+work().


\begin{DoxyCode}
257                                                          \{
258     \textcolor{keywordflow}{if} (strcmp(\textcolor{stringliteral}{"ser"}, \hyperlink{skn__rpi__helpers_8c_a236d69bc821c60a396d02099e92d22bb}{gd\_pch\_device\_name}) == 0) \{
259         \textcolor{keywordtype}{char} display\_off[] = \{ 0xfe, 0x46 \};
260         \textcolor{keywordtype}{char} cls[]   = \{ 0xfe, 0x58 \};
261 
262         write(pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_a6ebc44b98c1483295586660829eb5a43}{lcd\_handle}, display\_off, \textcolor{keyword}{sizeof}(display\_off));
263             sleep(1);
264         write(pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_a6ebc44b98c1483295586660829eb5a43}{lcd\_handle}, cls, \textcolor{keyword}{sizeof}(cls));
265 
266         serialClose(pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_a6ebc44b98c1483295586660829eb5a43}{lcd\_handle});
267     \} \textcolor{keywordflow}{else} \{
268         lcdClear(pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_a6ebc44b98c1483295586660829eb5a43}{lcd\_handle});
269         \textcolor{keywordflow}{if} (strcmp(\hyperlink{skn__rpi__helpers_8c_a236d69bc821c60a396d02099e92d22bb}{gd\_pch\_device\_name}, \textcolor{stringliteral}{"mc7"}) == 0) \{
270             \hyperlink{skn__rpi__helpers_8c_a18bf9699f8b6ad05aff925d9deb31be1}{skn\_device\_manager\_backlight}(pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_a182e9fb6ca9f11b3e0a35628123d46f5}{lcd}.
      \hyperlink{struct___i_i_c_l_c_d_aca8ab39cfa9f683b2d03269886a0f633}{af\_red}, LOW);
271             \hyperlink{skn__rpi__helpers_8c_a18bf9699f8b6ad05aff925d9deb31be1}{skn\_device\_manager\_backlight}(pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_a182e9fb6ca9f11b3e0a35628123d46f5}{lcd}.
      \hyperlink{struct___i_i_c_l_c_d_a70176d63c9065d4186f55ae8328a82d3}{af\_green}, LOW);
272             \hyperlink{skn__rpi__helpers_8c_a18bf9699f8b6ad05aff925d9deb31be1}{skn\_device\_manager\_backlight}(pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_a182e9fb6ca9f11b3e0a35628123d46f5}{lcd}.
      \hyperlink{struct___i_i_c_l_c_d_ad64bc4c5fc6a592f161e594f0b2433e1}{af\_blue}, LOW);
273         \} \textcolor{keywordflow}{else} \{
274             \hyperlink{skn__rpi__helpers_8c_a18bf9699f8b6ad05aff925d9deb31be1}{skn\_device\_manager\_backlight}(pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_a182e9fb6ca9f11b3e0a35628123d46f5}{lcd}.
      \hyperlink{struct___i_i_c_l_c_d_ad160086a31276fbaf849855519b9878e}{af\_backlight}, LOW);
275         \}
276     \}
277     \textcolor{keywordflow}{return} EXIT\_SUCCESS;
278 \}
\end{DoxyCode}


Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=338pt]{skn__rpi__helpers_8c_aad63cb41e99a588cea9609a100cc9333_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{skn__rpi__helpers_8c_aad63cb41e99a588cea9609a100cc9333_icgraph}
\end{center}
\end{figure}


\hypertarget{skn__rpi__helpers_8c_a343fa5773d09ffd114adc3425f3c6bde}{\index{skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}!skn\+\_\+device\+\_\+manager\+\_\+\+M\+C\+P23008@{skn\+\_\+device\+\_\+manager\+\_\+\+M\+C\+P23008}}
\index{skn\+\_\+device\+\_\+manager\+\_\+\+M\+C\+P23008@{skn\+\_\+device\+\_\+manager\+\_\+\+M\+C\+P23008}!skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}}
\subsubsection[{skn\+\_\+device\+\_\+manager\+\_\+\+M\+C\+P23008}]{\setlength{\rightskip}{0pt plus 5cm}{\bf P\+L\+C\+D\+Device} skn\+\_\+device\+\_\+manager\+\_\+\+M\+C\+P23008 (
\begin{DoxyParamCaption}
\item[{{\bf P\+Display\+Manager}}]{pdm}
\end{DoxyParamCaption}
)}}\label{skn__rpi__helpers_8c_a343fa5773d09ffd114adc3425f3c6bde}


Definition at line 110 of file skn\+\_\+rpi\+\_\+helpers.\+c.



References \+\_\+\+I\+I\+C\+L\+C\+D\+::af\+\_\+backlight, \+\_\+\+I\+I\+C\+L\+C\+D\+::af\+\_\+base, \+\_\+\+I\+I\+C\+L\+C\+D\+::af\+\_\+db4, \+\_\+\+I\+I\+C\+L\+C\+D\+::af\+\_\+db5, \+\_\+\+I\+I\+C\+L\+C\+D\+::af\+\_\+db6, \+\_\+\+I\+I\+C\+L\+C\+D\+::af\+\_\+db7, \+\_\+\+I\+I\+C\+L\+C\+D\+::af\+\_\+e, \+\_\+\+I\+I\+C\+L\+C\+D\+::af\+\_\+rs, \+\_\+\+I\+I\+C\+L\+C\+D\+::af\+\_\+rw, \+\_\+\+I\+I\+C\+L\+C\+D\+::cb\+Name, gd\+\_\+i\+\_\+i2c\+\_\+address, \+\_\+\+I\+I\+C\+L\+C\+D\+::i2c\+\_\+address, \+\_\+\+D\+I\+S\+P\+L\+A\+Y\+\_\+\+M\+A\+N\+A\+G\+E\+R\+::lcd, S\+D\+\_\+\+E\+R\+R, S\+D\+\_\+\+N\+O\+T\+I\+C\+E, \+\_\+\+I\+I\+C\+L\+C\+D\+::setup, skn\+\_\+device\+\_\+manager\+\_\+init\+\_\+i2c(), and S\+Z\+\_\+\+C\+H\+A\+R\+\_\+\+B\+U\+F\+F.



Referenced by skn\+\_\+device\+\_\+manager\+\_\+\+L\+C\+D\+\_\+setup().


\begin{DoxyCode}
110                                                             \{
111     \hyperlink{struct___i_i_c_l_c_d}{PLCDDevice} plcd =  NULL;
112     \textcolor{keywordtype}{int} base = 0;
113 
114     \textcolor{keywordflow}{if} (pdm == NULL) \{
115         skn\_logger(\hyperlink{skn__common__headers_8h_a29cd8395c2db41768436986ab7a666b3}{SD\_ERR}, \textcolor{stringliteral}{"DeviceManager failed to acquire needed resources. %d:%s"}, errno, strerror
      (errno));
116         \textcolor{keywordflow}{return} NULL;
117     \}
118 
119     plcd = (\hyperlink{skn__common__headers_8h_a3d00a0f207e96ee5369c709b45d6a2e6}{PLCDDevice})&pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_a182e9fb6ca9f11b3e0a35628123d46f5}{lcd};
120     strncpy(plcd->\hyperlink{struct___i_i_c_l_c_d_a3f9347595482a6da5cb5d536d937a554}{cbName}, \textcolor{stringliteral}{"LCDDevice#MCP23008"}, \hyperlink{cmd_d_c_8c_a8d2978ad614b0de81c60483e706d9306}{SZ\_CHAR\_BUFF}-1);
121     \textcolor{keywordflow}{if} (\hyperlink{skn__network__helpers_8c_a2c55396bf337471f9f99a939974fcdbe}{gd\_i\_i2c\_address} != 0) \{
122         plcd->\hyperlink{struct___i_i_c_l_c_d_a3f3fe8757875939b987ac0c416081551}{i2c\_address} = \hyperlink{skn__network__helpers_8c_a2c55396bf337471f9f99a939974fcdbe}{gd\_i\_i2c\_address};
123     \} \textcolor{keywordflow}{else} \{
124         plcd->\hyperlink{struct___i_i_c_l_c_d_a3f3fe8757875939b987ac0c416081551}{i2c\_address} = 0x20;
125     \}
126 
127     skn\_logger(\hyperlink{skn__common__headers_8h_a4e0c16529642a911483bd7eaabefca4c}{SD\_NOTICE}, \textcolor{stringliteral}{"DeviceManager using device [%s](0x%02x)"}, plcd->
      \hyperlink{struct___i_i_c_l_c_d_a3f9347595482a6da5cb5d536d937a554}{cbName}, plcd->\hyperlink{struct___i_i_c_l_c_d_a3f3fe8757875939b987ac0c416081551}{i2c\_address});
128 
129     base = plcd->\hyperlink{struct___i_i_c_l_c_d_ae74954b1b96523d617a68e42c2663086}{af\_base} = 100;
130     plcd->\hyperlink{struct___i_i_c_l_c_d_ad160086a31276fbaf849855519b9878e}{af\_backlight} = base + 7;
131     plcd->\hyperlink{struct___i_i_c_l_c_d_a896f8305b5c0395ea7f9074904047b32}{af\_e} = base + 2;
132     plcd->\hyperlink{struct___i_i_c_l_c_d_af738bf1e020daaa5476b917c375e807a}{af\_rs} = base + 1;
133     plcd->\hyperlink{struct___i_i_c_l_c_d_ad0162f6a3e82c34192c0d901ef0ff6be}{af\_rw} = base + 0;
134 
135     plcd->\hyperlink{struct___i_i_c_l_c_d_adbfc88b661d5da527aad6f5bcd45a85c}{af\_db4} = base + 3;
136     plcd->\hyperlink{struct___i_i_c_l_c_d_a41c4536106493476b52c9a9df9dd8599}{af\_db5} = base + 4;
137     plcd->\hyperlink{struct___i_i_c_l_c_d_a0f3ebbe756ecf62494733287f64821f9}{af\_db6} = base + 5;
138     plcd->\hyperlink{struct___i_i_c_l_c_d_ae55385ca612fd157fb85e7b3d5423ee4}{af\_db7} = base + 6;
139 
140     plcd->\hyperlink{struct___i_i_c_l_c_d_a6bc8b9b3e5e69bfa25fdcd6b3c27628e}{setup} = &mcp23008Setup; \textcolor{comment}{//   mcp23008Setup(AF\_BASE, 0x20);}
141 
142     \textcolor{keywordflow}{return} \hyperlink{skn__rpi__helpers_8c_a6e967d6169dd92b30845335ab426c59b}{skn\_device\_manager\_init\_i2c}(pdm);
143 \}
\end{DoxyCode}


Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{skn__rpi__helpers_8c_a343fa5773d09ffd114adc3425f3c6bde_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{skn__rpi__helpers_8c_a343fa5773d09ffd114adc3425f3c6bde_icgraph}
\end{center}
\end{figure}


\hypertarget{skn__rpi__helpers_8c_aeeb817184dce0d96e05d4cdd6940db70}{\index{skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}!skn\+\_\+device\+\_\+manager\+\_\+\+M\+C\+P23017@{skn\+\_\+device\+\_\+manager\+\_\+\+M\+C\+P23017}}
\index{skn\+\_\+device\+\_\+manager\+\_\+\+M\+C\+P23017@{skn\+\_\+device\+\_\+manager\+\_\+\+M\+C\+P23017}!skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}}
\subsubsection[{skn\+\_\+device\+\_\+manager\+\_\+\+M\+C\+P23017}]{\setlength{\rightskip}{0pt plus 5cm}{\bf P\+L\+C\+D\+Device} skn\+\_\+device\+\_\+manager\+\_\+\+M\+C\+P23017 (
\begin{DoxyParamCaption}
\item[{{\bf P\+Display\+Manager}}]{pdm}
\end{DoxyParamCaption}
)}}\label{skn__rpi__helpers_8c_aeeb817184dce0d96e05d4cdd6940db70}


Definition at line 72 of file skn\+\_\+rpi\+\_\+helpers.\+c.



References \+\_\+\+I\+I\+C\+L\+C\+D\+::af\+\_\+backlight, \+\_\+\+I\+I\+C\+L\+C\+D\+::af\+\_\+base, \+\_\+\+I\+I\+C\+L\+C\+D\+::af\+\_\+blue, \+\_\+\+I\+I\+C\+L\+C\+D\+::af\+\_\+db4, \+\_\+\+I\+I\+C\+L\+C\+D\+::af\+\_\+db5, \+\_\+\+I\+I\+C\+L\+C\+D\+::af\+\_\+db6, \+\_\+\+I\+I\+C\+L\+C\+D\+::af\+\_\+db7, \+\_\+\+I\+I\+C\+L\+C\+D\+::af\+\_\+e, \+\_\+\+I\+I\+C\+L\+C\+D\+::af\+\_\+green, \+\_\+\+I\+I\+C\+L\+C\+D\+::af\+\_\+red, \+\_\+\+I\+I\+C\+L\+C\+D\+::af\+\_\+rs, \+\_\+\+I\+I\+C\+L\+C\+D\+::af\+\_\+rw, \+\_\+\+I\+I\+C\+L\+C\+D\+::cb\+Name, gd\+\_\+i\+\_\+i2c\+\_\+address, \+\_\+\+I\+I\+C\+L\+C\+D\+::i2c\+\_\+address, \+\_\+\+D\+I\+S\+P\+L\+A\+Y\+\_\+\+M\+A\+N\+A\+G\+E\+R\+::lcd, S\+D\+\_\+\+E\+R\+R, S\+D\+\_\+\+N\+O\+T\+I\+C\+E, \+\_\+\+I\+I\+C\+L\+C\+D\+::setup, skn\+\_\+device\+\_\+manager\+\_\+init\+\_\+i2c(), and S\+Z\+\_\+\+C\+H\+A\+R\+\_\+\+B\+U\+F\+F.



Referenced by skn\+\_\+device\+\_\+manager\+\_\+\+L\+C\+D\+\_\+setup().


\begin{DoxyCode}
72                                                             \{
73     \hyperlink{struct___i_i_c_l_c_d}{PLCDDevice} plcd =  NULL;
74     \textcolor{keywordtype}{int} base = 0;
75 
76     \textcolor{keywordflow}{if} (pdm == NULL) \{
77         skn\_logger(\hyperlink{skn__common__headers_8h_a29cd8395c2db41768436986ab7a666b3}{SD\_ERR}, \textcolor{stringliteral}{"DeviceManager failed to acquire needed resources. %d:%s"}, errno, strerror
      (errno));
78         \textcolor{keywordflow}{return} NULL;
79     \}
80 
81     plcd = (\hyperlink{skn__common__headers_8h_a3d00a0f207e96ee5369c709b45d6a2e6}{PLCDDevice})&pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_a182e9fb6ca9f11b3e0a35628123d46f5}{lcd};
82     strncpy(plcd->\hyperlink{struct___i_i_c_l_c_d_a3f9347595482a6da5cb5d536d937a554}{cbName}, \textcolor{stringliteral}{"LCDDevice#MCP23017"}, \hyperlink{cmd_d_c_8c_a8d2978ad614b0de81c60483e706d9306}{SZ\_CHAR\_BUFF}-1);
83     \textcolor{keywordflow}{if} (\hyperlink{skn__network__helpers_8c_a2c55396bf337471f9f99a939974fcdbe}{gd\_i\_i2c\_address} != 0) \{
84         plcd->\hyperlink{struct___i_i_c_l_c_d_a3f3fe8757875939b987ac0c416081551}{i2c\_address} = \hyperlink{skn__network__helpers_8c_a2c55396bf337471f9f99a939974fcdbe}{gd\_i\_i2c\_address};
85     \} \textcolor{keywordflow}{else} \{
86         plcd->\hyperlink{struct___i_i_c_l_c_d_a3f3fe8757875939b987ac0c416081551}{i2c\_address} = 0x20;
87     \}
88 
89     skn\_logger(\hyperlink{skn__common__headers_8h_a4e0c16529642a911483bd7eaabefca4c}{SD\_NOTICE}, \textcolor{stringliteral}{"DeviceManager using device [%s](0x%02x)"}, plcd->
      \hyperlink{struct___i_i_c_l_c_d_a3f9347595482a6da5cb5d536d937a554}{cbName}, plcd->\hyperlink{struct___i_i_c_l_c_d_a3f3fe8757875939b987ac0c416081551}{i2c\_address});
90 
91     base = plcd->\hyperlink{struct___i_i_c_l_c_d_ae74954b1b96523d617a68e42c2663086}{af\_base} = 100;
92     plcd->\hyperlink{struct___i_i_c_l_c_d_ad160086a31276fbaf849855519b9878e}{af\_backlight} = base + 8;
93     plcd->\hyperlink{struct___i_i_c_l_c_d_aca8ab39cfa9f683b2d03269886a0f633}{af\_red} = base + 6;
94     plcd->\hyperlink{struct___i_i_c_l_c_d_a70176d63c9065d4186f55ae8328a82d3}{af\_green} = base + 7;
95     plcd->\hyperlink{struct___i_i_c_l_c_d_ad64bc4c5fc6a592f161e594f0b2433e1}{af\_blue} = base + 8;
96 
97     plcd->\hyperlink{struct___i_i_c_l_c_d_a896f8305b5c0395ea7f9074904047b32}{af\_e}  = base + 13;
98     plcd->\hyperlink{struct___i_i_c_l_c_d_af738bf1e020daaa5476b917c375e807a}{af\_rs} = base + 15;
99     plcd->\hyperlink{struct___i_i_c_l_c_d_ad0162f6a3e82c34192c0d901ef0ff6be}{af\_rw} = base + 14;
100 
101     plcd->\hyperlink{struct___i_i_c_l_c_d_adbfc88b661d5da527aad6f5bcd45a85c}{af\_db4} = base + 12;
102     plcd->\hyperlink{struct___i_i_c_l_c_d_a41c4536106493476b52c9a9df9dd8599}{af\_db5} = base + 11;
103     plcd->\hyperlink{struct___i_i_c_l_c_d_a0f3ebbe756ecf62494733287f64821f9}{af\_db6} = base + 10;
104     plcd->\hyperlink{struct___i_i_c_l_c_d_ae55385ca612fd157fb85e7b3d5423ee4}{af\_db7} = base + 9;
105 
106     plcd->\hyperlink{struct___i_i_c_l_c_d_a6bc8b9b3e5e69bfa25fdcd6b3c27628e}{setup} = &mcp23017Setup; \textcolor{comment}{//   mcp23017Setup(AF\_BASE, 0x20);}
107 
108     \textcolor{keywordflow}{return} \hyperlink{skn__rpi__helpers_8c_a6e967d6169dd92b30845335ab426c59b}{skn\_device\_manager\_init\_i2c}(pdm);
109 \}
\end{DoxyCode}


Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{skn__rpi__helpers_8c_aeeb817184dce0d96e05d4cdd6940db70_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{skn__rpi__helpers_8c_aeeb817184dce0d96e05d4cdd6940db70_icgraph}
\end{center}
\end{figure}


\hypertarget{skn__rpi__helpers_8c_a9a6dccab4be976ca76eb960076dca0a0}{\index{skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}!skn\+\_\+device\+\_\+manager\+\_\+\+P\+C\+F8574@{skn\+\_\+device\+\_\+manager\+\_\+\+P\+C\+F8574}}
\index{skn\+\_\+device\+\_\+manager\+\_\+\+P\+C\+F8574@{skn\+\_\+device\+\_\+manager\+\_\+\+P\+C\+F8574}!skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}}
\subsubsection[{skn\+\_\+device\+\_\+manager\+\_\+\+P\+C\+F8574}]{\setlength{\rightskip}{0pt plus 5cm}{\bf P\+L\+C\+D\+Device} skn\+\_\+device\+\_\+manager\+\_\+\+P\+C\+F8574 (
\begin{DoxyParamCaption}
\item[{{\bf P\+Display\+Manager}}]{pdm}
\end{DoxyParamCaption}
)}}\label{skn__rpi__helpers_8c_a9a6dccab4be976ca76eb960076dca0a0}


Definition at line 145 of file skn\+\_\+rpi\+\_\+helpers.\+c.



References \+\_\+\+I\+I\+C\+L\+C\+D\+::af\+\_\+backlight, \+\_\+\+I\+I\+C\+L\+C\+D\+::af\+\_\+base, \+\_\+\+I\+I\+C\+L\+C\+D\+::af\+\_\+db4, \+\_\+\+I\+I\+C\+L\+C\+D\+::af\+\_\+db5, \+\_\+\+I\+I\+C\+L\+C\+D\+::af\+\_\+db6, \+\_\+\+I\+I\+C\+L\+C\+D\+::af\+\_\+db7, \+\_\+\+I\+I\+C\+L\+C\+D\+::af\+\_\+e, \+\_\+\+I\+I\+C\+L\+C\+D\+::af\+\_\+rs, \+\_\+\+I\+I\+C\+L\+C\+D\+::af\+\_\+rw, \+\_\+\+I\+I\+C\+L\+C\+D\+::cb\+Name, gd\+\_\+i\+\_\+i2c\+\_\+address, \+\_\+\+I\+I\+C\+L\+C\+D\+::i2c\+\_\+address, \+\_\+\+D\+I\+S\+P\+L\+A\+Y\+\_\+\+M\+A\+N\+A\+G\+E\+R\+::lcd, S\+D\+\_\+\+E\+R\+R, S\+D\+\_\+\+N\+O\+T\+I\+C\+E, \+\_\+\+I\+I\+C\+L\+C\+D\+::setup, skn\+\_\+device\+\_\+manager\+\_\+init\+\_\+i2c(), and S\+Z\+\_\+\+C\+H\+A\+R\+\_\+\+B\+U\+F\+F.



Referenced by skn\+\_\+device\+\_\+manager\+\_\+\+L\+C\+D\+\_\+setup().


\begin{DoxyCode}
145                                                            \{
146     \hyperlink{struct___i_i_c_l_c_d}{PLCDDevice} plcd =  NULL;
147     \textcolor{keywordtype}{int} base = 0;
148 
149     \textcolor{keywordflow}{if} (pdm == NULL) \{
150         skn\_logger(\hyperlink{skn__common__headers_8h_a29cd8395c2db41768436986ab7a666b3}{SD\_ERR}, \textcolor{stringliteral}{"DeviceManager failed to acquire needed resources. %d:%s"}, errno, strerror
      (errno));
151         \textcolor{keywordflow}{return} NULL;
152     \}
153 
154     plcd = (\hyperlink{skn__common__headers_8h_a3d00a0f207e96ee5369c709b45d6a2e6}{PLCDDevice})&pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_a182e9fb6ca9f11b3e0a35628123d46f5}{lcd};
155     memset(plcd, 0, \textcolor{keyword}{sizeof}(\hyperlink{struct___i_i_c_l_c_d}{LCDDevice}));
156     strncpy(plcd->\hyperlink{struct___i_i_c_l_c_d_a3f9347595482a6da5cb5d536d937a554}{cbName}, \textcolor{stringliteral}{"LCDDevice#PCF8574"}, \hyperlink{cmd_d_c_8c_a8d2978ad614b0de81c60483e706d9306}{SZ\_CHAR\_BUFF}-1);
157     \textcolor{keywordflow}{if} (\hyperlink{skn__network__helpers_8c_a2c55396bf337471f9f99a939974fcdbe}{gd\_i\_i2c\_address} != 0) \{
158         plcd->\hyperlink{struct___i_i_c_l_c_d_a3f3fe8757875939b987ac0c416081551}{i2c\_address} = \hyperlink{skn__network__helpers_8c_a2c55396bf337471f9f99a939974fcdbe}{gd\_i\_i2c\_address};
159     \} \textcolor{keywordflow}{else} \{
160         plcd->\hyperlink{struct___i_i_c_l_c_d_a3f3fe8757875939b987ac0c416081551}{i2c\_address} = 0x27;
161     \}
162 
163     skn\_logger(\hyperlink{skn__common__headers_8h_a4e0c16529642a911483bd7eaabefca4c}{SD\_NOTICE}, \textcolor{stringliteral}{"DeviceManager using device [%s](0x%02x)"}, plcd->
      \hyperlink{struct___i_i_c_l_c_d_a3f9347595482a6da5cb5d536d937a554}{cbName}, plcd->\hyperlink{struct___i_i_c_l_c_d_a3f3fe8757875939b987ac0c416081551}{i2c\_address});
164 
165     base = plcd->\hyperlink{struct___i_i_c_l_c_d_ae74954b1b96523d617a68e42c2663086}{af\_base} = 100;
166     plcd->\hyperlink{struct___i_i_c_l_c_d_ad160086a31276fbaf849855519b9878e}{af\_backlight} = base + 3;
167     plcd->\hyperlink{struct___i_i_c_l_c_d_a896f8305b5c0395ea7f9074904047b32}{af\_e} = base + 2;
168     plcd->\hyperlink{struct___i_i_c_l_c_d_af738bf1e020daaa5476b917c375e807a}{af\_rs} = base + 0;
169     plcd->\hyperlink{struct___i_i_c_l_c_d_ad0162f6a3e82c34192c0d901ef0ff6be}{af\_rw} = base + 1;
170 
171     plcd->\hyperlink{struct___i_i_c_l_c_d_adbfc88b661d5da527aad6f5bcd45a85c}{af\_db4} = base + 4;
172     plcd->\hyperlink{struct___i_i_c_l_c_d_a41c4536106493476b52c9a9df9dd8599}{af\_db5} = base + 5;
173     plcd->\hyperlink{struct___i_i_c_l_c_d_a0f3ebbe756ecf62494733287f64821f9}{af\_db6} = base + 6;
174     plcd->\hyperlink{struct___i_i_c_l_c_d_ae55385ca612fd157fb85e7b3d5423ee4}{af\_db7} = base + 7;
175 
176 
177     plcd->\hyperlink{struct___i_i_c_l_c_d_a6bc8b9b3e5e69bfa25fdcd6b3c27628e}{setup} = &pcf8574Setup; \textcolor{comment}{// pcf8574Setup(AF\_BASE, 0x27);}
178 
179     \textcolor{keywordflow}{return} \hyperlink{skn__rpi__helpers_8c_a6e967d6169dd92b30845335ab426c59b}{skn\_device\_manager\_init\_i2c}(pdm);
180 \}
\end{DoxyCode}


Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{skn__rpi__helpers_8c_a9a6dccab4be976ca76eb960076dca0a0_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{skn__rpi__helpers_8c_a9a6dccab4be976ca76eb960076dca0a0_icgraph}
\end{center}
\end{figure}


\hypertarget{skn__rpi__helpers_8c_aa70aa8be6de3ef378d2d92839dae79c0}{\index{skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}!skn\+\_\+device\+\_\+manager\+\_\+\+Serial\+Port@{skn\+\_\+device\+\_\+manager\+\_\+\+Serial\+Port}}
\index{skn\+\_\+device\+\_\+manager\+\_\+\+Serial\+Port@{skn\+\_\+device\+\_\+manager\+\_\+\+Serial\+Port}!skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}}
\subsubsection[{skn\+\_\+device\+\_\+manager\+\_\+\+Serial\+Port}]{\setlength{\rightskip}{0pt plus 5cm}{\bf P\+L\+C\+D\+Device} skn\+\_\+device\+\_\+manager\+\_\+\+Serial\+Port (
\begin{DoxyParamCaption}
\item[{{\bf P\+Display\+Manager}}]{pdm}
\end{DoxyParamCaption}
)}}\label{skn__rpi__helpers_8c_aa70aa8be6de3ef378d2d92839dae79c0}


Definition at line 26 of file skn\+\_\+rpi\+\_\+helpers.\+c.



References \+\_\+\+I\+I\+C\+L\+C\+D\+::cb\+Name, \+\_\+\+I\+I\+C\+L\+C\+D\+::ch\+\_\+serial\+\_\+port\+\_\+name, gd\+\_\+pch\+\_\+serial\+\_\+port, \+\_\+\+D\+I\+S\+P\+L\+A\+Y\+\_\+\+M\+A\+N\+A\+G\+E\+R\+::lcd, \+\_\+\+I\+I\+C\+L\+C\+D\+::lcd\+\_\+handle, \+\_\+\+D\+I\+S\+P\+L\+A\+Y\+\_\+\+M\+A\+N\+A\+G\+E\+R\+::lcd\+\_\+handle, P\+L\+A\+T\+F\+O\+R\+M\+\_\+\+E\+R\+R\+O\+R, S\+D\+\_\+\+E\+R\+R, S\+D\+\_\+\+N\+O\+T\+I\+C\+E, and S\+Z\+\_\+\+C\+H\+A\+R\+\_\+\+B\+U\+F\+F.



Referenced by skn\+\_\+device\+\_\+manager\+\_\+\+L\+C\+D\+\_\+setup().


\begin{DoxyCode}
26                                                               \{
27     \hyperlink{struct___i_i_c_l_c_d}{PLCDDevice} plcd =  NULL;
28 
29     \textcolor{keywordflow}{if} (pdm == NULL) \{
30         skn\_logger(\hyperlink{skn__common__headers_8h_a29cd8395c2db41768436986ab7a666b3}{SD\_ERR}, \textcolor{stringliteral}{"DeviceManager failed to acquire needed resources. %d:%s"}, errno, strerror
      (errno));
31         \textcolor{keywordflow}{return} NULL;
32     \}
33 
34     plcd = (\hyperlink{skn__common__headers_8h_a3d00a0f207e96ee5369c709b45d6a2e6}{PLCDDevice})&pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_a182e9fb6ca9f11b3e0a35628123d46f5}{lcd};
35     strncpy(plcd->\hyperlink{struct___i_i_c_l_c_d_a3f9347595482a6da5cb5d536d937a554}{cbName}, \textcolor{stringliteral}{"LCDDevice#SerialPort"}, \hyperlink{cmd_d_c_8c_a8d2978ad614b0de81c60483e706d9306}{SZ\_CHAR\_BUFF}-1);
36     \textcolor{keywordflow}{if} (\hyperlink{skn__rpi__helpers_8c_aa8460852bd6c3559cc5ad4bd58806ba2}{gd\_pch\_serial\_port} != NULL) \{
37         strncpy(plcd->\hyperlink{struct___i_i_c_l_c_d_a2f193b0806fdbba1d644567835e2b2e8}{ch\_serial\_port\_name}, \hyperlink{skn__rpi__helpers_8c_aa8460852bd6c3559cc5ad4bd58806ba2}{gd\_pch\_serial\_port}, 
      \hyperlink{cmd_d_c_8c_a8d2978ad614b0de81c60483e706d9306}{SZ\_CHAR\_BUFF}-1);
38     \} \textcolor{keywordflow}{else} \{
39         strncpy(plcd->\hyperlink{struct___i_i_c_l_c_d_a2f193b0806fdbba1d644567835e2b2e8}{ch\_serial\_port\_name}, \textcolor{stringliteral}{"/dev/ttyACM0"}, 
      \hyperlink{cmd_d_c_8c_a8d2978ad614b0de81c60483e706d9306}{SZ\_CHAR\_BUFF}-1);
40     \}
41 
42     skn\_logger(\hyperlink{skn__common__headers_8h_a4e0c16529642a911483bd7eaabefca4c}{SD\_NOTICE}, \textcolor{stringliteral}{"DeviceManager using  device [%s](%s)"}, plcd->
      \hyperlink{struct___i_i_c_l_c_d_a3f9347595482a6da5cb5d536d937a554}{cbName}, \hyperlink{skn__rpi__helpers_8c_aa8460852bd6c3559cc5ad4bd58806ba2}{gd\_pch\_serial\_port});
43 
44     pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_a6ebc44b98c1483295586660829eb5a43}{lcd\_handle} = plcd->\hyperlink{struct___i_i_c_l_c_d_afc74b2d9120be4a8e69e48b220d6781c}{lcd\_handle} =  serialOpen (plcd->
      \hyperlink{struct___i_i_c_l_c_d_a2f193b0806fdbba1d644567835e2b2e8}{ch\_serial\_port\_name}, 9600);
45     \textcolor{keywordflow}{if} (plcd->\hyperlink{struct___i_i_c_l_c_d_afc74b2d9120be4a8e69e48b220d6781c}{lcd\_handle} == \hyperlink{cmd_d_c_8c_a12efd06fda89d6826f820e75148d8fd7}{PLATFORM\_ERROR}) \{
46         skn\_logger(\hyperlink{skn__common__headers_8h_a29cd8395c2db41768436986ab7a666b3}{SD\_ERR}, \textcolor{stringliteral}{"DeviceManager failed to acquire needed resources: SerialPort=%s %d:%s"},
47                    plcd->\hyperlink{struct___i_i_c_l_c_d_a2f193b0806fdbba1d644567835e2b2e8}{ch\_serial\_port\_name}, errno, strerror(errno));
48         \textcolor{keywordflow}{return} NULL;
49     \}
50 
51     \textcolor{comment}{// set backlight & clear screen}
52     \textcolor{keywordtype}{char} display\_on[] = \{ 0xfe, 0x42 \};
53     \textcolor{keywordtype}{char}  cls[]   = \{ 0xfe, 0x58 \};
54     \textcolor{keywordtype}{char} home[]  = \{ 0xfe, 0x48 \};
55 \textcolor{comment}{//    char set\_cols\_rows[] = \{0xfe, 0xd1, gd\_i\_cols, gd\_i\_rows \};}
56     \textcolor{keywordtype}{char} set\_contrast[] = \{0xfe, 0x50, 0xdc\};
57     \textcolor{keywordtype}{char} cursor\_off[] = \{0xfe, 0x4B \};
58 
59     write(pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_a6ebc44b98c1483295586660829eb5a43}{lcd\_handle}, set\_contrast, \textcolor{keyword}{sizeof}(set\_contrast));
60         sleep(1);
61     write(pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_a6ebc44b98c1483295586660829eb5a43}{lcd\_handle}, home, \textcolor{keyword}{sizeof}(home));
62         sleep(1);
63     write(pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_a6ebc44b98c1483295586660829eb5a43}{lcd\_handle}, cursor\_off, \textcolor{keyword}{sizeof}(cursor\_off));
64         sleep(1);
65     write(pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_a6ebc44b98c1483295586660829eb5a43}{lcd\_handle}, cls, \textcolor{keyword}{sizeof}(cls));
66         sleep(1);
67     write(pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_a6ebc44b98c1483295586660829eb5a43}{lcd\_handle}, display\_on, \textcolor{keyword}{sizeof}(display\_on));
68         sleep(1);
69 
70     \textcolor{keywordflow}{return} plcd;
71 \}
\end{DoxyCode}


Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{skn__rpi__helpers_8c_aa70aa8be6de3ef378d2d92839dae79c0_icgraph}
\end{center}
\end{figure}


\hypertarget{skn__rpi__helpers_8c_a73890d642bf9cbb1de78675d587d79a3}{\index{skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}!skn\+\_\+display\+\_\+manager\+\_\+add\+\_\+line@{skn\+\_\+display\+\_\+manager\+\_\+add\+\_\+line}}
\index{skn\+\_\+display\+\_\+manager\+\_\+add\+\_\+line@{skn\+\_\+display\+\_\+manager\+\_\+add\+\_\+line}!skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}}
\subsubsection[{skn\+\_\+display\+\_\+manager\+\_\+add\+\_\+line}]{\setlength{\rightskip}{0pt plus 5cm}{\bf P\+Display\+Line} skn\+\_\+display\+\_\+manager\+\_\+add\+\_\+line (
\begin{DoxyParamCaption}
\item[{{\bf P\+Display\+Manager}}]{pdmx, }
\item[{char $\ast$}]{client\+\_\+request\+\_\+message}
\end{DoxyParamCaption}
)}}\label{skn__rpi__helpers_8c_a73890d642bf9cbb1de78675d587d79a3}


Definition at line 483 of file skn\+\_\+rpi\+\_\+helpers.\+c.



References \+\_\+\+D\+I\+S\+P\+L\+A\+Y\+\_\+\+L\+I\+N\+E\+::active, A\+R\+Y\+\_\+\+M\+A\+X\+\_\+\+D\+M\+\_\+\+L\+I\+N\+E\+S, \+\_\+\+D\+I\+S\+P\+L\+A\+Y\+\_\+\+L\+I\+N\+E\+::ch\+\_\+display\+\_\+msg, \+\_\+\+D\+I\+S\+P\+L\+A\+Y\+\_\+\+M\+A\+N\+A\+G\+E\+R\+::current\+\_\+line, \+\_\+\+D\+I\+S\+P\+L\+A\+Y\+\_\+\+L\+I\+N\+E\+::display\+\_\+pos, gd\+\_\+i\+\_\+cols, \+\_\+\+D\+I\+S\+P\+L\+A\+Y\+\_\+\+L\+I\+N\+E\+::msg\+\_\+len, \+\_\+\+D\+I\+S\+P\+L\+A\+Y\+\_\+\+M\+A\+N\+A\+G\+E\+R\+::next\+\_\+line, \+\_\+\+D\+I\+S\+P\+L\+A\+Y\+\_\+\+M\+A\+N\+A\+G\+E\+R\+::pdsp\+\_\+collection, \+\_\+\+D\+I\+S\+P\+L\+A\+Y\+\_\+\+L\+I\+N\+E\+::scroll\+\_\+enabled, S\+D\+\_\+\+D\+E\+B\+U\+G, skn\+\_\+get\+\_\+display\+\_\+manager\+\_\+ref(), skn\+\_\+scroller\+\_\+wrap\+\_\+blanks(), and S\+Z\+\_\+\+I\+N\+F\+O\+\_\+\+B\+U\+F\+F.



Referenced by skn\+\_\+display\+\_\+manager\+\_\+do\+\_\+work(), and skn\+\_\+display\+\_\+manager\+\_\+message\+\_\+consumer\+\_\+thread().


\begin{DoxyCode}
483                                                                                                \{
484     \hyperlink{struct___d_i_s_p_l_a_y___l_i_n_e}{PDisplayLine} pdl = NULL;
485     \hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r}{PDisplayManager} pdm = NULL;
486 
487     pdm = ((pdmx == NULL) ? \hyperlink{skn__rpi__helpers_8c_abc8758d786bdcff4bb0ec7ab05adfca1}{skn\_get\_display\_manager\_ref}() : pdmx);
488     \textcolor{keywordflow}{if} (pdm == NULL || client\_request\_message == NULL) \{
489         \textcolor{keywordflow}{return} NULL;
490     \}
491 
492     \textcolor{comment}{/*}
493 \textcolor{comment}{     * manage next index */}
494     pdl = pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_a3a5ccb906320bd6aecbf89cb6b0fc234}{pdsp\_collection}[pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_aed299ac3603bba3dfe3c09389122f8d8}{next\_line}++]; \textcolor{comment}{// manage next index}
495     \textcolor{keywordflow}{if} (pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_aed299ac3603bba3dfe3c09389122f8d8}{next\_line} == \hyperlink{skn__common__headers_8h_a199b80b777af46c9141191749f8f026d}{ARY\_MAX\_DM\_LINES}) \{
496         pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_aed299ac3603bba3dfe3c09389122f8d8}{next\_line} = 0; \textcolor{comment}{// roll it}
497     \}
498 
499     \textcolor{comment}{/*}
500 \textcolor{comment}{     * load new message */}
501     strncpy(pdl->\hyperlink{struct___d_i_s_p_l_a_y___l_i_n_e_ae5fae9b599281d1d3f619b6e402e7c2c}{ch\_display\_msg}, client\_request\_message, (
      \hyperlink{cmd_d_c_8c_a442d5e93bd9c9d8eb4532aba62b5f86c}{SZ\_INFO\_BUFF}-1));
502     pdl->\hyperlink{struct___d_i_s_p_l_a_y___l_i_n_e_ae5fae9b599281d1d3f619b6e402e7c2c}{ch\_display\_msg}[\hyperlink{cmd_d_c_8c_a442d5e93bd9c9d8eb4532aba62b5f86c}{SZ\_INFO\_BUFF} - 1] = 0;    \textcolor{comment}{// terminate string in case}
503     pdl->\hyperlink{struct___d_i_s_p_l_a_y___l_i_n_e_aa9cfa1dd3e90386f675fef61e711342e}{msg\_len} = strlen(pdl->\hyperlink{struct___d_i_s_p_l_a_y___l_i_n_e_ae5fae9b599281d1d3f619b6e402e7c2c}{ch\_display\_msg});
504     pdl->\hyperlink{struct___d_i_s_p_l_a_y___l_i_n_e_acf235d7965b9d52439add787b8e3d316}{active} = 1;
505     pdl->\hyperlink{struct___d_i_s_p_l_a_y___l_i_n_e_af32b1aa2ce817c27695d7cd43db9364d}{display\_pos} = 0;
506     \textcolor{keywordflow}{if} (pdl->\hyperlink{struct___d_i_s_p_l_a_y___l_i_n_e_aa9cfa1dd3e90386f675fef61e711342e}{msg\_len} > \hyperlink{skn__rpi__helpers_8c_ac934aabd8dd134e724c62e1264afa549}{gd\_i\_cols}) \{
507         pdl->\hyperlink{struct___d_i_s_p_l_a_y___l_i_n_e_ad92346a9708f3f3ba0c45dfb891c18e3}{scroll\_enabled} = 1;
508         \hyperlink{skn__rpi__helpers_8c_ae945b3a41d43db4d0c52f522d663d415}{skn\_scroller\_wrap\_blanks}(pdl->\hyperlink{struct___d_i_s_p_l_a_y___l_i_n_e_ae5fae9b599281d1d3f619b6e402e7c2c}{ch\_display\_msg});
509         pdl->\hyperlink{struct___d_i_s_p_l_a_y___l_i_n_e_ae5fae9b599281d1d3f619b6e402e7c2c}{ch\_display\_msg}[(\hyperlink{cmd_d_c_8c_a442d5e93bd9c9d8eb4532aba62b5f86c}{SZ\_INFO\_BUFF} - 1)] = 0;    \textcolor{comment}{// terminate string in
       case}
510         pdl->\hyperlink{struct___d_i_s_p_l_a_y___l_i_n_e_aa9cfa1dd3e90386f675fef61e711342e}{msg\_len} = strlen(pdl->\hyperlink{struct___d_i_s_p_l_a_y___l_i_n_e_ae5fae9b599281d1d3f619b6e402e7c2c}{ch\_display\_msg});
511     \} \textcolor{keywordflow}{else} \{
512         pdl->\hyperlink{struct___d_i_s_p_l_a_y___l_i_n_e_ad92346a9708f3f3ba0c45dfb891c18e3}{scroll\_enabled} = 0;
513     \}
514 
515     \textcolor{comment}{/*}
516 \textcolor{comment}{     * manage current\_line */}
517     pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_a3a5ccb906320bd6aecbf89cb6b0fc234}{pdsp\_collection}[pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_aae8a6a90422fd9f571dff5f455740aa4}{current\_line}]->\hyperlink{struct___d_i_s_p_l_a_y___l_i_n_e_acf235d7965b9d52439add787b8e3d316}{active} = 0;
518     pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_a3a5ccb906320bd6aecbf89cb6b0fc234}{pdsp\_collection}[pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_aae8a6a90422fd9f571dff5f455740aa4}{current\_line}++]->
      \hyperlink{struct___d_i_s_p_l_a_y___l_i_n_e_aa9cfa1dd3e90386f675fef61e711342e}{msg\_len} = 0;
519     \textcolor{keywordflow}{if} (pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_aae8a6a90422fd9f571dff5f455740aa4}{current\_line} == \hyperlink{skn__common__headers_8h_a199b80b777af46c9141191749f8f026d}{ARY\_MAX\_DM\_LINES}) \{
520         pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_aae8a6a90422fd9f571dff5f455740aa4}{current\_line} = 0;
521     \}
522 
523     skn\_logger(\hyperlink{skn__common__headers_8h_a3ace3381f5b69f4a46fc35b70844a5dc}{SD\_DEBUG}, \textcolor{stringliteral}{"DM Added msg=%d:%d:[%s]"}, ((pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_aed299ac3603bba3dfe3c09389122f8d8}{next\_line} - 1) < 0 ? 0 : (pdm->
      \hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_aed299ac3603bba3dfe3c09389122f8d8}{next\_line} - 1)), pdl->\hyperlink{struct___d_i_s_p_l_a_y___l_i_n_e_aa9cfa1dd3e90386f675fef61e711342e}{msg\_len}, pdl->\hyperlink{struct___d_i_s_p_l_a_y___l_i_n_e_ae5fae9b599281d1d3f619b6e402e7c2c}{ch\_display\_msg});
524 
525     \textcolor{comment}{/* return this line's pointer */}
526     \textcolor{keywordflow}{return} pdl;
527 \}
\end{DoxyCode}


Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{skn__rpi__helpers_8c_a73890d642bf9cbb1de78675d587d79a3_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{skn__rpi__helpers_8c_a73890d642bf9cbb1de78675d587d79a3_icgraph}
\end{center}
\end{figure}


\hypertarget{skn__rpi__helpers_8c_a3b806c833fce33e93ad36909a2561353}{\index{skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}!skn\+\_\+display\+\_\+manager\+\_\+create@{skn\+\_\+display\+\_\+manager\+\_\+create}}
\index{skn\+\_\+display\+\_\+manager\+\_\+create@{skn\+\_\+display\+\_\+manager\+\_\+create}!skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}}
\subsubsection[{skn\+\_\+display\+\_\+manager\+\_\+create}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf P\+Display\+Manager} skn\+\_\+display\+\_\+manager\+\_\+create (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{welcome}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{skn__rpi__helpers_8c_a3b806c833fce33e93ad36909a2561353}
skn\+\_\+display\+\_\+manager\+\_\+select\+\_\+set
\begin{DoxyItemize}
\item adds newest to top of double-\/linked-\/list
\item only keeps 8 in collections
\item reuses in top down fashion 
\end{DoxyItemize}

Definition at line 439 of file skn\+\_\+rpi\+\_\+helpers.\+c.



References \+\_\+\+D\+I\+S\+P\+L\+A\+Y\+\_\+\+L\+I\+N\+E\+::active, A\+R\+Y\+\_\+\+M\+A\+X\+\_\+\+D\+M\+\_\+\+L\+I\+N\+E\+S, \+\_\+\+D\+I\+S\+P\+L\+A\+Y\+\_\+\+L\+I\+N\+E\+::cb\+Name, \+\_\+\+D\+I\+S\+P\+L\+A\+Y\+\_\+\+M\+A\+N\+A\+G\+E\+R\+::cb\+Name, \+\_\+\+D\+I\+S\+P\+L\+A\+Y\+\_\+\+L\+I\+N\+E\+::ch\+\_\+display\+\_\+msg, \+\_\+\+D\+I\+S\+P\+L\+A\+Y\+\_\+\+M\+A\+N\+A\+G\+E\+R\+::ch\+\_\+welcome\+\_\+msg, \+\_\+\+D\+I\+S\+P\+L\+A\+Y\+\_\+\+M\+A\+N\+A\+G\+E\+R\+::current\+\_\+line, \+\_\+\+D\+I\+S\+P\+L\+A\+Y\+\_\+\+M\+A\+N\+A\+G\+E\+R\+::dsp\+\_\+cols, \+\_\+\+D\+I\+S\+P\+L\+A\+Y\+\_\+\+M\+A\+N\+A\+G\+E\+R\+::dsp\+\_\+rows, gd\+\_\+i\+\_\+cols, gd\+\_\+i\+\_\+rows, \+\_\+\+D\+I\+S\+P\+L\+A\+Y\+\_\+\+L\+I\+N\+E\+::msg\+\_\+len, \+\_\+\+D\+I\+S\+P\+L\+A\+Y\+\_\+\+M\+A\+N\+A\+G\+E\+R\+::msg\+\_\+len, \+\_\+\+D\+I\+S\+P\+L\+A\+Y\+\_\+\+L\+I\+N\+E\+::next, \+\_\+\+D\+I\+S\+P\+L\+A\+Y\+\_\+\+M\+A\+N\+A\+G\+E\+R\+::next\+\_\+line, \+\_\+\+D\+I\+S\+P\+L\+A\+Y\+\_\+\+M\+A\+N\+A\+G\+E\+R\+::pdsp\+\_\+collection, \+\_\+\+D\+I\+S\+P\+L\+A\+Y\+\_\+\+L\+I\+N\+E\+::prev, \+\_\+\+D\+I\+S\+P\+L\+A\+Y\+\_\+\+L\+I\+N\+E\+::scroll\+\_\+enabled, S\+D\+\_\+\+E\+R\+R, skn\+\_\+scroller\+\_\+wrap\+\_\+blanks(), and S\+Z\+\_\+\+I\+N\+F\+O\+\_\+\+B\+U\+F\+F.



Referenced by skn\+\_\+display\+\_\+manager\+\_\+do\+\_\+work().


\begin{DoxyCode}
439                                                                   \{
440     \textcolor{keywordtype}{int} index = 0, next = 0, prev = 0;
441     \hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r}{PDisplayManager} pdm = NULL;
442     \hyperlink{struct___d_i_s_p_l_a_y___l_i_n_e}{PDisplayLine} pdl = NULL;
443 
444     pdm = (\hyperlink{skn__common__headers_8h_a9e176eedaf378010a6a48e6a242fc6a0}{PDisplayManager}) malloc(\textcolor{keyword}{sizeof}(\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r}{DisplayManager}));
445     \textcolor{keywordflow}{if} (pdm == NULL) \{
446         skn\_logger(\hyperlink{skn__common__headers_8h_a29cd8395c2db41768436986ab7a666b3}{SD\_ERR}, \textcolor{stringliteral}{"Display Manager cannot acquire needed resources. %d:%s"}, errno, strerror(
      errno));
447         \textcolor{keywordflow}{return} NULL;
448     \}
449 
450     memset(pdm, 0, \textcolor{keyword}{sizeof}(\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r}{DisplayManager}));
451     strcpy(pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_abfad08e99f5f76d9e63de7d1fb88befd}{cbName}, \textcolor{stringliteral}{"PDisplayManager"});
452     memmove(pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_a4ddfa233f1e3d41609f10b23a386541e}{ch\_welcome\_msg}, welcome, \hyperlink{cmd_d_c_8c_a442d5e93bd9c9d8eb4532aba62b5f86c}{SZ\_INFO\_BUFF}-1);
453     pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_a10067d9a5974f5f19bf638ee72ddd973}{msg\_len} = strlen(welcome);
454 
455     pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_a8ea0b9503de7da47f210489c8fa19867}{dsp\_cols} = \hyperlink{skn__rpi__helpers_8c_ac934aabd8dd134e724c62e1264afa549}{gd\_i\_cols};
456     pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_aeddcffcc90a611efde00a085352bc63b}{dsp\_rows} = \hyperlink{skn__rpi__helpers_8c_a3599398fb56285a3069b55791e6bb953}{gd\_i\_rows};
457     pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_aae8a6a90422fd9f571dff5f455740aa4}{current\_line} = 0;
458     pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_aed299ac3603bba3dfe3c09389122f8d8}{next\_line} = \hyperlink{skn__rpi__helpers_8c_a3599398fb56285a3069b55791e6bb953}{gd\_i\_rows};
459 
460     \textcolor{keywordflow}{for} (index = 0; index < \hyperlink{skn__common__headers_8h_a199b80b777af46c9141191749f8f026d}{ARY\_MAX\_DM\_LINES}; index++) \{
461         pdl = pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_a3a5ccb906320bd6aecbf89cb6b0fc234}{pdsp\_collection}[index] = (\hyperlink{skn__common__headers_8h_a754e9456a497a668b8d959ed2cbe9ec3}{PDisplayLine}) malloc(\textcolor{keyword}{sizeof}(
      \hyperlink{struct___d_i_s_p_l_a_y___l_i_n_e}{DisplayLine})); \textcolor{comment}{// line x}
462         memset(pdl, 0, \textcolor{keyword}{sizeof}(\hyperlink{struct___d_i_s_p_l_a_y___l_i_n_e}{DisplayLine}));
463         strcpy(pdl->\hyperlink{struct___d_i_s_p_l_a_y___l_i_n_e_a3a374d209578adb1d4cea933756fb14a}{cbName}, \textcolor{stringliteral}{"PDisplayLine"});
464         strncpy(pdl->\hyperlink{struct___d_i_s_p_l_a_y___l_i_n_e_ae5fae9b599281d1d3f619b6e402e7c2c}{ch\_display\_msg}, welcome, (\hyperlink{cmd_d_c_8c_a442d5e93bd9c9d8eb4532aba62b5f86c}{SZ\_INFO\_BUFF} -1));  \textcolor{comment}{// load all
       with welcome message}
465         pdl->\hyperlink{struct___d_i_s_p_l_a_y___l_i_n_e_ae5fae9b599281d1d3f619b6e402e7c2c}{ch\_display\_msg}[(\hyperlink{cmd_d_c_8c_a442d5e93bd9c9d8eb4532aba62b5f86c}{SZ\_INFO\_BUFF} - 1)] = 0;    \textcolor{comment}{// terminate string in
       case}
466         pdl->\hyperlink{struct___d_i_s_p_l_a_y___l_i_n_e_aa9cfa1dd3e90386f675fef61e711342e}{msg\_len} = pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_a10067d9a5974f5f19bf638ee72ddd973}{msg\_len};
467         pdl->\hyperlink{struct___d_i_s_p_l_a_y___l_i_n_e_acf235d7965b9d52439add787b8e3d316}{active} = 1;
468         \textcolor{keywordflow}{if} (pdl->\hyperlink{struct___d_i_s_p_l_a_y___l_i_n_e_aa9cfa1dd3e90386f675fef61e711342e}{msg\_len} > \hyperlink{skn__rpi__helpers_8c_ac934aabd8dd134e724c62e1264afa549}{gd\_i\_cols}) \{
469             pdl->\hyperlink{struct___d_i_s_p_l_a_y___l_i_n_e_ad92346a9708f3f3ba0c45dfb891c18e3}{scroll\_enabled} = 1;
470             \hyperlink{skn__rpi__helpers_8c_ae945b3a41d43db4d0c52f522d663d415}{skn\_scroller\_wrap\_blanks}(pdl->\hyperlink{struct___d_i_s_p_l_a_y___l_i_n_e_ae5fae9b599281d1d3f619b6e402e7c2c}{ch\_display\_msg});
471             pdl->\hyperlink{struct___d_i_s_p_l_a_y___l_i_n_e_ae5fae9b599281d1d3f619b6e402e7c2c}{ch\_display\_msg}[(\hyperlink{cmd_d_c_8c_a442d5e93bd9c9d8eb4532aba62b5f86c}{SZ\_INFO\_BUFF} - 1)] = 0;    \textcolor{comment}{// terminate string
       in case}
472             pdl->\hyperlink{struct___d_i_s_p_l_a_y___l_i_n_e_aa9cfa1dd3e90386f675fef61e711342e}{msg\_len} = strlen(pdl->\hyperlink{struct___d_i_s_p_l_a_y___l_i_n_e_ae5fae9b599281d1d3f619b6e402e7c2c}{ch\_display\_msg});
473         \}
474     \}
475     \textcolor{keywordflow}{for} (index = 0; index < \hyperlink{skn__common__headers_8h_a199b80b777af46c9141191749f8f026d}{ARY\_MAX\_DM\_LINES}; index++) \{               \textcolor{comment}{// enable link list
       routing}
476             next = (((index + 1) == ARY\_MAX\_DM\_LINES) ? 0 : (index + 1));
477             prev = (((index - 1) == -1) ? (ARY\_MAX\_DM\_LINES - 1) : (index - 1));
478             pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_a3a5ccb906320bd6aecbf89cb6b0fc234}{pdsp\_collection}[index]->\hyperlink{struct___d_i_s_p_l_a_y___l_i_n_e_a0668a4de4eb91d9bbd03cc52b00f4fd0}{next} = pdm->
      \hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_a3a5ccb906320bd6aecbf89cb6b0fc234}{pdsp\_collection}[next];
479             pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_a3a5ccb906320bd6aecbf89cb6b0fc234}{pdsp\_collection}[index]->\hyperlink{struct___d_i_s_p_l_a_y___l_i_n_e_aadc57636aadef3cff11443217e7f50e5}{prev} = pdm->
      \hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_a3a5ccb906320bd6aecbf89cb6b0fc234}{pdsp\_collection}[prev];
480     \}
481     \textcolor{keywordflow}{return} pdm;
482 \}
\end{DoxyCode}


Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{skn__rpi__helpers_8c_a3b806c833fce33e93ad36909a2561353_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{skn__rpi__helpers_8c_a3b806c833fce33e93ad36909a2561353_icgraph}
\end{center}
\end{figure}


\hypertarget{skn__rpi__helpers_8c_a7c4eede6a3dd9f0a33125bd573fd44eb}{\index{skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}!skn\+\_\+display\+\_\+manager\+\_\+destroy@{skn\+\_\+display\+\_\+manager\+\_\+destroy}}
\index{skn\+\_\+display\+\_\+manager\+\_\+destroy@{skn\+\_\+display\+\_\+manager\+\_\+destroy}!skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}}
\subsubsection[{skn\+\_\+display\+\_\+manager\+\_\+destroy}]{\setlength{\rightskip}{0pt plus 5cm}static void skn\+\_\+display\+\_\+manager\+\_\+destroy (
\begin{DoxyParamCaption}
\item[{{\bf P\+Display\+Manager}}]{pdm}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{skn__rpi__helpers_8c_a7c4eede6a3dd9f0a33125bd573fd44eb}


Definition at line 611 of file skn\+\_\+rpi\+\_\+helpers.\+c.



References A\+R\+Y\+\_\+\+M\+A\+X\+\_\+\+D\+M\+\_\+\+L\+I\+N\+E\+S, and \+\_\+\+D\+I\+S\+P\+L\+A\+Y\+\_\+\+M\+A\+N\+A\+G\+E\+R\+::pdsp\+\_\+collection.



Referenced by skn\+\_\+display\+\_\+manager\+\_\+do\+\_\+work().


\begin{DoxyCode}
611                                                              \{
612     \textcolor{keywordtype}{int} index = 0;
613 
614     \textcolor{comment}{// free collection}
615     \textcolor{keywordflow}{for} (index = 0; index < \hyperlink{skn__common__headers_8h_a199b80b777af46c9141191749f8f026d}{ARY\_MAX\_DM\_LINES}; index++) \{
616         \textcolor{keywordflow}{if} (pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_a3a5ccb906320bd6aecbf89cb6b0fc234}{pdsp\_collection}[index] != NULL) \{
617             free(pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_a3a5ccb906320bd6aecbf89cb6b0fc234}{pdsp\_collection}[index]);
618         \}
619     \}
620     \textcolor{comment}{// free manager}
621     \textcolor{keywordflow}{if} (pdm != NULL)
622         free(pdm);
623 \}
\end{DoxyCode}


Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{skn__rpi__helpers_8c_a7c4eede6a3dd9f0a33125bd573fd44eb_icgraph}
\end{center}
\end{figure}


\hypertarget{skn__rpi__helpers_8c_a0e93b40f29ab2df743c934be34500c15}{\index{skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}!skn\+\_\+display\+\_\+manager\+\_\+do\+\_\+work@{skn\+\_\+display\+\_\+manager\+\_\+do\+\_\+work}}
\index{skn\+\_\+display\+\_\+manager\+\_\+do\+\_\+work@{skn\+\_\+display\+\_\+manager\+\_\+do\+\_\+work}!skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}}
\subsubsection[{skn\+\_\+display\+\_\+manager\+\_\+do\+\_\+work}]{\setlength{\rightskip}{0pt plus 5cm}int skn\+\_\+display\+\_\+manager\+\_\+do\+\_\+work (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{client\+\_\+request\+\_\+message}
\end{DoxyParamCaption}
)}}\label{skn__rpi__helpers_8c_a0e93b40f29ab2df743c934be34500c15}


Definition at line 531 of file skn\+\_\+rpi\+\_\+helpers.\+c.



References \+\_\+\+D\+I\+S\+P\+L\+A\+Y\+\_\+\+L\+I\+N\+E\+::active, \+\_\+\+D\+I\+S\+P\+L\+A\+Y\+\_\+\+M\+A\+N\+A\+G\+E\+R\+::current\+\_\+line, \+\_\+\+D\+I\+S\+P\+L\+A\+Y\+\_\+\+M\+A\+N\+A\+G\+E\+R\+::dsp\+\_\+rows, gd\+\_\+pch\+\_\+device\+\_\+name, generate\+\_\+rpi\+\_\+model\+\_\+info(), gi\+\_\+exit\+\_\+flag, \+\_\+\+D\+I\+S\+P\+L\+A\+Y\+\_\+\+M\+A\+N\+A\+G\+E\+R\+::lcd\+\_\+handle, \+\_\+\+D\+I\+S\+P\+L\+A\+Y\+\_\+\+L\+I\+N\+E\+::next, \+\_\+\+D\+I\+S\+P\+L\+A\+Y\+\_\+\+M\+A\+N\+A\+G\+E\+R\+::pdsp\+\_\+collection, P\+L\+A\+T\+F\+O\+R\+M\+\_\+\+E\+R\+R\+O\+R, S\+D\+\_\+\+E\+R\+R, S\+D\+\_\+\+N\+O\+T\+I\+C\+E, skn\+\_\+device\+\_\+manager\+\_\+\+L\+C\+D\+\_\+setup(), skn\+\_\+device\+\_\+manager\+\_\+\+L\+C\+D\+\_\+shutdown(), skn\+\_\+display\+\_\+manager\+\_\+add\+\_\+line(), skn\+\_\+display\+\_\+manager\+\_\+create(), skn\+\_\+display\+\_\+manager\+\_\+destroy(), skn\+\_\+display\+\_\+manager\+\_\+message\+\_\+consumer\+\_\+shutdown(), skn\+\_\+display\+\_\+manager\+\_\+message\+\_\+consumer\+\_\+startup(), skn\+\_\+generate\+\_\+datetime\+\_\+info(), skn\+\_\+generate\+\_\+loadavg\+\_\+info(), skn\+\_\+generate\+\_\+uname\+\_\+info(), S\+K\+N\+\_\+\+R\+U\+N\+\_\+\+M\+O\+D\+E\+\_\+\+R\+U\+N, S\+K\+N\+\_\+\+R\+U\+N\+\_\+\+M\+O\+D\+E\+\_\+\+S\+T\+O\+P, skn\+\_\+scroller\+\_\+scroll\+\_\+lines(), skn\+\_\+time\+\_\+delay\+\_\+ms(), and S\+Z\+\_\+\+I\+N\+F\+O\+\_\+\+B\+U\+F\+F.



Referenced by main().


\begin{DoxyCode}
531                                                                \{
532     \textcolor{keywordtype}{int} index = 0, dsp\_line\_number = 0;
533     \hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r}{PDisplayManager} pdm = NULL;
534     \hyperlink{struct___d_i_s_p_l_a_y___l_i_n_e}{PDisplayLine} pdl = NULL;
535     \textcolor{keywordtype}{char} ch\_lcd\_message[4][\hyperlink{cmd_d_c_8c_a442d5e93bd9c9d8eb4532aba62b5f86c}{SZ\_INFO\_BUFF}];
536     \textcolor{keywordtype}{long} host\_update\_cycle = 0;
537 
538     \hyperlink{skn__rpi__helpers_8c_ab1d9c73f13a8c60f54b1df15a34a8e64}{gp\_structure\_pdm} = pdm = \hyperlink{skn__rpi__helpers_8c_a3b806c833fce33e93ad36909a2561353}{skn\_display\_manager\_create}(
      client\_request\_message);
539     \textcolor{keywordflow}{if} (pdm == NULL) \{
540         \hyperlink{skn__network__helpers_8c_a7b63b016033aaa3ad752bdbd887d10c0}{gi\_exit\_flag} = \hyperlink{skn__common__headers_8h_a6ea8f978e9fdfefe8437e3a7decbad7f}{SKN\_RUN\_MODE\_STOP};
541         skn\_logger(\hyperlink{skn__common__headers_8h_a29cd8395c2db41768436986ab7a666b3}{SD\_ERR}, \textcolor{stringliteral}{"Display Manager cannot acquire needed resources. DMCreate()"});
542         \textcolor{keywordflow}{return} \hyperlink{skn__network__helpers_8c_a7b63b016033aaa3ad752bdbd887d10c0}{gi\_exit\_flag};
543     \}
544     \hyperlink{skn__network__helpers_8c_adc9d01795423b927160fa32e842015ea}{skn\_generate\_datetime\_info} (ch\_lcd\_message[0]);
545     \hyperlink{skn__rpi__helpers_8c_a0410c7c96c2188c945cea294ae074ff9}{generate\_rpi\_model\_info}(ch\_lcd\_message[1]);
546 \textcolor{comment}{//    generate\_cpu\_temps\_info(ch\_lcd\_message[2]);}
547     \hyperlink{skn__network__helpers_8c_a7da6dc73acd9390e469a4f2a1bd5e162}{skn\_generate\_uname\_info}    (ch\_lcd\_message[2]);
548     \hyperlink{skn__network__helpers_8c_abbacbfd3718ca9b0f29e08e36e15c1d2}{skn\_generate\_loadavg\_info}  (ch\_lcd\_message[3]);
549     \hyperlink{skn__rpi__helpers_8c_a73890d642bf9cbb1de78675d587d79a3}{skn\_display\_manager\_add\_line}(pdm, ch\_lcd\_message[0]);
550     \hyperlink{skn__rpi__helpers_8c_a73890d642bf9cbb1de78675d587d79a3}{skn\_display\_manager\_add\_line}(pdm, ch\_lcd\_message[1]);
551     \hyperlink{skn__rpi__helpers_8c_a73890d642bf9cbb1de78675d587d79a3}{skn\_display\_manager\_add\_line}(pdm, ch\_lcd\_message[2]);
552     \hyperlink{skn__rpi__helpers_8c_a73890d642bf9cbb1de78675d587d79a3}{skn\_display\_manager\_add\_line}(pdm, ch\_lcd\_message[3]);
553 
554     \textcolor{keywordflow}{if} (\hyperlink{skn__rpi__helpers_8c_a58c9a50b0307d45138f4a6f2e6ba7a76}{skn\_device\_manager\_LCD\_setup}(pdm, 
      \hyperlink{skn__rpi__helpers_8c_a236d69bc821c60a396d02099e92d22bb}{gd\_pch\_device\_name}) == \hyperlink{cmd_d_c_8c_a12efd06fda89d6826f820e75148d8fd7}{PLATFORM\_ERROR}) \{
555         \hyperlink{skn__network__helpers_8c_a7b63b016033aaa3ad752bdbd887d10c0}{gi\_exit\_flag} = \hyperlink{skn__common__headers_8h_a6ea8f978e9fdfefe8437e3a7decbad7f}{SKN\_RUN\_MODE\_STOP};
556         skn\_logger(\hyperlink{skn__common__headers_8h_a29cd8395c2db41768436986ab7a666b3}{SD\_ERR}, \textcolor{stringliteral}{"Display Manager cannot acquire needed resources: lcdSetup()."});
557         \hyperlink{skn__rpi__helpers_8c_a7c4eede6a3dd9f0a33125bd573fd44eb}{skn\_display\_manager\_destroy}(pdm);
558         \textcolor{keywordflow}{return} \hyperlink{skn__network__helpers_8c_a7b63b016033aaa3ad752bdbd887d10c0}{gi\_exit\_flag};
559     \}
560 
561     \textcolor{keywordflow}{if} (\hyperlink{skn__rpi__helpers_8c_aee27f71a8f457def69c26d516ae821ab}{skn\_display\_manager\_message\_consumer\_startup}(pdm) == 
      EXIT\_FAILURE) \{
562         \hyperlink{skn__network__helpers_8c_a7b63b016033aaa3ad752bdbd887d10c0}{gi\_exit\_flag} = \hyperlink{skn__common__headers_8h_a6ea8f978e9fdfefe8437e3a7decbad7f}{SKN\_RUN\_MODE\_STOP};
563         skn\_logger(\hyperlink{skn__common__headers_8h_a29cd8395c2db41768436986ab7a666b3}{SD\_ERR}, \textcolor{stringliteral}{"Display Manager cannot acquire needed resources: Consumer()."});
564         \hyperlink{skn__rpi__helpers_8c_a7c4eede6a3dd9f0a33125bd573fd44eb}{skn\_display\_manager\_destroy}(pdm);
565         \textcolor{keywordflow}{return} \hyperlink{skn__network__helpers_8c_a7b63b016033aaa3ad752bdbd887d10c0}{gi\_exit\_flag};
566     \}
567 
568     skn\_logger(\hyperlink{skn__common__headers_8h_a4e0c16529642a911483bd7eaabefca4c}{SD\_NOTICE}, \textcolor{stringliteral}{"Application Active... "});
569 
570     \textcolor{comment}{/*}
571 \textcolor{comment}{     *  Do the Work}
572 \textcolor{comment}{     */}
573     \textcolor{keywordflow}{while} (\hyperlink{skn__network__helpers_8c_a7b63b016033aaa3ad752bdbd887d10c0}{gi\_exit\_flag} == \hyperlink{skn__common__headers_8h_a3f5142b81a9ee977aedfd69a61281920}{SKN\_RUN\_MODE\_RUN}) \{
574         dsp\_line\_number = 0;
575         pdl = pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_a3a5ccb906320bd6aecbf89cb6b0fc234}{pdsp\_collection}[pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_aae8a6a90422fd9f571dff5f455740aa4}{current\_line}];
576     
577         \textcolor{keywordflow}{for} (index = 0; index < pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_aeddcffcc90a611efde00a085352bc63b}{dsp\_rows}; index++) \{
578             \textcolor{keywordflow}{if} (pdl->\hyperlink{struct___d_i_s_p_l_a_y___l_i_n_e_acf235d7965b9d52439add787b8e3d316}{active} == 1) \{
579                 \hyperlink{skn__rpi__helpers_8c_a4f78720f41ceb03e6b6111a358c7aea1}{skn\_scroller\_scroll\_lines}(pdl, pdm->
      \hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_a6ebc44b98c1483295586660829eb5a43}{lcd\_handle}, dsp\_line\_number++);
580                 \hyperlink{skn__network__helpers_8c_a11a06f22b7bdbf78e38d9a6f4d71fe8e}{skn\_time\_delay\_ms}(0.18); \textcolor{comment}{// delay(180);}
581             \}
582             pdl = (\hyperlink{skn__common__headers_8h_a754e9456a497a668b8d959ed2cbe9ec3}{PDisplayLine}) pdl->\hyperlink{struct___d_i_s_p_l_a_y___l_i_n_e_a0668a4de4eb91d9bbd03cc52b00f4fd0}{next};
583         \}
584 
585         \textcolor{keywordflow}{if} ((host\_update\_cycle++ % 900) == 0) \{  \textcolor{comment}{// roughly every fifteen minutes}
586             \hyperlink{skn__network__helpers_8c_adc9d01795423b927160fa32e842015ea}{skn\_generate\_datetime\_info} (ch\_lcd\_message[0]);
587 \textcolor{comment}{//            generate\_cpu\_temps\_info(ch\_lcd\_message[2]);}
588             \hyperlink{skn__network__helpers_8c_abbacbfd3718ca9b0f29e08e36e15c1d2}{skn\_generate\_loadavg\_info}  (ch\_lcd\_message[3]);
589             \hyperlink{skn__rpi__helpers_8c_a73890d642bf9cbb1de78675d587d79a3}{skn\_display\_manager\_add\_line}(pdm, ch\_lcd\_message[0]);
590             \hyperlink{skn__rpi__helpers_8c_a73890d642bf9cbb1de78675d587d79a3}{skn\_display\_manager\_add\_line}(pdm, ch\_lcd\_message[1]);
591             \hyperlink{skn__rpi__helpers_8c_a73890d642bf9cbb1de78675d587d79a3}{skn\_display\_manager\_add\_line}(pdm, ch\_lcd\_message[2]);
592             \hyperlink{skn__rpi__helpers_8c_a73890d642bf9cbb1de78675d587d79a3}{skn\_display\_manager\_add\_line}(pdm, ch\_lcd\_message[3]);
593             host\_update\_cycle = 1;
594         \}
595     \}
596 
597     \hyperlink{skn__rpi__helpers_8c_aad63cb41e99a588cea9609a100cc9333}{skn\_device\_manager\_LCD\_shutdown}(pdm);
598 
599     skn\_logger(\hyperlink{skn__common__headers_8h_a4e0c16529642a911483bd7eaabefca4c}{SD\_NOTICE}, \textcolor{stringliteral}{"Application InActive..."});
600 
601     \textcolor{comment}{/*}
602 \textcolor{comment}{     * Stop UDP Listener}
603 \textcolor{comment}{     */}
604     \hyperlink{skn__rpi__helpers_8c_a34ce4afdf4f5f20fc109e749fb87c573}{skn\_display\_manager\_message\_consumer\_shutdown}(pdm);
605 
606     \hyperlink{skn__rpi__helpers_8c_a7c4eede6a3dd9f0a33125bd573fd44eb}{skn\_display\_manager\_destroy}(pdm);
607     \hyperlink{skn__rpi__helpers_8c_ab1d9c73f13a8c60f54b1df15a34a8e64}{gp\_structure\_pdm} = pdm = NULL;
608 
609     \textcolor{keywordflow}{return} \hyperlink{skn__network__helpers_8c_a7b63b016033aaa3ad752bdbd887d10c0}{gi\_exit\_flag};
610 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{skn__rpi__helpers_8c_a0e93b40f29ab2df743c934be34500c15_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=267pt]{skn__rpi__helpers_8c_a0e93b40f29ab2df743c934be34500c15_icgraph}
\end{center}
\end{figure}


\hypertarget{skn__rpi__helpers_8c_a34ce4afdf4f5f20fc109e749fb87c573}{\index{skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}!skn\+\_\+display\+\_\+manager\+\_\+message\+\_\+consumer\+\_\+shutdown@{skn\+\_\+display\+\_\+manager\+\_\+message\+\_\+consumer\+\_\+shutdown}}
\index{skn\+\_\+display\+\_\+manager\+\_\+message\+\_\+consumer\+\_\+shutdown@{skn\+\_\+display\+\_\+manager\+\_\+message\+\_\+consumer\+\_\+shutdown}!skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}}
\subsubsection[{skn\+\_\+display\+\_\+manager\+\_\+message\+\_\+consumer\+\_\+shutdown}]{\setlength{\rightskip}{0pt plus 5cm}void skn\+\_\+display\+\_\+manager\+\_\+message\+\_\+consumer\+\_\+shutdown (
\begin{DoxyParamCaption}
\item[{{\bf P\+Display\+Manager}}]{pdm}
\end{DoxyParamCaption}
)}}\label{skn__rpi__helpers_8c_a34ce4afdf4f5f20fc109e749fb87c573}
skn\+\_\+display\+\_\+manager\+\_\+message\+\_\+consumer(\+P\+Display\+Manager pdm) 

Definition at line 654 of file skn\+\_\+rpi\+\_\+helpers.\+c.



References \+\_\+\+D\+I\+S\+P\+L\+A\+Y\+\_\+\+M\+A\+N\+A\+G\+E\+R\+::dm\+\_\+thread, \+\_\+\+D\+I\+S\+P\+L\+A\+Y\+\_\+\+M\+A\+N\+A\+G\+E\+R\+::i\+\_\+socket, S\+D\+\_\+\+N\+O\+T\+I\+C\+E, S\+D\+\_\+\+W\+A\+R\+N\+I\+N\+G, and \+\_\+\+D\+I\+S\+P\+L\+A\+Y\+\_\+\+M\+A\+N\+A\+G\+E\+R\+::thread\+\_\+complete.



Referenced by skn\+\_\+display\+\_\+manager\+\_\+do\+\_\+work().


\begin{DoxyCode}
654                                                                         \{
655     \textcolor{keywordtype}{void} *trc = NULL;
656 
657     \textcolor{keywordflow}{if} (pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_ae20e9cf0e6789ce07c5b8005b4a7ada0}{thread\_complete} != 0) \{
658         skn\_logger(\hyperlink{skn__common__headers_8h_a1b84e50e89a48558f56175017017c375}{SD\_WARNING}, \textcolor{stringliteral}{"DisplayManager: Canceling thread."});
659         pthread\_cancel(pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_a7033f795cd887063d36c11556c368e6f}{dm\_thread});
660         sleep(1);
661     \} \textcolor{keywordflow}{else} \{
662         skn\_logger(\hyperlink{skn__common__headers_8h_a1b84e50e89a48558f56175017017c375}{SD\_WARNING}, \textcolor{stringliteral}{"DisplayManager: Thread was already stopped."});
663     \}
664     pthread\_join(pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_a7033f795cd887063d36c11556c368e6f}{dm\_thread}, &trc);
665     close(pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_a23e726562acd51d59c09eafa6f179137}{i\_socket});
666     skn\_logger(\hyperlink{skn__common__headers_8h_a4e0c16529642a911483bd7eaabefca4c}{SD\_NOTICE}, \textcolor{stringliteral}{"DisplayManager: Thread ended:(%ld)"}, (\textcolor{keywordtype}{long} \textcolor{keywordtype}{int}) trc);
667 \}
\end{DoxyCode}


Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{skn__rpi__helpers_8c_a34ce4afdf4f5f20fc109e749fb87c573_icgraph}
\end{center}
\end{figure}


\hypertarget{skn__rpi__helpers_8c_aee27f71a8f457def69c26d516ae821ab}{\index{skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}!skn\+\_\+display\+\_\+manager\+\_\+message\+\_\+consumer\+\_\+startup@{skn\+\_\+display\+\_\+manager\+\_\+message\+\_\+consumer\+\_\+startup}}
\index{skn\+\_\+display\+\_\+manager\+\_\+message\+\_\+consumer\+\_\+startup@{skn\+\_\+display\+\_\+manager\+\_\+message\+\_\+consumer\+\_\+startup}!skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}}
\subsubsection[{skn\+\_\+display\+\_\+manager\+\_\+message\+\_\+consumer\+\_\+startup}]{\setlength{\rightskip}{0pt plus 5cm}int skn\+\_\+display\+\_\+manager\+\_\+message\+\_\+consumer\+\_\+startup (
\begin{DoxyParamCaption}
\item[{{\bf P\+Display\+Manager}}]{pdm}
\end{DoxyParamCaption}
)}}\label{skn__rpi__helpers_8c_aee27f71a8f457def69c26d516ae821ab}
skn\+\_\+display\+\_\+manager\+\_\+message\+\_\+consumer(\+P\+Display\+Manager pdm)
\begin{DoxyItemize}
\item returns Socket or E\+X\+I\+T\+\_\+\+F\+A\+I\+L\+U\+R\+E 
\end{DoxyItemize}

Definition at line 629 of file skn\+\_\+rpi\+\_\+helpers.\+c.



References \+\_\+\+D\+I\+S\+P\+L\+A\+Y\+\_\+\+M\+A\+N\+A\+G\+E\+R\+::dm\+\_\+thread, \+\_\+\+D\+I\+S\+P\+L\+A\+Y\+\_\+\+M\+A\+N\+A\+G\+E\+R\+::i\+\_\+socket, S\+D\+\_\+\+E\+M\+E\+R\+G, S\+D\+\_\+\+N\+O\+T\+I\+C\+E, S\+D\+\_\+\+W\+A\+R\+N\+I\+N\+G, skn\+\_\+display\+\_\+manager\+\_\+message\+\_\+consumer\+\_\+thread(), S\+K\+N\+\_\+\+R\+P\+I\+\_\+\+D\+I\+S\+P\+L\+A\+Y\+\_\+\+S\+E\+R\+V\+I\+C\+E\+\_\+\+P\+O\+R\+T, and skn\+\_\+udp\+\_\+host\+\_\+create\+\_\+regular\+\_\+socket().



Referenced by skn\+\_\+display\+\_\+manager\+\_\+do\+\_\+work().


\begin{DoxyCode}
629                                                                       \{
630     \textcolor{comment}{/*}
631 \textcolor{comment}{     * Start UDP Listener */}
632     pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_a23e726562acd51d59c09eafa6f179137}{i\_socket} = \hyperlink{skn__network__helpers_8c_a25427bc0b7f087d1135c92dd3704f210}{skn\_udp\_host\_create\_regular\_socket}(
      \hyperlink{skn__common__headers_8h_a438e6442bfb3d18e1846357cf7379216}{SKN\_RPI\_DISPLAY\_SERVICE\_PORT}, 30.0);
633     \textcolor{keywordflow}{if} (pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_a23e726562acd51d59c09eafa6f179137}{i\_socket} == EXIT\_FAILURE) \{
634         skn\_logger(\hyperlink{skn__common__headers_8h_a6fdb1bbdf5f13035e439b096691534f2}{SD\_EMERG}, \textcolor{stringliteral}{"DisplayManager: Host Init Failed!"});
635         \textcolor{keywordflow}{return} EXIT\_FAILURE;
636     \}
637 
638     \textcolor{comment}{/*}
639 \textcolor{comment}{     * Create Thread  */}
640     \textcolor{keywordtype}{int} i\_thread\_rc = pthread\_create(&pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_a7033f795cd887063d36c11556c368e6f}{dm\_thread}, NULL, 
      \hyperlink{skn__rpi__helpers_8c_ad17a8b378ba944f87beef66dbf0f47b0}{skn\_display\_manager\_message\_consumer\_thread}, (\textcolor{keywordtype}{void} *) pdm);
641     \textcolor{keywordflow}{if} (i\_thread\_rc == -1) \{
642         skn\_logger(\hyperlink{skn__common__headers_8h_a1b84e50e89a48558f56175017017c375}{SD\_WARNING}, \textcolor{stringliteral}{"DisplayManager: Create thread failed: %s"}, strerror(errno));
643         close(pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_a23e726562acd51d59c09eafa6f179137}{i\_socket});
644         \textcolor{keywordflow}{return} EXIT\_FAILURE;
645     \}
646     sleep(1); \textcolor{comment}{// give thread a chance to start}
647 
648     skn\_logger(\hyperlink{skn__common__headers_8h_a4e0c16529642a911483bd7eaabefca4c}{SD\_NOTICE}, \textcolor{stringliteral}{"DisplayManager: Thread startup successful... "});
649 
650     \textcolor{keywordflow}{return} pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_a23e726562acd51d59c09eafa6f179137}{i\_socket};
651 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{skn__rpi__helpers_8c_aee27f71a8f457def69c26d516ae821ab_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{skn__rpi__helpers_8c_aee27f71a8f457def69c26d516ae821ab_icgraph}
\end{center}
\end{figure}


\hypertarget{skn__rpi__helpers_8c_ad17a8b378ba944f87beef66dbf0f47b0}{\index{skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}!skn\+\_\+display\+\_\+manager\+\_\+message\+\_\+consumer\+\_\+thread@{skn\+\_\+display\+\_\+manager\+\_\+message\+\_\+consumer\+\_\+thread}}
\index{skn\+\_\+display\+\_\+manager\+\_\+message\+\_\+consumer\+\_\+thread@{skn\+\_\+display\+\_\+manager\+\_\+message\+\_\+consumer\+\_\+thread}!skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}}
\subsubsection[{skn\+\_\+display\+\_\+manager\+\_\+message\+\_\+consumer\+\_\+thread}]{\setlength{\rightskip}{0pt plus 5cm}static void $\ast$ skn\+\_\+display\+\_\+manager\+\_\+message\+\_\+consumer\+\_\+thread (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{ptr}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{skn__rpi__helpers_8c_ad17a8b378ba944f87beef66dbf0f47b0}
skn\+\_\+display\+\_\+manager\+\_\+message\+\_\+consumer\+\_\+thread(\+P\+Display\+Manager pdm) 

Definition at line 673 of file skn\+\_\+rpi\+\_\+helpers.\+c.



References gi\+\_\+exit\+\_\+flag, \+\_\+\+D\+I\+S\+P\+L\+A\+Y\+\_\+\+M\+A\+N\+A\+G\+E\+R\+::i\+\_\+socket, S\+D\+\_\+\+E\+R\+R, S\+D\+\_\+\+N\+O\+T\+I\+C\+E, skn\+\_\+display\+\_\+manager\+\_\+add\+\_\+line(), skn\+\_\+get\+\_\+broadcast\+\_\+ip\+\_\+array(), S\+K\+N\+\_\+\+R\+P\+I\+\_\+\+D\+I\+S\+P\+L\+A\+Y\+\_\+\+S\+E\+R\+V\+I\+C\+E\+\_\+\+P\+O\+R\+T, S\+K\+N\+\_\+\+R\+U\+N\+\_\+\+M\+O\+D\+E\+\_\+\+R\+U\+N, S\+K\+N\+\_\+\+R\+U\+N\+\_\+\+M\+O\+D\+E\+\_\+\+S\+T\+O\+P, skn\+\_\+time\+\_\+delay\+\_\+ms(), S\+Z\+\_\+\+I\+N\+F\+O\+\_\+\+B\+U\+F\+F, and \+\_\+\+D\+I\+S\+P\+L\+A\+Y\+\_\+\+M\+A\+N\+A\+G\+E\+R\+::thread\+\_\+complete.



Referenced by skn\+\_\+display\+\_\+manager\+\_\+message\+\_\+consumer\+\_\+startup().


\begin{DoxyCode}
673                                                                       \{
674     \hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r}{PDisplayManager} pdm = (\hyperlink{skn__common__headers_8h_a9e176eedaf378010a6a48e6a242fc6a0}{PDisplayManager}) ptr;
675     \textcolor{keyword}{struct }sockaddr\_in remaddr; \textcolor{comment}{/* remote address */}
676     socklen\_t addrlen = \textcolor{keyword}{sizeof}(remaddr); \textcolor{comment}{/* length of addresses */}
677     \hyperlink{struct__ip_broadcast_array}{IPBroadcastArray} aB;
678     \textcolor{keywordtype}{char} strPrefix[\hyperlink{cmd_d_c_8c_a442d5e93bd9c9d8eb4532aba62b5f86c}{SZ\_INFO\_BUFF}];
679     \textcolor{keywordtype}{char} request[\hyperlink{cmd_d_c_8c_a442d5e93bd9c9d8eb4532aba62b5f86c}{SZ\_INFO\_BUFF}];
680     \textcolor{keywordtype}{char} recvHostName[\hyperlink{cmd_d_c_8c_a442d5e93bd9c9d8eb4532aba62b5f86c}{SZ\_INFO\_BUFF}];
681     \textcolor{keywordtype}{char} *pch = NULL;
682     \textcolor{keywordtype}{signed} \textcolor{keywordtype}{int} rLen = 0, rc = 0;
683     \textcolor{keywordtype}{long} \textcolor{keywordtype}{int} exit\_code = EXIT\_SUCCESS;
684 
685     bzero(request, \textcolor{keyword}{sizeof}(request));
686     memset(recvHostName, 0, \textcolor{keyword}{sizeof}(recvHostName));
687 
688     rc = \hyperlink{cmd_d_c_8c_a0dfc1a6916909805dc7fd2d8c471e0e3}{skn\_get\_broadcast\_ip\_array}(&aB);
689     \textcolor{keywordflow}{if} (rc == -1) \{
690         exit\_code = rc;
691         pthread\_exit((\textcolor{keywordtype}{void} *) exit\_code);
692     \}
693 
694     pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_ae20e9cf0e6789ce07c5b8005b4a7ada0}{thread\_complete} = 1;
695 
696     \textcolor{keywordflow}{while} (\hyperlink{skn__network__helpers_8c_a7b63b016033aaa3ad752bdbd887d10c0}{gi\_exit\_flag} == \hyperlink{skn__common__headers_8h_a3f5142b81a9ee977aedfd69a61281920}{SKN\_RUN\_MODE\_RUN}) \{
697         memset(&remaddr, 0, \textcolor{keyword}{sizeof}(remaddr));
698         remaddr.sin\_family = AF\_INET;
699         remaddr.sin\_port = htons(\hyperlink{skn__common__headers_8h_a438e6442bfb3d18e1846357cf7379216}{SKN\_RPI\_DISPLAY\_SERVICE\_PORT});
700         remaddr.sin\_addr.s\_addr = htonl(INADDR\_ANY);
701         addrlen = \textcolor{keyword}{sizeof}(remaddr);
702 \textcolor{comment}{//                                                                        V- MSG\_DONTWAIT or O\_NONBLOCK
       flag with the F\_SETFL fcntl(2)}
703         \textcolor{keywordflow}{if} ((rLen = recvfrom(pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_a23e726562acd51d59c09eafa6f179137}{i\_socket}, request, \textcolor{keyword}{sizeof}(request) - 1, 0, (\textcolor{keyword}{struct} sockaddr *) &
      remaddr, &addrlen)) < 0) \{
704             \textcolor{keywordflow}{if} (errno == EAGAIN || errno == EWOULDBLOCK) \{
705                 \textcolor{keywordflow}{continue};
706             \}
707             skn\_logger(\hyperlink{skn__common__headers_8h_a29cd8395c2db41768436986ab7a666b3}{SD\_ERR}, \textcolor{stringliteral}{"DisplayManager: RcvFrom() Failure code=%d, etext=%s"}, errno, strerror
      (errno));
708             exit\_code = errno;
709             \textcolor{keywordflow}{break};
710         \}
711         request[rLen] = 0;
712 
713         rc = getnameinfo(((\textcolor{keyword}{struct} sockaddr *) &remaddr), \textcolor{keyword}{sizeof}(\textcolor{keyword}{struct} sockaddr\_in), recvHostName, \textcolor{keyword}{sizeof}(
      recvHostName) - 1, NULL, 0, NI\_DGRAM);
714         \textcolor{keywordflow}{if} (rc != 0) \{
715             skn\_logger(\hyperlink{skn__common__headers_8h_a29cd8395c2db41768436986ab7a666b3}{SD\_ERR}, \textcolor{stringliteral}{"GetNameInfo() Failure code=%d, etext=%s"}, errno, strerror(errno));
716             exit\_code = errno;
717             \textcolor{keywordflow}{break};
718         \}
719         skn\_logger(\hyperlink{skn__common__headers_8h_a4e0c16529642a911483bd7eaabefca4c}{SD\_NOTICE}, \textcolor{stringliteral}{"Received request from %s @ %s:%d"}, recvHostName, inet\_ntoa(remaddr.
      sin\_addr), ntohs(remaddr.sin\_port));
720 
721         \textcolor{comment}{/*}
722 \textcolor{comment}{         * Add receive data to display set */}
723         pch = strtok(recvHostName, \textcolor{stringliteral}{"."});
724         snprintf(strPrefix, \textcolor{keyword}{sizeof}(strPrefix) -1 , \textcolor{stringliteral}{"%s|%s"}, pch, request);
725         \hyperlink{skn__rpi__helpers_8c_a73890d642bf9cbb1de78675d587d79a3}{skn\_display\_manager\_add\_line}(pdm, strPrefix);
726 
727         \textcolor{keywordflow}{if} (sendto(pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_a23e726562acd51d59c09eafa6f179137}{i\_socket}, \textcolor{stringliteral}{"200 Accepted"}, strlen(\textcolor{stringliteral}{"200 Accepted"}), 0, (\textcolor{keyword}{struct} sockaddr *) &
      remaddr, addrlen) < 0) \{
728             skn\_logger(\hyperlink{skn__common__headers_8h_a29cd8395c2db41768436986ab7a666b3}{SD\_ERR}, \textcolor{stringliteral}{"SendTo() Failure code=%d, etext=%s"}, errno, strerror(errno));
729             exit\_code = errno;
730             \textcolor{keywordflow}{break};
731         \}
732 
733         \textcolor{comment}{/*}
734 \textcolor{comment}{         * Shutdown by command */}
735         \textcolor{keywordflow}{if} (strcmp(\textcolor{stringliteral}{"QUIT!"}, request) == 0) \{
736             exit\_code = 0;
737             \hyperlink{skn__network__helpers_8c_a7b63b016033aaa3ad752bdbd887d10c0}{gi\_exit\_flag} = \hyperlink{skn__common__headers_8h_a6ea8f978e9fdfefe8437e3a7decbad7f}{SKN\_RUN\_MODE\_STOP};  \textcolor{comment}{// shutdown}
738             skn\_logger(\hyperlink{skn__common__headers_8h_a4e0c16529642a911483bd7eaabefca4c}{SD\_NOTICE}, \textcolor{stringliteral}{"COMMAND: Shutdown Requested! exit code=%d"}, exit\_code);
739             \textcolor{keywordflow}{break};
740         \}
741 
742     \}
743     \hyperlink{skn__network__helpers_8c_a7b63b016033aaa3ad752bdbd887d10c0}{gi\_exit\_flag} = \hyperlink{skn__common__headers_8h_a6ea8f978e9fdfefe8437e3a7decbad7f}{SKN\_RUN\_MODE\_STOP};  \textcolor{comment}{// shutdown}
744 \textcolor{comment}{//    kill(getpid(), SIGUSR1); // cause a shutdown}
745     \hyperlink{skn__network__helpers_8c_a11a06f22b7bdbf78e38d9a6f4d71fe8e}{skn\_time\_delay\_ms}(0.5);
746 
747     skn\_logger(\hyperlink{skn__common__headers_8h_a4e0c16529642a911483bd7eaabefca4c}{SD\_NOTICE}, \textcolor{stringliteral}{"Display Manager Thread: shutdown complete: (%ld)"}, exit\_code);
748 
749     pdm->\hyperlink{struct___d_i_s_p_l_a_y___m_a_n_a_g_e_r_ae20e9cf0e6789ce07c5b8005b4a7ada0}{thread\_complete} = 0;
750 
751     pthread\_exit((\textcolor{keywordtype}{void} *) exit\_code);
752 
753 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{skn__rpi__helpers_8c_ad17a8b378ba944f87beef66dbf0f47b0_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{skn__rpi__helpers_8c_ad17a8b378ba944f87beef66dbf0f47b0_icgraph}
\end{center}
\end{figure}


\hypertarget{skn__rpi__helpers_8c_aca7dfbde9be606bb7d177fb686b103f9}{\index{skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}!skn\+\_\+display\+\_\+print\+\_\+usage@{skn\+\_\+display\+\_\+print\+\_\+usage}}
\index{skn\+\_\+display\+\_\+print\+\_\+usage@{skn\+\_\+display\+\_\+print\+\_\+usage}!skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}}
\subsubsection[{skn\+\_\+display\+\_\+print\+\_\+usage}]{\setlength{\rightskip}{0pt plus 5cm}static void skn\+\_\+display\+\_\+print\+\_\+usage (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{skn__rpi__helpers_8c_aca7dfbde9be606bb7d177fb686b103f9}


Definition at line 764 of file skn\+\_\+rpi\+\_\+helpers.\+c.



References gd\+\_\+ch\+\_\+program\+\_\+desc, and gd\+\_\+ch\+\_\+program\+\_\+name.



Referenced by skn\+\_\+handle\+\_\+display\+\_\+command\+\_\+line().


\begin{DoxyCode}
764                                       \{
765     skn\_logger(\textcolor{stringliteral}{" "}, \textcolor{stringliteral}{"%s -- %s"}, \hyperlink{skn__network__helpers_8c_a1849cb923d68be6854cc346022fc79d7}{gd\_ch\_program\_name}, 
      \hyperlink{skn__network__helpers_8c_a7dfc34fe01828952972b6ae778b4f022}{gd\_ch\_program\_desc});
766     skn\_logger(\textcolor{stringliteral}{" "}, \textcolor{stringliteral}{"\(\backslash\)tSkoona Development <skoona@gmail.com>"});
767     skn\_logger(\textcolor{stringliteral}{" "}, \textcolor{stringliteral}{"Usage:\(\backslash\)n  %s [-v] [-m 'Welcome Message'] [-r 4|2] [-c 20|16] [-i 39|32] [-t
       pcf|mcp|mc7|ser] [-p string] [-h|--help]"}, \hyperlink{skn__network__helpers_8c_a1849cb923d68be6854cc346022fc79d7}{gd\_ch\_program\_name});
768     skn\_logger(\textcolor{stringliteral}{" "}, \textcolor{stringliteral}{"\(\backslash\)nOptions:"});
769     skn\_logger(\textcolor{stringliteral}{" "}, \textcolor{stringliteral}{"  -r, --rows=dd\(\backslash\)t\(\backslash\)tNumber of rows in physical display."});
770     skn\_logger(\textcolor{stringliteral}{" "}, \textcolor{stringliteral}{"  -c, --cols=dd\(\backslash\)t\(\backslash\)tNumber of columns in physical display."});
771     skn\_logger(\textcolor{stringliteral}{" "}, \textcolor{stringliteral}{"  -m, --message\(\backslash\)tWelcome Message for line 1."});
772     skn\_logger(\textcolor{stringliteral}{" "}, \textcolor{stringliteral}{"  -p, --serial-port=string\(\backslash\)tSerial port.      | ['/dev/ttyACM0']"});
773     skn\_logger(\textcolor{stringliteral}{" "}, \textcolor{stringliteral}{"  -i, --i2c-address=ddd\(\backslash\)tI2C decimal address. | [0x27=39, 0x20=32]"});
774     skn\_logger(\textcolor{stringliteral}{" "}, \textcolor{stringliteral}{"  -t, --i2c-chipset=pcf\(\backslash\)tI2C Chipset.         | [pcf|mc7|mcp|ser]"});
775     skn\_logger(\textcolor{stringliteral}{" "}, \textcolor{stringliteral}{"  -v, --version\(\backslash\)tVersion printout."});
776     skn\_logger(\textcolor{stringliteral}{" "}, \textcolor{stringliteral}{"  -h, --help\(\backslash\)t\(\backslash\)tShow this help screen."});
777 \}
\end{DoxyCode}


Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{skn__rpi__helpers_8c_aca7dfbde9be606bb7d177fb686b103f9_icgraph}
\end{center}
\end{figure}


\hypertarget{skn__rpi__helpers_8c_abc8758d786bdcff4bb0ec7ab05adfca1}{\index{skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}!skn\+\_\+get\+\_\+display\+\_\+manager\+\_\+ref@{skn\+\_\+get\+\_\+display\+\_\+manager\+\_\+ref}}
\index{skn\+\_\+get\+\_\+display\+\_\+manager\+\_\+ref@{skn\+\_\+get\+\_\+display\+\_\+manager\+\_\+ref}!skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}}
\subsubsection[{skn\+\_\+get\+\_\+display\+\_\+manager\+\_\+ref}]{\setlength{\rightskip}{0pt plus 5cm}{\bf P\+Display\+Manager} skn\+\_\+get\+\_\+display\+\_\+manager\+\_\+ref (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{skn__rpi__helpers_8c_abc8758d786bdcff4bb0ec7ab05adfca1}


Definition at line 528 of file skn\+\_\+rpi\+\_\+helpers.\+c.



References gp\+\_\+structure\+\_\+pdm.



Referenced by skn\+\_\+display\+\_\+manager\+\_\+add\+\_\+line().


\begin{DoxyCode}
528                                               \{
529     \textcolor{keywordflow}{return} \hyperlink{skn__rpi__helpers_8c_ab1d9c73f13a8c60f54b1df15a34a8e64}{gp\_structure\_pdm};
530 \}
\end{DoxyCode}


Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{skn__rpi__helpers_8c_abc8758d786bdcff4bb0ec7ab05adfca1_icgraph}
\end{center}
\end{figure}


\hypertarget{skn__rpi__helpers_8c_aed93e422e5b2cd74ea04177db841fa37}{\index{skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}!skn\+\_\+handle\+\_\+display\+\_\+command\+\_\+line@{skn\+\_\+handle\+\_\+display\+\_\+command\+\_\+line}}
\index{skn\+\_\+handle\+\_\+display\+\_\+command\+\_\+line@{skn\+\_\+handle\+\_\+display\+\_\+command\+\_\+line}!skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}}
\subsubsection[{skn\+\_\+handle\+\_\+display\+\_\+command\+\_\+line}]{\setlength{\rightskip}{0pt plus 5cm}int skn\+\_\+handle\+\_\+display\+\_\+command\+\_\+line (
\begin{DoxyParamCaption}
\item[{int}]{argc, }
\item[{char $\ast$$\ast$}]{argv}
\end{DoxyParamCaption}
)}}\label{skn__rpi__helpers_8c_aed93e422e5b2cd74ea04177db841fa37}


Definition at line 785 of file skn\+\_\+rpi\+\_\+helpers.\+c.



References gd\+\_\+ch\+\_\+program\+\_\+name, gd\+\_\+i\+\_\+cols, gd\+\_\+i\+\_\+debug, gd\+\_\+i\+\_\+i2c\+\_\+address, gd\+\_\+i\+\_\+rows, gd\+\_\+pch\+\_\+device\+\_\+name, gd\+\_\+pch\+\_\+message, gd\+\_\+pch\+\_\+serial\+\_\+port, P\+A\+C\+K\+A\+G\+E\+\_\+\+V\+E\+R\+S\+I\+O\+N, S\+D\+\_\+\+E\+R\+R, S\+D\+\_\+\+W\+A\+R\+N\+I\+N\+G, and skn\+\_\+display\+\_\+print\+\_\+usage().



Referenced by main().


\begin{DoxyCode}
785                                                            \{
786     \textcolor{keywordtype}{int} opt = 0;
787     \textcolor{keywordtype}{int} longindex = 0;
788     \textcolor{keyword}{struct }option longopts[] = \{
789             \{ \textcolor{stringliteral}{"debug"}, 1, NULL, \textcolor{charliteral}{'d'} \}, \textcolor{comment}{/* required param if */}
790             \{ \textcolor{stringliteral}{"rows"}, 1, NULL, \textcolor{charliteral}{'r'} \}, \textcolor{comment}{/* required param if */}
791             \{ \textcolor{stringliteral}{"cols"}, 1, NULL, \textcolor{charliteral}{'c'} \}, \textcolor{comment}{/* required param if */}
792             \{ \textcolor{stringliteral}{"message"}, 1, NULL, \textcolor{charliteral}{'m'} \}, \textcolor{comment}{/* required param if */}
793             \{ \textcolor{stringliteral}{"i2c-address"}, 1, NULL, \textcolor{charliteral}{'i'} \}, \textcolor{comment}{/* required param if */}
794             \{ \textcolor{stringliteral}{"12c-chipset"}, 1, NULL, \textcolor{charliteral}{'t'} \}, \textcolor{comment}{/* required param if */}
795             \{ \textcolor{stringliteral}{"serial-port"}, 1, NULL, \textcolor{charliteral}{'p'} \}, \textcolor{comment}{/* required param if */}
796             \{ \textcolor{stringliteral}{"version"}, 0, NULL, \textcolor{charliteral}{'v'} \}, \textcolor{comment}{/* set true if present */}
797             \{ \textcolor{stringliteral}{"help"}, 0, NULL, \textcolor{charliteral}{'h'} \}, \textcolor{comment}{/* set true if present */}
798             \{ 0, 0, 0, 0 \} \};
799 
800     \textcolor{comment}{/*}
801 \textcolor{comment}{     * Get commandline options}
802 \textcolor{comment}{     *  longindex is the current index into longopts}
803 \textcolor{comment}{     *  optind is current/last index into argv}
804 \textcolor{comment}{     *  optarg is value attached(-d88) or next element(-d 88) of argv}
805 \textcolor{comment}{     *  opterr flags a scanning error}
806 \textcolor{comment}{     */}
807     \textcolor{keywordflow}{while} ((opt = getopt\_long(argc, argv, \textcolor{stringliteral}{"d:m:r:c:i:t:p:vh"}, longopts, &longindex)) != -1) \{
808         \textcolor{keywordflow}{switch} (opt) \{
809             \textcolor{keywordflow}{case} \textcolor{charliteral}{'d'}:
810                 \textcolor{keywordflow}{if} (optarg) \{
811                     \hyperlink{skn__network__helpers_8c_a923b2adbdc0dac852905dc95eaa73a37}{gd\_i\_debug} = atoi(optarg);
812                 \} \textcolor{keywordflow}{else} \{
813                     skn\_logger(\hyperlink{skn__common__headers_8h_a29cd8395c2db41768436986ab7a666b3}{SD\_ERR}, \textcolor{stringliteral}{"%s: input param was invalid! %c[%d:%d:%d]\(\backslash\)n"}, 
      \hyperlink{skn__network__helpers_8c_a1849cb923d68be6854cc346022fc79d7}{gd\_ch\_program\_name}, (\textcolor{keywordtype}{char}) opt, longindex, optind,
814                                     opterr);
815                     \textcolor{keywordflow}{return} (EXIT\_FAILURE);
816                 \}
817                 \textcolor{keywordflow}{break};
818             \textcolor{keywordflow}{case} \textcolor{charliteral}{'r'}:
819                 \textcolor{keywordflow}{if} (optarg) \{
820                     \hyperlink{skn__rpi__helpers_8c_a3599398fb56285a3069b55791e6bb953}{gd\_i\_rows} = atoi(optarg);
821                     \textcolor{keywordflow}{switch} (\hyperlink{skn__rpi__helpers_8c_a3599398fb56285a3069b55791e6bb953}{gd\_i\_rows}) \{
822                         \textcolor{keywordflow}{case} 2:
823                         \textcolor{keywordflow}{case} 4:
824                             \textcolor{keywordflow}{break};
825                         \textcolor{keywordflow}{default}:
826                             \hyperlink{skn__rpi__helpers_8c_a3599398fb56285a3069b55791e6bb953}{gd\_i\_rows} = 4;
827                             skn\_logger(\hyperlink{skn__common__headers_8h_a1b84e50e89a48558f56175017017c375}{SD\_WARNING}, \textcolor{stringliteral}{"%s: input param was invalid! (default of 4
       used) %c[%d:%d:%d]\(\backslash\)n"}, \hyperlink{skn__network__helpers_8c_a1849cb923d68be6854cc346022fc79d7}{gd\_ch\_program\_name},
828                                             (\textcolor{keywordtype}{char}) opt, longindex, optind, opterr);
829 
830                     \}
831                 \} \textcolor{keywordflow}{else} \{
832                     skn\_logger(\hyperlink{skn__common__headers_8h_a29cd8395c2db41768436986ab7a666b3}{SD\_ERR}, \textcolor{stringliteral}{"%s: input param was invalid! %c[%d:%d:%d]\(\backslash\)n"}, 
      \hyperlink{skn__network__helpers_8c_a1849cb923d68be6854cc346022fc79d7}{gd\_ch\_program\_name}, (\textcolor{keywordtype}{char}) opt, longindex, optind,
833                                     opterr);
834                     \textcolor{keywordflow}{return} (EXIT\_FAILURE);
835                 \}
836                 \textcolor{keywordflow}{break};
837             \textcolor{keywordflow}{case} \textcolor{charliteral}{'c'}:
838                 \textcolor{keywordflow}{if} (optarg) \{
839                     \hyperlink{skn__rpi__helpers_8c_ac934aabd8dd134e724c62e1264afa549}{gd\_i\_cols} = atoi(optarg);
840                     \textcolor{keywordflow}{switch} (\hyperlink{skn__rpi__helpers_8c_ac934aabd8dd134e724c62e1264afa549}{gd\_i\_cols}) \{
841                         \textcolor{keywordflow}{case} 16:
842                         \textcolor{keywordflow}{case} 20:
843                             \textcolor{keywordflow}{break};
844                         \textcolor{keywordflow}{default}:
845                             \hyperlink{skn__rpi__helpers_8c_ac934aabd8dd134e724c62e1264afa549}{gd\_i\_cols} = 20;
846                             skn\_logger(\hyperlink{skn__common__headers_8h_a1b84e50e89a48558f56175017017c375}{SD\_WARNING}, \textcolor{stringliteral}{"%s: input param was invalid! (default of 20
       used) %c[%d:%d:%d]\(\backslash\)n"}, \hyperlink{skn__network__helpers_8c_a1849cb923d68be6854cc346022fc79d7}{gd\_ch\_program\_name},
847                                             (\textcolor{keywordtype}{char}) opt, longindex, optind, opterr);
848 
849                     \}
850                 \} \textcolor{keywordflow}{else} \{
851                     skn\_logger(\hyperlink{skn__common__headers_8h_a29cd8395c2db41768436986ab7a666b3}{SD\_ERR}, \textcolor{stringliteral}{"%s: input param was invalid! %c[%d:%d:%d]\(\backslash\)n"}, 
      \hyperlink{skn__network__helpers_8c_a1849cb923d68be6854cc346022fc79d7}{gd\_ch\_program\_name}, (\textcolor{keywordtype}{char}) opt, longindex, optind,
852                                     opterr);
853                     \textcolor{keywordflow}{return} (EXIT\_FAILURE);
854                 \}
855                 \textcolor{keywordflow}{break};
856             \textcolor{keywordflow}{case} \textcolor{charliteral}{'m'}:
857                 \textcolor{keywordflow}{if} (optarg) \{
858                     \hyperlink{skn__network__helpers_8c_a0bb2e7571c22c0455842aba8cf1d97dc}{gd\_pch\_message} = strdup(optarg);
859                 \} \textcolor{keywordflow}{else} \{
860                     skn\_logger(\hyperlink{skn__common__headers_8h_a29cd8395c2db41768436986ab7a666b3}{SD\_ERR}, \textcolor{stringliteral}{"%s: input param was invalid! %c[%d:%d:%d]\(\backslash\)n"}, 
      \hyperlink{skn__network__helpers_8c_a1849cb923d68be6854cc346022fc79d7}{gd\_ch\_program\_name}, (\textcolor{keywordtype}{char}) opt, longindex, optind,
861                                     opterr);
862                     \textcolor{keywordflow}{return} (EXIT\_FAILURE);
863                 \}
864                 \textcolor{keywordflow}{break};
865             \textcolor{keywordflow}{case} \textcolor{charliteral}{'i'}:
866                 \textcolor{keywordflow}{if} (optarg) \{
867                     \hyperlink{skn__network__helpers_8c_a2c55396bf337471f9f99a939974fcdbe}{gd\_i\_i2c\_address} = atoi(optarg);
868                 \} \textcolor{keywordflow}{else} \{
869                     skn\_logger(\hyperlink{skn__common__headers_8h_a29cd8395c2db41768436986ab7a666b3}{SD\_ERR}, \textcolor{stringliteral}{"%s: input param was invalid! %c[%d:%d:%d]\(\backslash\)n"}, 
      \hyperlink{skn__network__helpers_8c_a1849cb923d68be6854cc346022fc79d7}{gd\_ch\_program\_name}, (\textcolor{keywordtype}{char}) opt, longindex, optind,
870                                     opterr);
871                     \textcolor{keywordflow}{return} (EXIT\_FAILURE);
872                 \}
873                 \textcolor{keywordflow}{break};
874             \textcolor{keywordflow}{case} \textcolor{charliteral}{'t'}:
875                 \textcolor{keywordflow}{if} (optarg) \{
876                     \hyperlink{skn__rpi__helpers_8c_a236d69bc821c60a396d02099e92d22bb}{gd\_pch\_device\_name} = strdup(optarg);
877                     \textcolor{keywordflow}{if} ( (strcmp(\hyperlink{skn__rpi__helpers_8c_a236d69bc821c60a396d02099e92d22bb}{gd\_pch\_device\_name}, \textcolor{stringliteral}{"mcp"}) != 0) &&
878                          (strcmp(\hyperlink{skn__rpi__helpers_8c_a236d69bc821c60a396d02099e92d22bb}{gd\_pch\_device\_name}, \textcolor{stringliteral}{"mc7"}) != 0) &&
879                          (strcmp(\hyperlink{skn__rpi__helpers_8c_a236d69bc821c60a396d02099e92d22bb}{gd\_pch\_device\_name}, \textcolor{stringliteral}{"pcf"}) != 0) &&
880                          (strcmp(\hyperlink{skn__rpi__helpers_8c_a236d69bc821c60a396d02099e92d22bb}{gd\_pch\_device\_name}, \textcolor{stringliteral}{"ser"}) != 0)) \{
881                         skn\_logger(\hyperlink{skn__common__headers_8h_a29cd8395c2db41768436986ab7a666b3}{SD\_ERR}, \textcolor{stringliteral}{"%s: unsupported option was invalid! %c[%d:%d:%d] %s\(\backslash\)n"}, 
      \hyperlink{skn__network__helpers_8c_a1849cb923d68be6854cc346022fc79d7}{gd\_ch\_program\_name}, (\textcolor{keywordtype}{char}) opt, longindex, optind, opterr, 
      \hyperlink{skn__rpi__helpers_8c_a236d69bc821c60a396d02099e92d22bb}{gd\_pch\_device\_name});
882                         \textcolor{keywordflow}{return} EXIT\_FAILURE;
883                     \}
884                 \} \textcolor{keywordflow}{else} \{
885                     skn\_logger(\hyperlink{skn__common__headers_8h_a29cd8395c2db41768436986ab7a666b3}{SD\_ERR}, \textcolor{stringliteral}{"%s: input param was invalid! %c[%d:%d:%d]\(\backslash\)n"}, 
      \hyperlink{skn__network__helpers_8c_a1849cb923d68be6854cc346022fc79d7}{gd\_ch\_program\_name}, (\textcolor{keywordtype}{char}) opt, longindex, optind,
886                                     opterr);
887                     \textcolor{keywordflow}{return} (EXIT\_FAILURE);
888                 \}
889                 \textcolor{keywordflow}{break};
890             \textcolor{keywordflow}{case} \textcolor{charliteral}{'p'}:
891                 \textcolor{keywordflow}{if} (optarg) \{
892                     \hyperlink{skn__rpi__helpers_8c_aa8460852bd6c3559cc5ad4bd58806ba2}{gd\_pch\_serial\_port} = strdup(optarg);
893                     \textcolor{keywordflow}{if} (strlen(\hyperlink{skn__rpi__helpers_8c_aa8460852bd6c3559cc5ad4bd58806ba2}{gd\_pch\_serial\_port}) < 5) \{
894                         skn\_logger(\hyperlink{skn__common__headers_8h_a29cd8395c2db41768436986ab7a666b3}{SD\_ERR}, \textcolor{stringliteral}{"%s: input param was invalid! %c[%d:%d:%d]\(\backslash\)n"}, 
      \hyperlink{skn__network__helpers_8c_a1849cb923d68be6854cc346022fc79d7}{gd\_ch\_program\_name}, (\textcolor{keywordtype}{char}) opt, longindex, optind, opterr);
895                         \textcolor{keywordflow}{return} EXIT\_FAILURE;
896                     \}
897                 \} \textcolor{keywordflow}{else} \{
898                     skn\_logger(\hyperlink{skn__common__headers_8h_a29cd8395c2db41768436986ab7a666b3}{SD\_ERR}, \textcolor{stringliteral}{"%s: input param was invalid! %c[%d:%d:%d]\(\backslash\)n"}, 
      \hyperlink{skn__network__helpers_8c_a1849cb923d68be6854cc346022fc79d7}{gd\_ch\_program\_name}, (\textcolor{keywordtype}{char}) opt, longindex, optind, opterr);
899                     \textcolor{keywordflow}{return} (EXIT\_FAILURE);
900                 \}
901                 \textcolor{keywordflow}{break};
902             \textcolor{keywordflow}{case} \textcolor{charliteral}{'v'}:
903                 skn\_logger(\hyperlink{skn__common__headers_8h_a29cd8395c2db41768436986ab7a666b3}{SD\_ERR}, \textcolor{stringliteral}{"\(\backslash\)n\(\backslash\)tProgram => %s\(\backslash\)n\(\backslash\)tVersion => %s\(\backslash\)n\(\backslash\)tSkoona Development\(\backslash\)n\(\backslash\)t
      <skoona@gmail.com>\(\backslash\)n"}, \hyperlink{skn__network__helpers_8c_a1849cb923d68be6854cc346022fc79d7}{gd\_ch\_program\_name},
904                                 \hyperlink{cmd_d_c_8c_aa326a05d5e30f9e9a4bb0b4469d5d0c0}{PACKAGE\_VERSION});
905                 \textcolor{keywordflow}{return} (EXIT\_FAILURE);
906                 \textcolor{keywordflow}{break};
907             \textcolor{keywordflow}{case} \textcolor{charliteral}{'?'}:
908                 skn\_logger(\hyperlink{skn__common__headers_8h_a29cd8395c2db41768436986ab7a666b3}{SD\_ERR}, \textcolor{stringliteral}{"%s: unknown input param! %c[%d:%d:%d]\(\backslash\)n"}, 
      \hyperlink{skn__network__helpers_8c_a1849cb923d68be6854cc346022fc79d7}{gd\_ch\_program\_name}, (\textcolor{keywordtype}{char}) opt, longindex, optind, opterr);
909                 \hyperlink{skn__rpi__helpers_8c_aca7dfbde9be606bb7d177fb686b103f9}{skn\_display\_print\_usage}();
910                 \textcolor{keywordflow}{return} (EXIT\_FAILURE);
911                 \textcolor{keywordflow}{break};
912             \textcolor{keywordflow}{default}: \textcolor{comment}{/* help and default */}
913                 \hyperlink{skn__rpi__helpers_8c_aca7dfbde9be606bb7d177fb686b103f9}{skn\_display\_print\_usage}();
914                 \textcolor{keywordflow}{return} (EXIT\_FAILURE);
915                 \textcolor{keywordflow}{break};
916         \}
917     \}
918 
919     \textcolor{keywordflow}{return} EXIT\_SUCCESS;
920 \}
\end{DoxyCode}


Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=346pt]{skn__rpi__helpers_8c_aed93e422e5b2cd74ea04177db841fa37_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=258pt]{skn__rpi__helpers_8c_aed93e422e5b2cd74ea04177db841fa37_icgraph}
\end{center}
\end{figure}


\hypertarget{skn__rpi__helpers_8c_af2cd8436ec8dca06473441659fb03f75}{\index{skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}!skn\+\_\+scroller\+\_\+pad\+\_\+right@{skn\+\_\+scroller\+\_\+pad\+\_\+right}}
\index{skn\+\_\+scroller\+\_\+pad\+\_\+right@{skn\+\_\+scroller\+\_\+pad\+\_\+right}!skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}}
\subsubsection[{skn\+\_\+scroller\+\_\+pad\+\_\+right}]{\setlength{\rightskip}{0pt plus 5cm}char$\ast$ skn\+\_\+scroller\+\_\+pad\+\_\+right (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{buffer}
\end{DoxyParamCaption}
)}}\label{skn__rpi__helpers_8c_af2cd8436ec8dca06473441659fb03f75}
skn\+\_\+scroller\+\_\+pad\+\_\+right
\begin{DoxyItemize}
\item fills remaining with spaces and 0 terminates
\item buffer message to adjust 
\end{DoxyItemize}

Definition at line 367 of file skn\+\_\+rpi\+\_\+helpers.\+c.



References gd\+\_\+i\+\_\+cols.



Referenced by skn\+\_\+scroller\+\_\+scroll\+\_\+lines().


\begin{DoxyCode}
367                                             \{
368     \textcolor{keywordtype}{int} hIndex = 0;
369 
370     \textcolor{keywordflow}{for} (hIndex = strlen(buffer); hIndex < \hyperlink{skn__rpi__helpers_8c_ac934aabd8dd134e724c62e1264afa549}{gd\_i\_cols}; hIndex++) \{
371         buffer[hIndex] = \textcolor{charliteral}{' '};
372     \}
373     buffer[\hyperlink{skn__rpi__helpers_8c_ac934aabd8dd134e724c62e1264afa549}{gd\_i\_cols}] = 0;
374 
375     \textcolor{keywordflow}{return} buffer;
376 \}
\end{DoxyCode}


Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{skn__rpi__helpers_8c_af2cd8436ec8dca06473441659fb03f75_icgraph}
\end{center}
\end{figure}


\hypertarget{skn__rpi__helpers_8c_a4f78720f41ceb03e6b6111a358c7aea1}{\index{skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}!skn\+\_\+scroller\+\_\+scroll\+\_\+lines@{skn\+\_\+scroller\+\_\+scroll\+\_\+lines}}
\index{skn\+\_\+scroller\+\_\+scroll\+\_\+lines@{skn\+\_\+scroller\+\_\+scroll\+\_\+lines}!skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}}
\subsubsection[{skn\+\_\+scroller\+\_\+scroll\+\_\+lines}]{\setlength{\rightskip}{0pt plus 5cm}int skn\+\_\+scroller\+\_\+scroll\+\_\+lines (
\begin{DoxyParamCaption}
\item[{{\bf P\+Display\+Line}}]{pdl, }
\item[{int}]{lcd\+\_\+handle, }
\item[{int}]{line}
\end{DoxyParamCaption}
)}}\label{skn__rpi__helpers_8c_a4f78720f41ceb03e6b6111a358c7aea1}
Scrolls a single line across the lcd display
\begin{DoxyItemize}
\item best when wrapped in column chars on each side 
\end{DoxyItemize}

Definition at line 402 of file skn\+\_\+rpi\+\_\+helpers.\+c.



References \+\_\+\+D\+I\+S\+P\+L\+A\+Y\+\_\+\+L\+I\+N\+E\+::ch\+\_\+display\+\_\+msg, \+\_\+\+D\+I\+S\+P\+L\+A\+Y\+\_\+\+L\+I\+N\+E\+::display\+\_\+pos, gd\+\_\+i\+\_\+cols, gd\+\_\+pch\+\_\+device\+\_\+name, \+\_\+\+D\+I\+S\+P\+L\+A\+Y\+\_\+\+L\+I\+N\+E\+::msg\+\_\+len, skn\+\_\+scroller\+\_\+pad\+\_\+right(), and skn\+\_\+time\+\_\+delay\+\_\+ms().



Referenced by skn\+\_\+display\+\_\+manager\+\_\+do\+\_\+work().


\begin{DoxyCode}
403 \{
404     \textcolor{keywordtype}{char} buf[40];
405     \textcolor{keywordtype}{signed} \textcolor{keywordtype}{int} hAdjust = 0, mLen = 0, mfLen = 0;
406     \textcolor{keywordtype}{char} set\_col\_row\_position[] = \{0xfe, 0x47, 0x01, 0x01\};
407 
408     mLen = strlen(&(pdl->\hyperlink{struct___d_i_s_p_l_a_y___l_i_n_e_ae5fae9b599281d1d3f619b6e402e7c2c}{ch\_display\_msg}[pdl->\hyperlink{struct___d_i_s_p_l_a_y___l_i_n_e_af32b1aa2ce817c27695d7cd43db9364d}{display\_pos}]));
409     \textcolor{keywordflow}{if} (\hyperlink{skn__rpi__helpers_8c_ac934aabd8dd134e724c62e1264afa549}{gd\_i\_cols} < mLen) \{
410         mfLen = pdl->\hyperlink{struct___d_i_s_p_l_a_y___l_i_n_e_aa9cfa1dd3e90386f675fef61e711342e}{msg\_len};
411         hAdjust = (mfLen - \hyperlink{skn__rpi__helpers_8c_ac934aabd8dd134e724c62e1264afa549}{gd\_i\_cols});
412     \}
413 
414     snprintf(buf, \textcolor{keyword}{sizeof}(buf) - 1, \textcolor{stringliteral}{"%s"}, &(pdl->\hyperlink{struct___d_i_s_p_l_a_y___l_i_n_e_ae5fae9b599281d1d3f619b6e402e7c2c}{ch\_display\_msg}[pdl->
      \hyperlink{struct___d_i_s_p_l_a_y___l_i_n_e_af32b1aa2ce817c27695d7cd43db9364d}{display\_pos}]));
415     \hyperlink{skn__rpi__helpers_8c_af2cd8436ec8dca06473441659fb03f75}{skn\_scroller\_pad\_right}(buf);
416 
417     \textcolor{keywordflow}{if} (strcmp(\textcolor{stringliteral}{"ser"}, \hyperlink{skn__rpi__helpers_8c_a236d69bc821c60a396d02099e92d22bb}{gd\_pch\_device\_name}) == 0 ) \{
418         set\_col\_row\_position[3] = (\textcolor{keywordtype}{unsigned} int)line + 1;
419         write(lcd\_handle, set\_col\_row\_position, \textcolor{keyword}{sizeof}(set\_col\_row\_position));
420         \hyperlink{skn__network__helpers_8c_a11a06f22b7bdbf78e38d9a6f4d71fe8e}{skn\_time\_delay\_ms}(0.2); \textcolor{comment}{// delay(200);}
421         write(lcd\_handle, buf, \hyperlink{skn__rpi__helpers_8c_ac934aabd8dd134e724c62e1264afa549}{gd\_i\_cols} - 1);
422     \} \textcolor{keywordflow}{else} \{
423         lcdPosition(lcd\_handle, 0, line);
424         lcdPuts(lcd\_handle, buf);
425     \}
426     \textcolor{keywordflow}{if} (++pdl->\hyperlink{struct___d_i_s_p_l_a_y___l_i_n_e_af32b1aa2ce817c27695d7cd43db9364d}{display\_pos} > hAdjust) \{
427         pdl->\hyperlink{struct___d_i_s_p_l_a_y___l_i_n_e_af32b1aa2ce817c27695d7cd43db9364d}{display\_pos} = 0;
428     \}
429 
430     \textcolor{keywordflow}{return} pdl->\hyperlink{struct___d_i_s_p_l_a_y___l_i_n_e_af32b1aa2ce817c27695d7cd43db9364d}{display\_pos};
431 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=328pt]{skn__rpi__helpers_8c_a4f78720f41ceb03e6b6111a358c7aea1_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{skn__rpi__helpers_8c_a4f78720f41ceb03e6b6111a358c7aea1_icgraph}
\end{center}
\end{figure}


\hypertarget{skn__rpi__helpers_8c_ae945b3a41d43db4d0c52f522d663d415}{\index{skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}!skn\+\_\+scroller\+\_\+wrap\+\_\+blanks@{skn\+\_\+scroller\+\_\+wrap\+\_\+blanks}}
\index{skn\+\_\+scroller\+\_\+wrap\+\_\+blanks@{skn\+\_\+scroller\+\_\+wrap\+\_\+blanks}!skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}}
\subsubsection[{skn\+\_\+scroller\+\_\+wrap\+\_\+blanks}]{\setlength{\rightskip}{0pt plus 5cm}char$\ast$ skn\+\_\+scroller\+\_\+wrap\+\_\+blanks (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{buffer}
\end{DoxyParamCaption}
)}}\label{skn__rpi__helpers_8c_ae945b3a41d43db4d0c52f522d663d415}
skn\+\_\+scroller\+\_\+wrap\+\_\+blanks
\begin{DoxyItemize}
\item builds str with 20 chars in front, and 20 at right end 
\end{DoxyItemize}

Definition at line 382 of file skn\+\_\+rpi\+\_\+helpers.\+c.



References gd\+\_\+i\+\_\+cols, and S\+Z\+\_\+\+I\+N\+F\+O\+\_\+\+B\+U\+F\+F.



Referenced by skn\+\_\+display\+\_\+manager\+\_\+add\+\_\+line(), and skn\+\_\+display\+\_\+manager\+\_\+create().


\begin{DoxyCode}
382                                               \{
383     \textcolor{keywordtype}{char} worker[\hyperlink{cmd_d_c_8c_a442d5e93bd9c9d8eb4532aba62b5f86c}{SZ\_INFO\_BUFF}];
384     \textcolor{keywordtype}{char} col\_width\_padding[16];
385 
386     \textcolor{keywordflow}{if} (buffer == NULL || strlen(buffer) > \hyperlink{cmd_d_c_8c_a442d5e93bd9c9d8eb4532aba62b5f86c}{SZ\_INFO\_BUFF}) \{
387         \textcolor{keywordflow}{return} NULL;
388     \}
389 
390     snprintf(col\_width\_padding, 16, \textcolor{stringliteral}{"%%%ds%%s%%%ds"}, \hyperlink{skn__rpi__helpers_8c_ac934aabd8dd134e724c62e1264afa549}{gd\_i\_cols}, 
      \hyperlink{skn__rpi__helpers_8c_ac934aabd8dd134e724c62e1264afa549}{gd\_i\_cols});
391     snprintf(worker, (\hyperlink{cmd_d_c_8c_a442d5e93bd9c9d8eb4532aba62b5f86c}{SZ\_INFO\_BUFF} - 1), col\_width\_padding, \textcolor{stringliteral}{" "}, buffer, \textcolor{stringliteral}{" "});
392     memmove(buffer, worker, \hyperlink{cmd_d_c_8c_a442d5e93bd9c9d8eb4532aba62b5f86c}{SZ\_INFO\_BUFF}-1);
393     buffer[\hyperlink{cmd_d_c_8c_a442d5e93bd9c9d8eb4532aba62b5f86c}{SZ\_INFO\_BUFF} - 1] = 0;
394 
395     \textcolor{keywordflow}{return} buffer;
396 \}
\end{DoxyCode}


Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{skn__rpi__helpers_8c_ae945b3a41d43db4d0c52f522d663d415_icgraph}
\end{center}
\end{figure}




\subsection{Variable Documentation}
\hypertarget{skn__rpi__helpers_8c_ac934aabd8dd134e724c62e1264afa549}{\index{skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}!gd\+\_\+i\+\_\+cols@{gd\+\_\+i\+\_\+cols}}
\index{gd\+\_\+i\+\_\+cols@{gd\+\_\+i\+\_\+cols}!skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}}
\subsubsection[{gd\+\_\+i\+\_\+cols}]{\setlength{\rightskip}{0pt plus 5cm}int gd\+\_\+i\+\_\+cols = 20}}\label{skn__rpi__helpers_8c_ac934aabd8dd134e724c62e1264afa549}


Definition at line 12 of file skn\+\_\+rpi\+\_\+helpers.\+c.



Referenced by skn\+\_\+display\+\_\+manager\+\_\+add\+\_\+line(), skn\+\_\+display\+\_\+manager\+\_\+create(), skn\+\_\+handle\+\_\+display\+\_\+command\+\_\+line(), skn\+\_\+scroller\+\_\+pad\+\_\+right(), skn\+\_\+scroller\+\_\+scroll\+\_\+lines(), and skn\+\_\+scroller\+\_\+wrap\+\_\+blanks().

\hypertarget{skn__rpi__helpers_8c_a3599398fb56285a3069b55791e6bb953}{\index{skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}!gd\+\_\+i\+\_\+rows@{gd\+\_\+i\+\_\+rows}}
\index{gd\+\_\+i\+\_\+rows@{gd\+\_\+i\+\_\+rows}!skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}}
\subsubsection[{gd\+\_\+i\+\_\+rows}]{\setlength{\rightskip}{0pt plus 5cm}int gd\+\_\+i\+\_\+rows = 4}}\label{skn__rpi__helpers_8c_a3599398fb56285a3069b55791e6bb953}
\hyperlink{skn__rpi__helpers_8c}{skn\+\_\+rpi\+\_\+helpers.\+c} 

Definition at line 11 of file skn\+\_\+rpi\+\_\+helpers.\+c.



Referenced by skn\+\_\+display\+\_\+manager\+\_\+create(), and skn\+\_\+handle\+\_\+display\+\_\+command\+\_\+line().

\hypertarget{skn__rpi__helpers_8c_a236d69bc821c60a396d02099e92d22bb}{\index{skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}!gd\+\_\+pch\+\_\+device\+\_\+name@{gd\+\_\+pch\+\_\+device\+\_\+name}}
\index{gd\+\_\+pch\+\_\+device\+\_\+name@{gd\+\_\+pch\+\_\+device\+\_\+name}!skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}}
\subsubsection[{gd\+\_\+pch\+\_\+device\+\_\+name}]{\setlength{\rightskip}{0pt plus 5cm}char$\ast$ gd\+\_\+pch\+\_\+device\+\_\+name = \char`\"{}pcf\char`\"{}}}\label{skn__rpi__helpers_8c_a236d69bc821c60a396d02099e92d22bb}


Definition at line 14 of file skn\+\_\+rpi\+\_\+helpers.\+c.



Referenced by skn\+\_\+device\+\_\+manager\+\_\+init\+\_\+i2c(), skn\+\_\+device\+\_\+manager\+\_\+\+L\+C\+D\+\_\+shutdown(), skn\+\_\+display\+\_\+manager\+\_\+do\+\_\+work(), skn\+\_\+handle\+\_\+display\+\_\+command\+\_\+line(), and skn\+\_\+scroller\+\_\+scroll\+\_\+lines().

\hypertarget{skn__rpi__helpers_8c_aa8460852bd6c3559cc5ad4bd58806ba2}{\index{skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}!gd\+\_\+pch\+\_\+serial\+\_\+port@{gd\+\_\+pch\+\_\+serial\+\_\+port}}
\index{gd\+\_\+pch\+\_\+serial\+\_\+port@{gd\+\_\+pch\+\_\+serial\+\_\+port}!skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}}
\subsubsection[{gd\+\_\+pch\+\_\+serial\+\_\+port}]{\setlength{\rightskip}{0pt plus 5cm}char$\ast$ gd\+\_\+pch\+\_\+serial\+\_\+port}}\label{skn__rpi__helpers_8c_aa8460852bd6c3559cc5ad4bd58806ba2}


Definition at line 13 of file skn\+\_\+rpi\+\_\+helpers.\+c.



Referenced by skn\+\_\+device\+\_\+manager\+\_\+\+Serial\+Port(), and skn\+\_\+handle\+\_\+display\+\_\+command\+\_\+line().

\hypertarget{skn__rpi__helpers_8c_ab1d9c73f13a8c60f54b1df15a34a8e64}{\index{skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}!gp\+\_\+structure\+\_\+pdm@{gp\+\_\+structure\+\_\+pdm}}
\index{gp\+\_\+structure\+\_\+pdm@{gp\+\_\+structure\+\_\+pdm}!skn\+\_\+rpi\+\_\+helpers.\+c@{skn\+\_\+rpi\+\_\+helpers.\+c}}
\subsubsection[{gp\+\_\+structure\+\_\+pdm}]{\setlength{\rightskip}{0pt plus 5cm}{\bf P\+Display\+Manager} gp\+\_\+structure\+\_\+pdm = N\+U\+L\+L}}\label{skn__rpi__helpers_8c_ab1d9c73f13a8c60f54b1df15a34a8e64}


Definition at line 15 of file skn\+\_\+rpi\+\_\+helpers.\+c.



Referenced by skn\+\_\+get\+\_\+display\+\_\+manager\+\_\+ref().

