\hypertarget{a2d__display__client_8c}{}\section{src/a2d\+\_\+display\+\_\+client.c File Reference}
\label{a2d__display__client_8c}\index{src/a2d\+\_\+display\+\_\+client.\+c@{src/a2d\+\_\+display\+\_\+client.\+c}}
{\ttfamily \#include \char`\"{}skn\+\_\+network\+\_\+helpers.\+h\char`\"{}}\\*
{\ttfamily \#include $<$wiring\+Pi.\+h$>$}\\*
{\ttfamily \#include $<$pcf8591.\+h$>$}\\*
{\ttfamily \#include $<$math.\+h$>$}\\*
Include dependency graph for a2d\+\_\+display\+\_\+client.\+c\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{a2d__display__client_8c__incl}
\end{center}
\end{figure}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{a2d__display__client_8c_a156bd70d435f8481617cc0d840035e79}{A2\+D\+\_\+\+B\+A\+SE}~120
\item 
\#define \hyperlink{a2d__display__client_8c_aeb7a7ba1ab7e0406f1b5ab36d579f585}{L\+ED}~120
\item 
\#define \hyperlink{a2d__display__client_8c_adfc0e9974672ef9d4586914fff4d92cd}{A2\+D\+\_\+\+T\+H\+E\+RM}~\hyperlink{a2d__display__client_8c_a156bd70d435f8481617cc0d840035e79}{A2\+D\+\_\+\+B\+A\+SE} + 2
\item 
\#define \hyperlink{a2d__display__client_8c_acb5e01429d74da87520e69fe799c5539}{A2\+D\+\_\+\+P\+H\+O\+TO}~\hyperlink{a2d__display__client_8c_a156bd70d435f8481617cc0d840035e79}{A2\+D\+\_\+\+B\+A\+SE} + 3
\item 
\#define \hyperlink{a2d__display__client_8c_a38f2d877dee7ea0fbb35efd14ee2ca42}{T\+H\+E\+R\+M\+I\+S\+T\+O\+R\+N\+O\+M\+I\+N\+AL}~10000
\item 
\#define \hyperlink{a2d__display__client_8c_ad131decb98217dffe7e5c6d0f7fcb453}{T\+E\+M\+P\+E\+R\+A\+T\+U\+R\+E\+N\+O\+M\+I\+N\+AL}~25
\item 
\#define \hyperlink{a2d__display__client_8c_a4ea9e58bc3ede78b23d4ed2f84f8ef97}{B\+C\+O\+E\+F\+F\+I\+C\+I\+E\+NT}~4207.\+0
\item 
\#define \hyperlink{a2d__display__client_8c_aeda514ffe2696b78d945bc12a07b63cf}{S\+E\+R\+I\+E\+S\+R\+E\+S\+I\+S\+T\+OR}~10240
\item 
\#define \hyperlink{a2d__display__client_8c_a4b08c72616ef13b4a37b0fb43e01f764}{A2\+D\+\_\+\+P\+E\+R\+C\+I\+S\+I\+ON}~255.\+0
\item 
\#define \hyperlink{a2d__display__client_8c_a5b0f85621d68fce04356f6b48203bc53}{M\+A\+X\+R\+E\+A\+DS}~5
\item 
\#define \hyperlink{a2d__display__client_8c_ac57d650719d4c72194f299ad3b94a081}{sA}~1.\+129148\+E-\/03
\item 
\#define \hyperlink{a2d__display__client_8c_a35e231d3a6c6cbf62f161a3fec404e0a}{sB}~2.\+34125\+E-\/04
\item 
\#define \hyperlink{a2d__display__client_8c_a6ef862c3f1ecec0fe90a62f7251e4ef7}{sC}~8.\+76741\+E-\/08
\item 
\#define \hyperlink{a2d__display__client_8c_af4fe1994dbd2d2dea75604050851378c}{calibration\+Offset}~-\/0.\+5
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
double \hyperlink{a2d__display__client_8c_a935f6a4b5fc20d0727532f09a2ab7ed7}{adc\+To\+Ohms} (int raw\+A\+DC)
\item 
double \hyperlink{a2d__display__client_8c_a7103c23f637c6c8710a0766e61a8e436}{steinhart\+Adc\+To\+Celsius} (int raw\+A\+DC)
\item 
double \hyperlink{a2d__display__client_8c_a14b82aad0ea6a4e3999d5e91f76d409d}{beta\+Adc\+To\+Celsius} (int raw\+A\+DC)
\item 
double \hyperlink{a2d__display__client_8c_a0d9c1f78de300df3a47682ad0145c74c}{read\+Average\+Sensor\+Value} (int sensor)
\item 
int \hyperlink{a2d__display__client_8c_aa3e4c4ec57381e265a116d7a874e22c6}{skn\+Get\+Module\+Temp} (char $\ast$buffer)
\item 
int \hyperlink{a2d__display__client_8c_a11856a55dede9d8199ca0ad08d10d4b5}{skn\+Get\+Module\+Bright} (char $\ast$buffer)
\item 
int \hyperlink{a2d__display__client_8c_a0ddf1224851353fc92bfbff6f499fa97}{main} (int argc, char $\ast$argv\mbox{[}$\,$\mbox{]})
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\index{a2d\+\_\+display\+\_\+client.\+c@{a2d\+\_\+display\+\_\+client.\+c}!A2\+D\+\_\+\+B\+A\+SE@{A2\+D\+\_\+\+B\+A\+SE}}
\index{A2\+D\+\_\+\+B\+A\+SE@{A2\+D\+\_\+\+B\+A\+SE}!a2d\+\_\+display\+\_\+client.\+c@{a2d\+\_\+display\+\_\+client.\+c}}
\subsubsection[{\texorpdfstring{A2\+D\+\_\+\+B\+A\+SE}{A2D_BASE}}]{\setlength{\rightskip}{0pt plus 5cm}\#define A2\+D\+\_\+\+B\+A\+SE~120}\hypertarget{a2d__display__client_8c_a156bd70d435f8481617cc0d840035e79}{}\label{a2d__display__client_8c_a156bd70d435f8481617cc0d840035e79}
\hyperlink{a2d__display__client_8c}{a2d\+\_\+display\+\_\+client.\+c}
\begin{DoxyItemize}
\item Display Room Temperature Client Supports$\ast$$\ast$ for \href{http://www.amazon.com/Shield-Module-For-Raspberry-Arduino/dp/B00WGW48A8}{\tt \textquotesingle{}AD / DA Shield Module For Raspberry Pi\textquotesingle{}}
\end{DoxyItemize}

which is based on the I2C controller {\itshape P\+C\+F8591T} to access\+:
\begin{DoxyItemize}
\item -\/ on-\/board temperature sensor; {\itshape N\+TC, M\+F58103\+J3950, B value 3950K, 1 K ohm 5\% Cantherm}
\item -\/ on-\/board light sensors; {\itshape G\+L5537-\/1 CdS Photoresistor}
\item example\+: $\ast$$\ast$\+\_\+a2d\+\_\+display\+\_\+client -\/i 73\+\_\+$\ast$$\ast$ 
\end{DoxyItemize}

Definition at line 17 of file a2d\+\_\+display\+\_\+client.\+c.



Referenced by main().

\index{a2d\+\_\+display\+\_\+client.\+c@{a2d\+\_\+display\+\_\+client.\+c}!A2\+D\+\_\+\+P\+E\+R\+C\+I\+S\+I\+ON@{A2\+D\+\_\+\+P\+E\+R\+C\+I\+S\+I\+ON}}
\index{A2\+D\+\_\+\+P\+E\+R\+C\+I\+S\+I\+ON@{A2\+D\+\_\+\+P\+E\+R\+C\+I\+S\+I\+ON}!a2d\+\_\+display\+\_\+client.\+c@{a2d\+\_\+display\+\_\+client.\+c}}
\subsubsection[{\texorpdfstring{A2\+D\+\_\+\+P\+E\+R\+C\+I\+S\+I\+ON}{A2D_PERCISION}}]{\setlength{\rightskip}{0pt plus 5cm}\#define A2\+D\+\_\+\+P\+E\+R\+C\+I\+S\+I\+ON~255.\+0}\hypertarget{a2d__display__client_8c_a4b08c72616ef13b4a37b0fb43e01f764}{}\label{a2d__display__client_8c_a4b08c72616ef13b4a37b0fb43e01f764}


Definition at line 34 of file a2d\+\_\+display\+\_\+client.\+c.



Referenced by adc\+To\+Ohms().

\index{a2d\+\_\+display\+\_\+client.\+c@{a2d\+\_\+display\+\_\+client.\+c}!A2\+D\+\_\+\+P\+H\+O\+TO@{A2\+D\+\_\+\+P\+H\+O\+TO}}
\index{A2\+D\+\_\+\+P\+H\+O\+TO@{A2\+D\+\_\+\+P\+H\+O\+TO}!a2d\+\_\+display\+\_\+client.\+c@{a2d\+\_\+display\+\_\+client.\+c}}
\subsubsection[{\texorpdfstring{A2\+D\+\_\+\+P\+H\+O\+TO}{A2D_PHOTO}}]{\setlength{\rightskip}{0pt plus 5cm}\#define A2\+D\+\_\+\+P\+H\+O\+TO~{\bf A2\+D\+\_\+\+B\+A\+SE} + 3}\hypertarget{a2d__display__client_8c_acb5e01429d74da87520e69fe799c5539}{}\label{a2d__display__client_8c_acb5e01429d74da87520e69fe799c5539}


Definition at line 20 of file a2d\+\_\+display\+\_\+client.\+c.



Referenced by skn\+Get\+Module\+Bright().

\index{a2d\+\_\+display\+\_\+client.\+c@{a2d\+\_\+display\+\_\+client.\+c}!A2\+D\+\_\+\+T\+H\+E\+RM@{A2\+D\+\_\+\+T\+H\+E\+RM}}
\index{A2\+D\+\_\+\+T\+H\+E\+RM@{A2\+D\+\_\+\+T\+H\+E\+RM}!a2d\+\_\+display\+\_\+client.\+c@{a2d\+\_\+display\+\_\+client.\+c}}
\subsubsection[{\texorpdfstring{A2\+D\+\_\+\+T\+H\+E\+RM}{A2D_THERM}}]{\setlength{\rightskip}{0pt plus 5cm}\#define A2\+D\+\_\+\+T\+H\+E\+RM~{\bf A2\+D\+\_\+\+B\+A\+SE} + 2}\hypertarget{a2d__display__client_8c_adfc0e9974672ef9d4586914fff4d92cd}{}\label{a2d__display__client_8c_adfc0e9974672ef9d4586914fff4d92cd}


Definition at line 19 of file a2d\+\_\+display\+\_\+client.\+c.



Referenced by skn\+Get\+Module\+Temp().

\index{a2d\+\_\+display\+\_\+client.\+c@{a2d\+\_\+display\+\_\+client.\+c}!B\+C\+O\+E\+F\+F\+I\+C\+I\+E\+NT@{B\+C\+O\+E\+F\+F\+I\+C\+I\+E\+NT}}
\index{B\+C\+O\+E\+F\+F\+I\+C\+I\+E\+NT@{B\+C\+O\+E\+F\+F\+I\+C\+I\+E\+NT}!a2d\+\_\+display\+\_\+client.\+c@{a2d\+\_\+display\+\_\+client.\+c}}
\subsubsection[{\texorpdfstring{B\+C\+O\+E\+F\+F\+I\+C\+I\+E\+NT}{BCOEFFICIENT}}]{\setlength{\rightskip}{0pt plus 5cm}\#define B\+C\+O\+E\+F\+F\+I\+C\+I\+E\+NT~4207.\+0}\hypertarget{a2d__display__client_8c_a4ea9e58bc3ede78b23d4ed2f84f8ef97}{}\label{a2d__display__client_8c_a4ea9e58bc3ede78b23d4ed2f84f8ef97}


Definition at line 30 of file a2d\+\_\+display\+\_\+client.\+c.



Referenced by beta\+Adc\+To\+Celsius().

\index{a2d\+\_\+display\+\_\+client.\+c@{a2d\+\_\+display\+\_\+client.\+c}!calibration\+Offset@{calibration\+Offset}}
\index{calibration\+Offset@{calibration\+Offset}!a2d\+\_\+display\+\_\+client.\+c@{a2d\+\_\+display\+\_\+client.\+c}}
\subsubsection[{\texorpdfstring{calibration\+Offset}{calibrationOffset}}]{\setlength{\rightskip}{0pt plus 5cm}\#define calibration\+Offset~-\/0.\+5}\hypertarget{a2d__display__client_8c_af4fe1994dbd2d2dea75604050851378c}{}\label{a2d__display__client_8c_af4fe1994dbd2d2dea75604050851378c}


Definition at line 43 of file a2d\+\_\+display\+\_\+client.\+c.



Referenced by beta\+Adc\+To\+Celsius(), and steinhart\+Adc\+To\+Celsius().

\index{a2d\+\_\+display\+\_\+client.\+c@{a2d\+\_\+display\+\_\+client.\+c}!L\+ED@{L\+ED}}
\index{L\+ED@{L\+ED}!a2d\+\_\+display\+\_\+client.\+c@{a2d\+\_\+display\+\_\+client.\+c}}
\subsubsection[{\texorpdfstring{L\+ED}{LED}}]{\setlength{\rightskip}{0pt plus 5cm}\#define L\+ED~120}\hypertarget{a2d__display__client_8c_aeb7a7ba1ab7e0406f1b5ab36d579f585}{}\label{a2d__display__client_8c_aeb7a7ba1ab7e0406f1b5ab36d579f585}


Definition at line 18 of file a2d\+\_\+display\+\_\+client.\+c.



Referenced by main().

\index{a2d\+\_\+display\+\_\+client.\+c@{a2d\+\_\+display\+\_\+client.\+c}!M\+A\+X\+R\+E\+A\+DS@{M\+A\+X\+R\+E\+A\+DS}}
\index{M\+A\+X\+R\+E\+A\+DS@{M\+A\+X\+R\+E\+A\+DS}!a2d\+\_\+display\+\_\+client.\+c@{a2d\+\_\+display\+\_\+client.\+c}}
\subsubsection[{\texorpdfstring{M\+A\+X\+R\+E\+A\+DS}{MAXREADS}}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+A\+X\+R\+E\+A\+DS~5}\hypertarget{a2d__display__client_8c_a5b0f85621d68fce04356f6b48203bc53}{}\label{a2d__display__client_8c_a5b0f85621d68fce04356f6b48203bc53}


Definition at line 36 of file a2d\+\_\+display\+\_\+client.\+c.



Referenced by read\+Average\+Sensor\+Value().

\index{a2d\+\_\+display\+\_\+client.\+c@{a2d\+\_\+display\+\_\+client.\+c}!sA@{sA}}
\index{sA@{sA}!a2d\+\_\+display\+\_\+client.\+c@{a2d\+\_\+display\+\_\+client.\+c}}
\subsubsection[{\texorpdfstring{sA}{sA}}]{\setlength{\rightskip}{0pt plus 5cm}\#define sA~1.\+129148\+E-\/03}\hypertarget{a2d__display__client_8c_ac57d650719d4c72194f299ad3b94a081}{}\label{a2d__display__client_8c_ac57d650719d4c72194f299ad3b94a081}


Definition at line 40 of file a2d\+\_\+display\+\_\+client.\+c.



Referenced by steinhart\+Adc\+To\+Celsius().

\index{a2d\+\_\+display\+\_\+client.\+c@{a2d\+\_\+display\+\_\+client.\+c}!sB@{sB}}
\index{sB@{sB}!a2d\+\_\+display\+\_\+client.\+c@{a2d\+\_\+display\+\_\+client.\+c}}
\subsubsection[{\texorpdfstring{sB}{sB}}]{\setlength{\rightskip}{0pt plus 5cm}\#define sB~2.\+34125\+E-\/04}\hypertarget{a2d__display__client_8c_a35e231d3a6c6cbf62f161a3fec404e0a}{}\label{a2d__display__client_8c_a35e231d3a6c6cbf62f161a3fec404e0a}


Definition at line 41 of file a2d\+\_\+display\+\_\+client.\+c.



Referenced by steinhart\+Adc\+To\+Celsius().

\index{a2d\+\_\+display\+\_\+client.\+c@{a2d\+\_\+display\+\_\+client.\+c}!sC@{sC}}
\index{sC@{sC}!a2d\+\_\+display\+\_\+client.\+c@{a2d\+\_\+display\+\_\+client.\+c}}
\subsubsection[{\texorpdfstring{sC}{sC}}]{\setlength{\rightskip}{0pt plus 5cm}\#define sC~8.\+76741\+E-\/08}\hypertarget{a2d__display__client_8c_a6ef862c3f1ecec0fe90a62f7251e4ef7}{}\label{a2d__display__client_8c_a6ef862c3f1ecec0fe90a62f7251e4ef7}


Definition at line 42 of file a2d\+\_\+display\+\_\+client.\+c.



Referenced by steinhart\+Adc\+To\+Celsius().

\index{a2d\+\_\+display\+\_\+client.\+c@{a2d\+\_\+display\+\_\+client.\+c}!S\+E\+R\+I\+E\+S\+R\+E\+S\+I\+S\+T\+OR@{S\+E\+R\+I\+E\+S\+R\+E\+S\+I\+S\+T\+OR}}
\index{S\+E\+R\+I\+E\+S\+R\+E\+S\+I\+S\+T\+OR@{S\+E\+R\+I\+E\+S\+R\+E\+S\+I\+S\+T\+OR}!a2d\+\_\+display\+\_\+client.\+c@{a2d\+\_\+display\+\_\+client.\+c}}
\subsubsection[{\texorpdfstring{S\+E\+R\+I\+E\+S\+R\+E\+S\+I\+S\+T\+OR}{SERIESRESISTOR}}]{\setlength{\rightskip}{0pt plus 5cm}\#define S\+E\+R\+I\+E\+S\+R\+E\+S\+I\+S\+T\+OR~10240}\hypertarget{a2d__display__client_8c_aeda514ffe2696b78d945bc12a07b63cf}{}\label{a2d__display__client_8c_aeda514ffe2696b78d945bc12a07b63cf}


Definition at line 32 of file a2d\+\_\+display\+\_\+client.\+c.



Referenced by adc\+To\+Ohms().

\index{a2d\+\_\+display\+\_\+client.\+c@{a2d\+\_\+display\+\_\+client.\+c}!T\+E\+M\+P\+E\+R\+A\+T\+U\+R\+E\+N\+O\+M\+I\+N\+AL@{T\+E\+M\+P\+E\+R\+A\+T\+U\+R\+E\+N\+O\+M\+I\+N\+AL}}
\index{T\+E\+M\+P\+E\+R\+A\+T\+U\+R\+E\+N\+O\+M\+I\+N\+AL@{T\+E\+M\+P\+E\+R\+A\+T\+U\+R\+E\+N\+O\+M\+I\+N\+AL}!a2d\+\_\+display\+\_\+client.\+c@{a2d\+\_\+display\+\_\+client.\+c}}
\subsubsection[{\texorpdfstring{T\+E\+M\+P\+E\+R\+A\+T\+U\+R\+E\+N\+O\+M\+I\+N\+AL}{TEMPERATURENOMINAL}}]{\setlength{\rightskip}{0pt plus 5cm}\#define T\+E\+M\+P\+E\+R\+A\+T\+U\+R\+E\+N\+O\+M\+I\+N\+AL~25}\hypertarget{a2d__display__client_8c_ad131decb98217dffe7e5c6d0f7fcb453}{}\label{a2d__display__client_8c_ad131decb98217dffe7e5c6d0f7fcb453}


Definition at line 28 of file a2d\+\_\+display\+\_\+client.\+c.



Referenced by beta\+Adc\+To\+Celsius().

\index{a2d\+\_\+display\+\_\+client.\+c@{a2d\+\_\+display\+\_\+client.\+c}!T\+H\+E\+R\+M\+I\+S\+T\+O\+R\+N\+O\+M\+I\+N\+AL@{T\+H\+E\+R\+M\+I\+S\+T\+O\+R\+N\+O\+M\+I\+N\+AL}}
\index{T\+H\+E\+R\+M\+I\+S\+T\+O\+R\+N\+O\+M\+I\+N\+AL@{T\+H\+E\+R\+M\+I\+S\+T\+O\+R\+N\+O\+M\+I\+N\+AL}!a2d\+\_\+display\+\_\+client.\+c@{a2d\+\_\+display\+\_\+client.\+c}}
\subsubsection[{\texorpdfstring{T\+H\+E\+R\+M\+I\+S\+T\+O\+R\+N\+O\+M\+I\+N\+AL}{THERMISTORNOMINAL}}]{\setlength{\rightskip}{0pt plus 5cm}\#define T\+H\+E\+R\+M\+I\+S\+T\+O\+R\+N\+O\+M\+I\+N\+AL~10000}\hypertarget{a2d__display__client_8c_a38f2d877dee7ea0fbb35efd14ee2ca42}{}\label{a2d__display__client_8c_a38f2d877dee7ea0fbb35efd14ee2ca42}


Definition at line 26 of file a2d\+\_\+display\+\_\+client.\+c.



Referenced by beta\+Adc\+To\+Celsius().



\subsection{Function Documentation}
\index{a2d\+\_\+display\+\_\+client.\+c@{a2d\+\_\+display\+\_\+client.\+c}!adc\+To\+Ohms@{adc\+To\+Ohms}}
\index{adc\+To\+Ohms@{adc\+To\+Ohms}!a2d\+\_\+display\+\_\+client.\+c@{a2d\+\_\+display\+\_\+client.\+c}}
\subsubsection[{\texorpdfstring{adc\+To\+Ohms(int raw\+A\+D\+C)}{adcToOhms(int rawADC)}}]{\setlength{\rightskip}{0pt plus 5cm}double adc\+To\+Ohms (
\begin{DoxyParamCaption}
\item[{int}]{raw\+A\+DC}
\end{DoxyParamCaption}
)}\hypertarget{a2d__display__client_8c_a935f6a4b5fc20d0727532f09a2ab7ed7}{}\label{a2d__display__client_8c_a935f6a4b5fc20d0727532f09a2ab7ed7}
Convert raw\+A\+DC into Ohms 

Definition at line 48 of file a2d\+\_\+display\+\_\+client.\+c.



References A2\+D\+\_\+\+P\+E\+R\+C\+I\+S\+I\+ON, and S\+E\+R\+I\+E\+S\+R\+E\+S\+I\+S\+T\+OR.



Referenced by beta\+Adc\+To\+Celsius(), and steinhart\+Adc\+To\+Celsius().


\begin{DoxyCode}
48                                \{
49   \textcolor{keywordtype}{double} resistance = 0.0;
50 
51   resistance = (double)(( \hyperlink{a2d__display__client_8c_a4b08c72616ef13b4a37b0fb43e01f764}{A2D\_PERCISION} / rawADC) - 1.0);
52   resistance = (double)( \hyperlink{a2d__display__client_8c_aeda514ffe2696b78d945bc12a07b63cf}{SERIESRESISTOR} / resistance );
53 
54   \textcolor{keywordflow}{return} resistance;
55 \}
\end{DoxyCode}


Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{a2d__display__client_8c_a935f6a4b5fc20d0727532f09a2ab7ed7_icgraph}
\end{center}
\end{figure}


\index{a2d\+\_\+display\+\_\+client.\+c@{a2d\+\_\+display\+\_\+client.\+c}!beta\+Adc\+To\+Celsius@{beta\+Adc\+To\+Celsius}}
\index{beta\+Adc\+To\+Celsius@{beta\+Adc\+To\+Celsius}!a2d\+\_\+display\+\_\+client.\+c@{a2d\+\_\+display\+\_\+client.\+c}}
\subsubsection[{\texorpdfstring{beta\+Adc\+To\+Celsius(int raw\+A\+D\+C)}{betaAdcToCelsius(int rawADC)}}]{\setlength{\rightskip}{0pt plus 5cm}double beta\+Adc\+To\+Celsius (
\begin{DoxyParamCaption}
\item[{int}]{raw\+A\+DC}
\end{DoxyParamCaption}
)}\hypertarget{a2d__display__client_8c_a14b82aad0ea6a4e3999d5e91f76d409d}{}\label{a2d__display__client_8c_a14b82aad0ea6a4e3999d5e91f76d409d}
Inputs A\+DC Value from Thermistor and outputs Temperature in Celsius

Utilizes the Beta Factor Equation\+: 1/T = 1/\+To + 1/B $\ast$ ln(R/\+Ro) I\textquotesingle{}m concerned about R1, in resistance, which is really 1K not 10K \href{https://learn.adafruit.com/thermistor/using-a-thermistor}{\tt https\+://learn.\+adafruit.\+com/thermistor/using-\/a-\/thermistor} 

Definition at line 87 of file a2d\+\_\+display\+\_\+client.\+c.



References adc\+To\+Ohms(), B\+C\+O\+E\+F\+F\+I\+C\+I\+E\+NT, calibration\+Offset, T\+E\+M\+P\+E\+R\+A\+T\+U\+R\+E\+N\+O\+M\+I\+N\+AL, and T\+H\+E\+R\+M\+I\+S\+T\+O\+R\+N\+O\+M\+I\+N\+AL.


\begin{DoxyCode}
87                                     \{
88   \textcolor{keywordtype}{double} kelvin = 0.0, celsius = 0.0;
89 
90   kelvin = \hyperlink{a2d__display__client_8c_a935f6a4b5fc20d0727532f09a2ab7ed7}{adcToOhms}(rawADC) / \hyperlink{a2d__display__client_8c_a38f2d877dee7ea0fbb35efd14ee2ca42}{THERMISTORNOMINAL};  \textcolor{comment}{// (R/Ro)}
91   kelvin = log(kelvin);                            \textcolor{comment}{// ln(R/Ro)}
92   kelvin /= \hyperlink{a2d__display__client_8c_a4ea9e58bc3ede78b23d4ed2f84f8ef97}{BCOEFFICIENT};                          \textcolor{comment}{// 1/B * ln(R/Ro)}
93   kelvin += 1.0 / (\hyperlink{a2d__display__client_8c_ad131decb98217dffe7e5c6d0f7fcb453}{TEMPERATURENOMINAL} + 273.15);   \textcolor{comment}{// + (1/To)}
94   kelvin = 1.0 / kelvin;                           \textcolor{comment}{// Invert}
95 
96   celsius = kelvin - 273.15;                       \textcolor{comment}{// convert to C from Kelvins}
97 
98   \textcolor{keywordflow}{return} celsius + \hyperlink{a2d__display__client_8c_af4fe1994dbd2d2dea75604050851378c}{calibrationOffset}; \textcolor{comment}{// Return the Temperature in C, with correction
       offset}
99 \}
\end{DoxyCode}


Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=281pt]{a2d__display__client_8c_a14b82aad0ea6a4e3999d5e91f76d409d_cgraph}
\end{center}
\end{figure}


\index{a2d\+\_\+display\+\_\+client.\+c@{a2d\+\_\+display\+\_\+client.\+c}!main@{main}}
\index{main@{main}!a2d\+\_\+display\+\_\+client.\+c@{a2d\+\_\+display\+\_\+client.\+c}}
\subsubsection[{\texorpdfstring{main(int argc, char $\ast$argv[])}{main(int argc, char *argv[])}}]{\setlength{\rightskip}{0pt plus 5cm}int main (
\begin{DoxyParamCaption}
\item[{int}]{argc, }
\item[{char $\ast$}]{argv\mbox{[}$\,$\mbox{]}}
\end{DoxyParamCaption}
)}\hypertarget{a2d__display__client_8c_a0ddf1224851353fc92bfbff6f499fa97}{}\label{a2d__display__client_8c_a0ddf1224851353fc92bfbff6f499fa97}


Definition at line 170 of file a2d\+\_\+display\+\_\+client.\+c.



References A2\+D\+\_\+\+B\+A\+SE, gd\+\_\+i\+\_\+i2c\+\_\+address, gd\+\_\+i\+\_\+socket, gd\+\_\+i\+\_\+update, gd\+\_\+pch\+\_\+message, gd\+\_\+pch\+\_\+service\+\_\+name, gi\+\_\+exit\+\_\+flag, \+\_\+service\+Entry\+::ip, L\+ED, \+\_\+service\+Entry\+::name, \+\_\+service\+Entry\+::port, \+\_\+service\+Request\+::request, S\+D\+\_\+\+D\+E\+B\+UG, S\+D\+\_\+\+N\+O\+T\+I\+CE, S\+D\+\_\+\+W\+A\+R\+N\+I\+NG, service\+\_\+registry\+\_\+destroy(), service\+\_\+registry\+\_\+entry\+\_\+count(), service\+\_\+registry\+\_\+find\+\_\+entry(), service\+\_\+registry\+\_\+get\+\_\+via\+\_\+udp\+\_\+broadcast(), signals\+\_\+cleanup(), signals\+\_\+init(), skn\+\_\+handle\+\_\+locator\+\_\+command\+\_\+line(), skn\+\_\+program\+\_\+name\+\_\+and\+\_\+description\+\_\+set(), S\+K\+N\+\_\+\+R\+U\+N\+\_\+\+M\+O\+D\+E\+\_\+\+R\+UN, skn\+\_\+service\+\_\+request\+\_\+create(), skn\+\_\+udp\+\_\+host\+\_\+create\+\_\+broadcast\+\_\+socket(), skn\+\_\+udp\+\_\+host\+\_\+create\+\_\+regular\+\_\+socket(), skn\+\_\+udp\+\_\+service\+\_\+request(), skn\+Get\+Module\+Bright(), skn\+Get\+Module\+Temp(), S\+Z\+\_\+\+C\+H\+A\+R\+\_\+\+B\+U\+FF, and S\+Z\+\_\+\+I\+N\+F\+O\+\_\+\+B\+U\+FF.


\begin{DoxyCode}
171 \{
172     \textcolor{keywordtype}{char} request[\hyperlink{cmd_d_c_8c_a442d5e93bd9c9d8eb4532aba62b5f86c}{SZ\_INFO\_BUFF}];
173     \textcolor{keywordtype}{char} registry[\hyperlink{cmd_d_c_8c_a8d2978ad614b0de81c60483e706d9306}{SZ\_CHAR\_BUFF}];
174     \hyperlink{struct__service_registry}{PServiceRegistry} psr = NULL;
175     \hyperlink{struct__service_entry}{PRegistryEntry} pre = NULL;
176     \hyperlink{struct__service_request}{PServiceRequest} pnsr = NULL;
177     \textcolor{keywordtype}{int} vIndex = 0;
178 
179     \hyperlink{skn__network__helpers_8c_a2c55396bf337471f9f99a939974fcdbe}{gd\_i\_i2c\_address} = 0;
180 
181     memset(registry, 0, \textcolor{keyword}{sizeof}(registry));
182     memset(request, 0, \textcolor{keyword}{sizeof}(request));
183     strncpy(registry, \textcolor{stringliteral}{"DisplayClient: Raspberry Pi where are you?"}, \textcolor{keyword}{sizeof}(registry) - 1);
184 
185     \hyperlink{skn__network__helpers_8c_ac2672efa5ece276743c6558dfe82d01a}{skn\_program\_name\_and\_description\_set}(
186             \textcolor{stringliteral}{"a2d\_display\_client"},
187             \textcolor{stringliteral}{"Send Measured Temperature and Light(lux) to Display Service."}
188     );
189 
190     \textcolor{comment}{/* Parse any command line options,}
191 \textcolor{comment}{     * like request string override */}
192     \textcolor{keywordflow}{if} (\hyperlink{skn__network__helpers_8c_a665c441c1f789eb555b1c23ed43de890}{skn\_handle\_locator\_command\_line}(argc, argv) == EXIT\_FAILURE) \{
193         exit(EXIT\_FAILURE);
194     \}
195     \textcolor{keywordflow}{if} (\hyperlink{skn__network__helpers_8c_a0bb2e7571c22c0455842aba8cf1d97dc}{gd\_pch\_message} != NULL) \{
196             strncpy(request, \hyperlink{skn__network__helpers_8c_a0bb2e7571c22c0455842aba8cf1d97dc}{gd\_pch\_message}, \textcolor{keyword}{sizeof}(request));
197         free(\hyperlink{skn__network__helpers_8c_a0bb2e7571c22c0455842aba8cf1d97dc}{gd\_pch\_message}); \textcolor{comment}{// from strdup()}
198         \hyperlink{skn__network__helpers_8c_a0bb2e7571c22c0455842aba8cf1d97dc}{gd\_pch\_message} = request;
199     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (argc == 2) \{
200             strcpy(request, argv[1]);
201     \}
202 
203     skn\_logger(\hyperlink{skn__common__headers_8h_a3ace3381f5b69f4a46fc35b70844a5dc}{SD\_DEBUG}, \textcolor{stringliteral}{"Request  Message [%s]"}, request);
204     skn\_logger(\hyperlink{skn__common__headers_8h_a3ace3381f5b69f4a46fc35b70844a5dc}{SD\_DEBUG}, \textcolor{stringliteral}{"Registry Message [%s]"}, registry);
205 
206     \textcolor{comment}{/* Initialize Signal handler */}
207     \hyperlink{skn__network__helpers_8c_a6af44fa0e0746d3d2a804fea1e84dacd}{signals\_init}();
208 
209     \textcolor{comment}{// wiringPiSetup () ;}
210     wiringPiSetupSys();
211 
212     \textcolor{comment}{// Add in the pcf8591}
213     \textcolor{keywordflow}{if} (\hyperlink{skn__network__helpers_8c_a2c55396bf337471f9f99a939974fcdbe}{gd\_i\_i2c\_address} == 0) \{
214         \hyperlink{skn__network__helpers_8c_a2c55396bf337471f9f99a939974fcdbe}{gd\_i\_i2c\_address} = 0x49;
215     \}
216     pcf8591Setup (\hyperlink{a2d__display__client_8c_a156bd70d435f8481617cc0d840035e79}{A2D\_BASE}, \hyperlink{skn__network__helpers_8c_a2c55396bf337471f9f99a939974fcdbe}{gd\_i\_i2c\_address}) ;
217 
218     pinMode (\hyperlink{a2d__display__client_8c_aeb7a7ba1ab7e0406f1b5ab36d579f585}{LED}, OUTPUT) ;   \textcolor{comment}{// On-board LED}
219     analogWrite(\hyperlink{a2d__display__client_8c_aeb7a7ba1ab7e0406f1b5ab36d579f585}{LED}, 0) ;     \textcolor{comment}{// Turn off the LED}
220 
221     \textcolor{comment}{/* Create local socket for sending requests */}
222     \hyperlink{skn__network__helpers_8c_a62c4e1910a12d9a04a12768154853712}{gd\_i\_socket} = \hyperlink{skn__network__helpers_8c_a4f9f7e0f50cb3073d9c6e5a6a0d5240d}{skn\_udp\_host\_create\_broadcast\_socket}(0, 4.
      0);
223     \textcolor{keywordflow}{if} (\hyperlink{skn__network__helpers_8c_a62c4e1910a12d9a04a12768154853712}{gd\_i\_socket} == EXIT\_FAILURE) \{
224         \hyperlink{skn__network__helpers_8c_ac256e2066453ab0ff82322aa24b161df}{signals\_cleanup}(\hyperlink{skn__network__helpers_8c_a7b63b016033aaa3ad752bdbd887d10c0}{gi\_exit\_flag});
225         exit(EXIT\_FAILURE);     
226     \}
227 
228     skn\_logger(\hyperlink{skn__common__headers_8h_a4e0c16529642a911483bd7eaabefca4c}{SD\_NOTICE}, \textcolor{stringliteral}{"Application Active..."});
229 
230     \textcolor{comment}{/* Get the ServiceRegistry from Provider}
231 \textcolor{comment}{     * - could return null if error */}
232     psr = \hyperlink{skn__network__helpers_8c_a8a291f1cb8d18e45a3e9b6bc9e3798a6}{service\_registry\_get\_via\_udp\_broadcast}(
      \hyperlink{skn__network__helpers_8c_a62c4e1910a12d9a04a12768154853712}{gd\_i\_socket}, registry);
233     \textcolor{keywordflow}{if} (psr != NULL && \hyperlink{skn__network__helpers_8c_a88465ff1322cb437fd3b7a1e036fd017}{service\_registry\_entry\_count}(psr) != 0) \{
234         \textcolor{keywordtype}{char} *service\_name = \textcolor{stringliteral}{"lcd\_display\_service"};
235 
236         \textcolor{keywordflow}{if} (\hyperlink{skn__network__helpers_8c_a2f908b49598a49ea624bfcc3e2175b7c}{gd\_pch\_service\_name} != NULL) \{
237             service\_name = \hyperlink{skn__network__helpers_8c_a2f908b49598a49ea624bfcc3e2175b7c}{gd\_pch\_service\_name};
238         \}
239 
240         \textcolor{comment}{/* find a single entry */}
241         pre = \hyperlink{skn__network__helpers_8c_ab5ed70a05f4e20dac13298ae16530069}{service\_registry\_find\_entry}(psr, service\_name);
242         \textcolor{keywordflow}{if} (pre != NULL) \{
243             skn\_logger(\textcolor{stringliteral}{" "}, \textcolor{stringliteral}{"\(\backslash\)nLCD DisplayService (%s) is located at IPv4: %s:%d\(\backslash\)n"}, pre->
      \hyperlink{struct__service_entry_aa66dcf0806f67276d049ac75c6153768}{name}, pre->\hyperlink{struct__service_entry_a70b1db0895fbe31c07c8799cb57c678a}{ip}, pre->\hyperlink{struct__service_entry_ac8a3a40de5eee937afb42faea4d18bb2}{port});
244         \}
245 
246         \textcolor{comment}{/*}
247 \textcolor{comment}{         * Switch to non-broadcast type socket */}
248         close(\hyperlink{skn__network__helpers_8c_a62c4e1910a12d9a04a12768154853712}{gd\_i\_socket}); \hyperlink{skn__network__helpers_8c_a62c4e1910a12d9a04a12768154853712}{gd\_i\_socket} = -1;
249         \hyperlink{skn__network__helpers_8c_a62c4e1910a12d9a04a12768154853712}{gd\_i\_socket} = \hyperlink{skn__network__helpers_8c_a25427bc0b7f087d1135c92dd3704f210}{skn\_udp\_host\_create\_regular\_socket}(0, 8.
      0);
250         \textcolor{keywordflow}{if} (\hyperlink{skn__network__helpers_8c_a62c4e1910a12d9a04a12768154853712}{gd\_i\_socket} == EXIT\_FAILURE) \{
251             \textcolor{keywordflow}{if} (psr != NULL) \hyperlink{skn__network__helpers_8c_a819c12fc7c8ff576b1aaad69bc098840}{service\_registry\_destroy}(psr);
252             \hyperlink{skn__network__helpers_8c_ac256e2066453ab0ff82322aa24b161df}{signals\_cleanup}(\hyperlink{skn__network__helpers_8c_a7b63b016033aaa3ad752bdbd887d10c0}{gi\_exit\_flag});
253             exit(EXIT\_FAILURE);
254         \}
255     \}
256 
257     \textcolor{comment}{// we have the location}
258     \textcolor{keywordflow}{if} (pre != NULL) \{
259         \textcolor{keywordflow}{if} (request[0] == 0) \{
260             \hyperlink{a2d__display__client_8c_aa3e4c4ec57381e265a116d7a874e22c6}{sknGetModuleTemp}(request);
261         \}
262         pnsr = \hyperlink{skn__network__helpers_8c_a922ccd04b4dc28211ff08c4c62462544}{skn\_service\_request\_create}(pre, 
      \hyperlink{skn__network__helpers_8c_a62c4e1910a12d9a04a12768154853712}{gd\_i\_socket}, request);
263     \}
264     \textcolor{keywordflow}{if} (pnsr != NULL) \{
265         \textcolor{keywordflow}{do} \{
266             analogWrite(\hyperlink{a2d__display__client_8c_aeb7a7ba1ab7e0406f1b5ab36d579f585}{LED}, 255) ; \textcolor{comment}{// Flicker the LED}
267 
268             \textcolor{comment}{/*}
269 \textcolor{comment}{             * Do Work */}
270             \hyperlink{a2d__display__client_8c_aa3e4c4ec57381e265a116d7a874e22c6}{sknGetModuleTemp}(pnsr->\hyperlink{struct__service_request_ad347b2a07388ec9d9d33756f1a1ef235}{request});
271             vIndex = \hyperlink{skn__network__helpers_8c_ad8304e97f9bccee1cd899a61b91ae677}{skn\_udp\_service\_request}(pnsr);
272             \textcolor{keywordflow}{if} ((vIndex == EXIT\_FAILURE) && (\hyperlink{skn__network__helpers_8c_a49e7c0da0f26a1f505934e5610ead123}{gd\_i\_update} == 0)) \{ \textcolor{comment}{// ignore if non-stop is set}
273                 \textcolor{keywordflow}{break};
274             \}
275 
276             sleep(3);
277 
278             \textcolor{comment}{/*}
279 \textcolor{comment}{             * Do Work */}
280             \hyperlink{a2d__display__client_8c_a11856a55dede9d8199ca0ad08d10d4b5}{sknGetModuleBright}(pnsr->\hyperlink{struct__service_request_ad347b2a07388ec9d9d33756f1a1ef235}{request});
281             vIndex = \hyperlink{skn__network__helpers_8c_ad8304e97f9bccee1cd899a61b91ae677}{skn\_udp\_service\_request}(pnsr);
282             \textcolor{keywordflow}{if} ((vIndex == EXIT\_FAILURE) && (\hyperlink{skn__network__helpers_8c_a49e7c0da0f26a1f505934e5610ead123}{gd\_i\_update} == 0)) \{ \textcolor{comment}{// ignore if non-stop is set}
283                 \textcolor{keywordflow}{break};
284             \}
285 
286             analogWrite(\hyperlink{a2d__display__client_8c_aeb7a7ba1ab7e0406f1b5ab36d579f585}{LED}, 0) ; \textcolor{comment}{// Flicker the LED}
287 
288             sleep(\hyperlink{skn__network__helpers_8c_a49e7c0da0f26a1f505934e5610ead123}{gd\_i\_update});
289         \} \textcolor{keywordflow}{while}(\hyperlink{skn__network__helpers_8c_a49e7c0da0f26a1f505934e5610ead123}{gd\_i\_update} != 0 && \hyperlink{skn__network__helpers_8c_a7b63b016033aaa3ad752bdbd887d10c0}{gi\_exit\_flag} == 
      \hyperlink{skn__common__headers_8h_a3f5142b81a9ee977aedfd69a61281920}{SKN\_RUN\_MODE\_RUN});
290         free(pnsr);  \textcolor{comment}{// Done}
291 
292     \} \textcolor{keywordflow}{else} \{
293         skn\_logger(\hyperlink{skn__common__headers_8h_a1b84e50e89a48558f56175017017c375}{SD\_WARNING}, \textcolor{stringliteral}{"Unable to create Network Request."});
294     \}
295 
296     \textcolor{comment}{/* Cleanup and shutdown}
297 \textcolor{comment}{     * - if shutdown was caused by signal handler}
298 \textcolor{comment}{     *   then a termination signal will be sent via signal()}
299 \textcolor{comment}{     *   otherwise, a normal exit occurs}
300 \textcolor{comment}{     */}
301     analogWrite(\hyperlink{a2d__display__client_8c_aeb7a7ba1ab7e0406f1b5ab36d579f585}{LED}, 0) ; \textcolor{comment}{// LED off}
302     \textcolor{keywordflow}{if} (\hyperlink{skn__network__helpers_8c_a62c4e1910a12d9a04a12768154853712}{gd\_i\_socket}) close(\hyperlink{skn__network__helpers_8c_a62c4e1910a12d9a04a12768154853712}{gd\_i\_socket});
303     \textcolor{keywordflow}{if} (psr != NULL) \hyperlink{skn__network__helpers_8c_a819c12fc7c8ff576b1aaad69bc098840}{service\_registry\_destroy}(psr);
304     \hyperlink{skn__network__helpers_8c_ac256e2066453ab0ff82322aa24b161df}{signals\_cleanup}(\hyperlink{skn__network__helpers_8c_a7b63b016033aaa3ad752bdbd887d10c0}{gi\_exit\_flag});
305 
306     exit(EXIT\_SUCCESS);
307 \}
\end{DoxyCode}


Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{a2d__display__client_8c_a0ddf1224851353fc92bfbff6f499fa97_cgraph}
\end{center}
\end{figure}


\index{a2d\+\_\+display\+\_\+client.\+c@{a2d\+\_\+display\+\_\+client.\+c}!read\+Average\+Sensor\+Value@{read\+Average\+Sensor\+Value}}
\index{read\+Average\+Sensor\+Value@{read\+Average\+Sensor\+Value}!a2d\+\_\+display\+\_\+client.\+c@{a2d\+\_\+display\+\_\+client.\+c}}
\subsubsection[{\texorpdfstring{read\+Average\+Sensor\+Value(int sensor)}{readAverageSensorValue(int sensor)}}]{\setlength{\rightskip}{0pt plus 5cm}double read\+Average\+Sensor\+Value (
\begin{DoxyParamCaption}
\item[{int}]{sensor}
\end{DoxyParamCaption}
)}\hypertarget{a2d__display__client_8c_a0d9c1f78de300df3a47682ad0145c74c}{}\label{a2d__display__client_8c_a0d9c1f78de300df3a47682ad0145c74c}
Averages sensor value from five reads 

Definition at line 104 of file a2d\+\_\+display\+\_\+client.\+c.



References M\+A\+X\+R\+E\+A\+DS.



Referenced by skn\+Get\+Module\+Bright(), and skn\+Get\+Module\+Temp().


\begin{DoxyCode}
104                                           \{
105     \textcolor{keywordtype}{int} rvalue[\hyperlink{a2d__display__client_8c_a5b0f85621d68fce04356f6b48203bc53}{MAXREADS}+3], index;
106 
107     \textcolor{comment}{/*}
108 \textcolor{comment}{     * Temperature Sensor */}
109     \textcolor{keywordflow}{for} (index = 0, rvalue[\hyperlink{a2d__display__client_8c_a5b0f85621d68fce04356f6b48203bc53}{MAXREADS}] = 0; index < \hyperlink{a2d__display__client_8c_a5b0f85621d68fce04356f6b48203bc53}{MAXREADS}; index++) \{
110         rvalue[index] = analogRead(sensor) ;
111         rvalue[\hyperlink{a2d__display__client_8c_a5b0f85621d68fce04356f6b48203bc53}{MAXREADS}] += rvalue[index];
112         delay(10);
113     \}
114 
115     \textcolor{keywordflow}{return} rvalue[\hyperlink{a2d__display__client_8c_a5b0f85621d68fce04356f6b48203bc53}{MAXREADS}] / MAXREADS * 1.0;
116 \}
\end{DoxyCode}


Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{a2d__display__client_8c_a0d9c1f78de300df3a47682ad0145c74c_icgraph}
\end{center}
\end{figure}


\index{a2d\+\_\+display\+\_\+client.\+c@{a2d\+\_\+display\+\_\+client.\+c}!skn\+Get\+Module\+Bright@{skn\+Get\+Module\+Bright}}
\index{skn\+Get\+Module\+Bright@{skn\+Get\+Module\+Bright}!a2d\+\_\+display\+\_\+client.\+c@{a2d\+\_\+display\+\_\+client.\+c}}
\subsubsection[{\texorpdfstring{skn\+Get\+Module\+Bright(char $\ast$buffer)}{sknGetModuleBright(char *buffer)}}]{\setlength{\rightskip}{0pt plus 5cm}int skn\+Get\+Module\+Bright (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{buffer}
\end{DoxyParamCaption}
)}\hypertarget{a2d__display__client_8c_a11856a55dede9d8199ca0ad08d10d4b5}{}\label{a2d__display__client_8c_a11856a55dede9d8199ca0ad08d10d4b5}
Photo Resistor Brightness Indicator 

Definition at line 141 of file a2d\+\_\+display\+\_\+client.\+c.



References A2\+D\+\_\+\+P\+H\+O\+TO, read\+Average\+Sensor\+Value(), and S\+Z\+\_\+\+I\+N\+F\+O\+\_\+\+B\+U\+FF.



Referenced by main().


\begin{DoxyCode}
141                                      \{
142     \textcolor{keywordtype}{double} value = 0.0;
143     \textcolor{keywordtype}{char} *plights;
144 
145     \textcolor{comment}{/*}
146 \textcolor{comment}{     * Photo Sensor Lumens */}
147     value = \hyperlink{a2d__display__client_8c_a0d9c1f78de300df3a47682ad0145c74c}{readAverageSensorValue}(\hyperlink{a2d__display__client_8c_acb5e01429d74da87520e69fe799c5539}{A2D\_PHOTO}) ;
148     value = 256.0 - value;
149 
150     \textcolor{keywordflow}{if} (value < 2.5) \{
151         plights = \textcolor{stringliteral}{"Dark"};
152     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (value < 50.0) \{
153         plights = \textcolor{stringliteral}{"Dim"};
154     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (value < 125.0) \{
155         plights = \textcolor{stringliteral}{"Light"};
156     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (value < 199.0) \{
157         plights = \textcolor{stringliteral}{"Bright"};
158     \} \textcolor{keywordflow}{else} \{
159         plights = \textcolor{stringliteral}{"Brightest"};
160     \}
161 
162     \textcolor{comment}{/*}
163 \textcolor{comment}{     * Write to output buffer */}
164     snprintf( buffer, (\hyperlink{cmd_d_c_8c_a442d5e93bd9c9d8eb4532aba62b5f86c}{SZ\_INFO\_BUFF} - 1), \textcolor{stringliteral}{"%s"}, plights);
165 
166   \textcolor{keywordflow}{return} EXIT\_SUCCESS;
167 \}
\end{DoxyCode}


Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{a2d__display__client_8c_a11856a55dede9d8199ca0ad08d10d4b5_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=260pt]{a2d__display__client_8c_a11856a55dede9d8199ca0ad08d10d4b5_icgraph}
\end{center}
\end{figure}


\index{a2d\+\_\+display\+\_\+client.\+c@{a2d\+\_\+display\+\_\+client.\+c}!skn\+Get\+Module\+Temp@{skn\+Get\+Module\+Temp}}
\index{skn\+Get\+Module\+Temp@{skn\+Get\+Module\+Temp}!a2d\+\_\+display\+\_\+client.\+c@{a2d\+\_\+display\+\_\+client.\+c}}
\subsubsection[{\texorpdfstring{skn\+Get\+Module\+Temp(char $\ast$buffer)}{sknGetModuleTemp(char *buffer)}}]{\setlength{\rightskip}{0pt plus 5cm}int skn\+Get\+Module\+Temp (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{buffer}
\end{DoxyParamCaption}
)}\hypertarget{a2d__display__client_8c_aa3e4c4ec57381e265a116d7a874e22c6}{}\label{a2d__display__client_8c_aa3e4c4ec57381e265a116d7a874e22c6}
Free Air Temps 

Definition at line 121 of file a2d\+\_\+display\+\_\+client.\+c.



References A2\+D\+\_\+\+T\+H\+E\+RM, read\+Average\+Sensor\+Value(), steinhart\+Adc\+To\+Celsius(), and S\+Z\+\_\+\+I\+N\+F\+O\+\_\+\+B\+U\+FF.



Referenced by main().


\begin{DoxyCode}
121                                    \{
122     \textcolor{keywordtype}{double} fTemp = 0.0, cTemp = 0.0, value = 0.0;
123 
124     value = \hyperlink{a2d__display__client_8c_a0d9c1f78de300df3a47682ad0145c74c}{readAverageSensorValue}(\hyperlink{a2d__display__client_8c_adfc0e9974672ef9d4586914fff4d92cd}{A2D\_THERM});
125 
126     \textcolor{comment}{/*}
127 \textcolor{comment}{     * Steinhart Method */}
128     cTemp = \hyperlink{a2d__display__client_8c_a7103c23f637c6c8710a0766e61a8e436}{steinhartAdcToCelsius}(value);
129     fTemp = (cTemp * 1.8) + 32.0;          \textcolor{comment}{// Convert to USA}
130 
131     \textcolor{comment}{/*}
132 \textcolor{comment}{     * Write to output buffer */}
133     snprintf( buffer, (\hyperlink{cmd_d_c_8c_a442d5e93bd9c9d8eb4532aba62b5f86c}{SZ\_INFO\_BUFF} - 1),\textcolor{stringliteral}{"[A] %.0fC %.0fF"}, cTemp, fTemp);
134 
135   \textcolor{keywordflow}{return} EXIT\_SUCCESS;
136 \}
\end{DoxyCode}


Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{a2d__display__client_8c_aa3e4c4ec57381e265a116d7a874e22c6_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=259pt]{a2d__display__client_8c_aa3e4c4ec57381e265a116d7a874e22c6_icgraph}
\end{center}
\end{figure}


\index{a2d\+\_\+display\+\_\+client.\+c@{a2d\+\_\+display\+\_\+client.\+c}!steinhart\+Adc\+To\+Celsius@{steinhart\+Adc\+To\+Celsius}}
\index{steinhart\+Adc\+To\+Celsius@{steinhart\+Adc\+To\+Celsius}!a2d\+\_\+display\+\_\+client.\+c@{a2d\+\_\+display\+\_\+client.\+c}}
\subsubsection[{\texorpdfstring{steinhart\+Adc\+To\+Celsius(int raw\+A\+D\+C)}{steinhartAdcToCelsius(int rawADC)}}]{\setlength{\rightskip}{0pt plus 5cm}double steinhart\+Adc\+To\+Celsius (
\begin{DoxyParamCaption}
\item[{int}]{raw\+A\+DC}
\end{DoxyParamCaption}
)}\hypertarget{a2d__display__client_8c_a7103c23f637c6c8710a0766e61a8e436}{}\label{a2d__display__client_8c_a7103c23f637c6c8710a0766e61a8e436}
Inputs A\+DC Value from Thermistor and outputs Temperature in Celsius

Utilizes the Steinhart-\/\+Hart Thermistor Equation\+:

If r is the thermistor resistance we can use the Steinhart-\/\+Hart equation to calculate the temperature t in degrees kelvin\+: return Celsius t = 1 / (sA + sB $\ast$ ln(r) + sC $\ast$ ln(r) $\ast$ ln(r) $\ast$ ln(r))

Temperature in Kelvin = 1 / (A + B $\ast$ ln(r) + C $\ast$ ln(r) $\ast$ ln(r) $\ast$ ln(r)) where A = 0.\+001129148, B = 0.\+000234125 and C = 8.\+76741E-\/08 

Definition at line 69 of file a2d\+\_\+display\+\_\+client.\+c.



References adc\+To\+Ohms(), calibration\+Offset, sA, sB, and sC.



Referenced by skn\+Get\+Module\+Temp().


\begin{DoxyCode}
69                                          \{
70   \textcolor{keywordtype}{double} kelvin = 0.0, celsius = 0.0;
71 
72   kelvin = log( \hyperlink{a2d__display__client_8c_a935f6a4b5fc20d0727532f09a2ab7ed7}{adcToOhms}(rawADC) );
73   kelvin = 1 / (\hyperlink{a2d__display__client_8c_ac57d650719d4c72194f299ad3b94a081}{sA} + (\hyperlink{a2d__display__client_8c_a35e231d3a6c6cbf62f161a3fec404e0a}{sB} * kelvin) + \hyperlink{a2d__display__client_8c_a6ef862c3f1ecec0fe90a62f7251e4ef7}{sC} * kelvin * kelvin * kelvin );
74   celsius = kelvin - 273.15;  \textcolor{comment}{// Convert Kelvin to Celsius}
75 
76   \textcolor{keywordflow}{return} celsius + \hyperlink{a2d__display__client_8c_af4fe1994dbd2d2dea75604050851378c}{calibrationOffset}; \textcolor{comment}{// Return the Temperature in C, with correction
       offset}
77 \}
\end{DoxyCode}


Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=300pt]{a2d__display__client_8c_a7103c23f637c6c8710a0766e61a8e436_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{a2d__display__client_8c_a7103c23f637c6c8710a0766e61a8e436_icgraph}
\end{center}
\end{figure}


